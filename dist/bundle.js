/*! For license information please see bundle.js.LICENSE.txt */
(()=>{var __webpack_modules__={"./User/controllers/addressController.js":(module,__unused_webpack_exports,__webpack_require__)=>{eval('function _typeof(o) { "@babel/helpers - typeof"; return _typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && "function" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? "symbol" : typeof o; }, _typeof(o); }\nfunction _regeneratorRuntime() { "use strict"; /*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */ _regeneratorRuntime = function _regeneratorRuntime() { return e; }; var t, e = {}, r = Object.prototype, n = r.hasOwnProperty, o = Object.defineProperty || function (t, e, r) { t[e] = r.value; }, i = "function" == typeof Symbol ? Symbol : {}, a = i.iterator || "@@iterator", c = i.asyncIterator || "@@asyncIterator", u = i.toStringTag || "@@toStringTag"; function define(t, e, r) { return Object.defineProperty(t, e, { value: r, enumerable: !0, configurable: !0, writable: !0 }), t[e]; } try { define({}, ""); } catch (t) { define = function define(t, e, r) { return t[e] = r; }; } function wrap(t, e, r, n) { var i = e && e.prototype instanceof Generator ? e : Generator, a = Object.create(i.prototype), c = new Context(n || []); return o(a, "_invoke", { value: makeInvokeMethod(t, r, c) }), a; } function tryCatch(t, e, r) { try { return { type: "normal", arg: t.call(e, r) }; } catch (t) { return { type: "throw", arg: t }; } } e.wrap = wrap; var h = "suspendedStart", l = "suspendedYield", f = "executing", s = "completed", y = {}; function Generator() {} function GeneratorFunction() {} function GeneratorFunctionPrototype() {} var p = {}; define(p, a, function () { return this; }); var d = Object.getPrototypeOf, v = d && d(d(values([]))); v && v !== r && n.call(v, a) && (p = v); var g = GeneratorFunctionPrototype.prototype = Generator.prototype = Object.create(p); function defineIteratorMethods(t) { ["next", "throw", "return"].forEach(function (e) { define(t, e, function (t) { return this._invoke(e, t); }); }); } function AsyncIterator(t, e) { function invoke(r, o, i, a) { var c = tryCatch(t[r], t, o); if ("throw" !== c.type) { var u = c.arg, h = u.value; return h && "object" == _typeof(h) && n.call(h, "__await") ? e.resolve(h.__await).then(function (t) { invoke("next", t, i, a); }, function (t) { invoke("throw", t, i, a); }) : e.resolve(h).then(function (t) { u.value = t, i(u); }, function (t) { return invoke("throw", t, i, a); }); } a(c.arg); } var r; o(this, "_invoke", { value: function value(t, n) { function callInvokeWithMethodAndArg() { return new e(function (e, r) { invoke(t, n, e, r); }); } return r = r ? r.then(callInvokeWithMethodAndArg, callInvokeWithMethodAndArg) : callInvokeWithMethodAndArg(); } }); } function makeInvokeMethod(e, r, n) { var o = h; return function (i, a) { if (o === f) throw Error("Generator is already running"); if (o === s) { if ("throw" === i) throw a; return { value: t, done: !0 }; } for (n.method = i, n.arg = a;;) { var c = n.delegate; if (c) { var u = maybeInvokeDelegate(c, n); if (u) { if (u === y) continue; return u; } } if ("next" === n.method) n.sent = n._sent = n.arg;else if ("throw" === n.method) { if (o === h) throw o = s, n.arg; n.dispatchException(n.arg); } else "return" === n.method && n.abrupt("return", n.arg); o = f; var p = tryCatch(e, r, n); if ("normal" === p.type) { if (o = n.done ? s : l, p.arg === y) continue; return { value: p.arg, done: n.done }; } "throw" === p.type && (o = s, n.method = "throw", n.arg = p.arg); } }; } function maybeInvokeDelegate(e, r) { var n = r.method, o = e.iterator[n]; if (o === t) return r.delegate = null, "throw" === n && e.iterator["return"] && (r.method = "return", r.arg = t, maybeInvokeDelegate(e, r), "throw" === r.method) || "return" !== n && (r.method = "throw", r.arg = new TypeError("The iterator does not provide a \'" + n + "\' method")), y; var i = tryCatch(o, e.iterator, r.arg); if ("throw" === i.type) return r.method = "throw", r.arg = i.arg, r.delegate = null, y; var a = i.arg; return a ? a.done ? (r[e.resultName] = a.value, r.next = e.nextLoc, "return" !== r.method && (r.method = "next", r.arg = t), r.delegate = null, y) : a : (r.method = "throw", r.arg = new TypeError("iterator result is not an object"), r.delegate = null, y); } function pushTryEntry(t) { var e = { tryLoc: t[0] }; 1 in t && (e.catchLoc = t[1]), 2 in t && (e.finallyLoc = t[2], e.afterLoc = t[3]), this.tryEntries.push(e); } function resetTryEntry(t) { var e = t.completion || {}; e.type = "normal", delete e.arg, t.completion = e; } function Context(t) { this.tryEntries = [{ tryLoc: "root" }], t.forEach(pushTryEntry, this), this.reset(!0); } function values(e) { if (e || "" === e) { var r = e[a]; if (r) return r.call(e); if ("function" == typeof e.next) return e; if (!isNaN(e.length)) { var o = -1, i = function next() { for (; ++o < e.length;) if (n.call(e, o)) return next.value = e[o], next.done = !1, next; return next.value = t, next.done = !0, next; }; return i.next = i; } } throw new TypeError(_typeof(e) + " is not iterable"); } return GeneratorFunction.prototype = GeneratorFunctionPrototype, o(g, "constructor", { value: GeneratorFunctionPrototype, configurable: !0 }), o(GeneratorFunctionPrototype, "constructor", { value: GeneratorFunction, configurable: !0 }), GeneratorFunction.displayName = define(GeneratorFunctionPrototype, u, "GeneratorFunction"), e.isGeneratorFunction = function (t) { var e = "function" == typeof t && t.constructor; return !!e && (e === GeneratorFunction || "GeneratorFunction" === (e.displayName || e.name)); }, e.mark = function (t) { return Object.setPrototypeOf ? Object.setPrototypeOf(t, GeneratorFunctionPrototype) : (t.__proto__ = GeneratorFunctionPrototype, define(t, u, "GeneratorFunction")), t.prototype = Object.create(g), t; }, e.awrap = function (t) { return { __await: t }; }, defineIteratorMethods(AsyncIterator.prototype), define(AsyncIterator.prototype, c, function () { return this; }), e.AsyncIterator = AsyncIterator, e.async = function (t, r, n, o, i) { void 0 === i && (i = Promise); var a = new AsyncIterator(wrap(t, r, n, o), i); return e.isGeneratorFunction(r) ? a : a.next().then(function (t) { return t.done ? t.value : a.next(); }); }, defineIteratorMethods(g), define(g, u, "Generator"), define(g, a, function () { return this; }), define(g, "toString", function () { return "[object Generator]"; }), e.keys = function (t) { var e = Object(t), r = []; for (var n in e) r.push(n); return r.reverse(), function next() { for (; r.length;) { var t = r.pop(); if (t in e) return next.value = t, next.done = !1, next; } return next.done = !0, next; }; }, e.values = values, Context.prototype = { constructor: Context, reset: function reset(e) { if (this.prev = 0, this.next = 0, this.sent = this._sent = t, this.done = !1, this.delegate = null, this.method = "next", this.arg = t, this.tryEntries.forEach(resetTryEntry), !e) for (var r in this) "t" === r.charAt(0) && n.call(this, r) && !isNaN(+r.slice(1)) && (this[r] = t); }, stop: function stop() { this.done = !0; var t = this.tryEntries[0].completion; if ("throw" === t.type) throw t.arg; return this.rval; }, dispatchException: function dispatchException(e) { if (this.done) throw e; var r = this; function handle(n, o) { return a.type = "throw", a.arg = e, r.next = n, o && (r.method = "next", r.arg = t), !!o; } for (var o = this.tryEntries.length - 1; o >= 0; --o) { var i = this.tryEntries[o], a = i.completion; if ("root" === i.tryLoc) return handle("end"); if (i.tryLoc <= this.prev) { var c = n.call(i, "catchLoc"), u = n.call(i, "finallyLoc"); if (c && u) { if (this.prev < i.catchLoc) return handle(i.catchLoc, !0); if (this.prev < i.finallyLoc) return handle(i.finallyLoc); } else if (c) { if (this.prev < i.catchLoc) return handle(i.catchLoc, !0); } else { if (!u) throw Error("try statement without catch or finally"); if (this.prev < i.finallyLoc) return handle(i.finallyLoc); } } } }, abrupt: function abrupt(t, e) { for (var r = this.tryEntries.length - 1; r >= 0; --r) { var o = this.tryEntries[r]; if (o.tryLoc <= this.prev && n.call(o, "finallyLoc") && this.prev < o.finallyLoc) { var i = o; break; } } i && ("break" === t || "continue" === t) && i.tryLoc <= e && e <= i.finallyLoc && (i = null); var a = i ? i.completion : {}; return a.type = t, a.arg = e, i ? (this.method = "next", this.next = i.finallyLoc, y) : this.complete(a); }, complete: function complete(t, e) { if ("throw" === t.type) throw t.arg; return "break" === t.type || "continue" === t.type ? this.next = t.arg : "return" === t.type ? (this.rval = this.arg = t.arg, this.method = "return", this.next = "end") : "normal" === t.type && e && (this.next = e), y; }, finish: function finish(t) { for (var e = this.tryEntries.length - 1; e >= 0; --e) { var r = this.tryEntries[e]; if (r.finallyLoc === t) return this.complete(r.completion, r.afterLoc), resetTryEntry(r), y; } }, "catch": function _catch(t) { for (var e = this.tryEntries.length - 1; e >= 0; --e) { var r = this.tryEntries[e]; if (r.tryLoc === t) { var n = r.completion; if ("throw" === n.type) { var o = n.arg; resetTryEntry(r); } return o; } } throw Error("illegal catch attempt"); }, delegateYield: function delegateYield(e, r, n) { return this.delegate = { iterator: values(e), resultName: r, nextLoc: n }, "next" === this.method && (this.arg = t), y; } }, e; }\nfunction asyncGeneratorStep(n, t, e, r, o, a, c) { try { var i = n[a](c), u = i.value; } catch (n) { return void e(n); } i.done ? t(u) : Promise.resolve(u).then(r, o); }\nfunction _asyncToGenerator(n) { return function () { var t = this, e = arguments; return new Promise(function (r, o) { var a = n.apply(t, e); function _next(n) { asyncGeneratorStep(a, r, o, _next, _throw, "next", n); } function _throw(n) { asyncGeneratorStep(a, r, o, _next, _throw, "throw", n); } _next(void 0); }); }; }\nvar _require = __webpack_require__(/*! ../../services/ResponseService */ "./services/ResponseService.js"),\n  Response = _require.Response;\nvar config = __webpack_require__(/*! ../../config.js */ "./config.js");\nvar Address = __webpack_require__(/*! ../models/addressModel.js */ "./User/models/addressModel.js");\nvar listAddress = /*#__PURE__*/function () {\n  var _ref = _asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(req, res) {\n    var _req$query, page, size, _id, skip, _error$message;\n    return _regeneratorRuntime().wrap(function _callee$(_context) {\n      while (1) switch (_context.prev = _context.next) {\n        case 0:\n          _context.prev = 0;\n          _req$query = req.query, page = _req$query.page, size = _req$query.size;\n          _id = req.user._id;\n          skip = (page - 1) * size;\n          _context.next = 6;\n          return Address.find({\n            userId: _id,\n            status: 1\n          }).skip(skip).limit(size).sort({\n            createdAt: -1\n          }).then(function (address) {\n            if (address.length == 0) {\n              Response(res, 200, config.success_message, "No data found", {\n                address: []\n              });\n            } else {\n              var data = {\n                page: page,\n                size: size,\n                totalLength: address.length,\n                address: address\n              };\n              Response(res, 200, config.success_message, null, data);\n            }\n          });\n        case 6:\n          _context.next = 12;\n          break;\n        case 8:\n          _context.prev = 8;\n          _context.t0 = _context["catch"](0);\n          console.log(_context.t0);\n          Response(res, 400, config.error_message, (_error$message = _context.t0 === null || _context.t0 === void 0 ? void 0 : _context.t0.message) !== null && _error$message !== void 0 ? _error$message : _context.t0, null);\n        case 12:\n        case "end":\n          return _context.stop();\n      }\n    }, _callee, null, [[0, 8]]);\n  }));\n  return function listAddress(_x, _x2) {\n    return _ref.apply(this, arguments);\n  };\n}();\nvar createAddress = /*#__PURE__*/function () {\n  var _ref2 = _asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(req, res) {\n    var _id, getAddress, _error$message2;\n    return _regeneratorRuntime().wrap(function _callee2$(_context2) {\n      while (1) switch (_context2.prev = _context2.next) {\n        case 0:\n          _context2.prev = 0;\n          _id = req.user._id;\n          req.body.userId = _id;\n          _context2.next = 5;\n          return Address.find({\n            userId: _id,\n            status: 1\n          });\n        case 5:\n          getAddress = _context2.sent;\n          getAddress.length == 0;\n          if (getAddress.length == 0) {\n            req.body["default"] = true;\n          }\n          _context2.next = 10;\n          return Address.create(req.body).then(function () {\n            Response(res, 200, config.success_message, "Address added successfully", null);\n          });\n        case 10:\n          _context2.next = 15;\n          break;\n        case 12:\n          _context2.prev = 12;\n          _context2.t0 = _context2["catch"](0);\n          Response(res, 400, config.error_message, (_error$message2 = _context2.t0 === null || _context2.t0 === void 0 ? void 0 : _context2.t0.message) !== null && _error$message2 !== void 0 ? _error$message2 : _context2.t0, null);\n        case 15:\n        case "end":\n          return _context2.stop();\n      }\n    }, _callee2, null, [[0, 12]]);\n  }));\n  return function createAddress(_x3, _x4) {\n    return _ref2.apply(this, arguments);\n  };\n}();\nvar updateAddress = /*#__PURE__*/function () {\n  var _ref3 = _asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee3(req, res) {\n    var _req$body, addressId, name, firstLine, secondLine, country, countryCode, postalCode, phone, phoneCode, city, state, _id, getAddressDetails, _error$message3;\n    return _regeneratorRuntime().wrap(function _callee3$(_context3) {\n      while (1) switch (_context3.prev = _context3.next) {\n        case 0:\n          _context3.prev = 0;\n          _req$body = req.body, addressId = _req$body.addressId, name = _req$body.name, firstLine = _req$body.firstLine, secondLine = _req$body.secondLine, country = _req$body.country, countryCode = _req$body.countryCode, postalCode = _req$body.postalCode, phone = _req$body.phone, phoneCode = _req$body.phoneCode, city = _req$body.city, state = _req$body.state;\n          _id = req.user._id;\n          console.log(req.body);\n          _context3.next = 6;\n          return Address.findOne({\n            _id: addressId,\n            status: 1\n          });\n        case 6:\n          getAddressDetails = _context3.sent;\n          console.log(getAddressDetails);\n          _context3.next = 10;\n          return Address.updateOne({\n            _id: addressId,\n            userId: _id\n          }, {\n            name: name,\n            firstLine: firstLine,\n            secondLine: secondLine,\n            country: country,\n            countryCode: countryCode,\n            postalCode: postalCode,\n            city: city,\n            state: state,\n            phone: phone,\n            phoneCode: phoneCode\n          }).then(function () {\n            Response(res, 200, config.success_message, "Address updated successfully", null);\n          });\n        case 10:\n          _context3.next = 15;\n          break;\n        case 12:\n          _context3.prev = 12;\n          _context3.t0 = _context3["catch"](0);\n          Response(res, 400, config.error_message, (_error$message3 = _context3.t0 === null || _context3.t0 === void 0 ? void 0 : _context3.t0.message) !== null && _error$message3 !== void 0 ? _error$message3 : _context3.t0, null);\n        case 15:\n        case "end":\n          return _context3.stop();\n      }\n    }, _callee3, null, [[0, 12]]);\n  }));\n  return function updateAddress(_x5, _x6) {\n    return _ref3.apply(this, arguments);\n  };\n}();\nvar removeAddress = /*#__PURE__*/function () {\n  var _ref4 = _asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee4(req, res) {\n    var _id, _error$message4;\n    return _regeneratorRuntime().wrap(function _callee4$(_context4) {\n      while (1) switch (_context4.prev = _context4.next) {\n        case 0:\n          _context4.prev = 0;\n          _id = req.user._id;\n          _context4.next = 4;\n          return Address.updateOne({\n            _id: req.params.id,\n            userId: _id\n          }, {\n            status: 0\n          }).then(function () {\n            Response(res, 200, config.success_message, "Address removed successfully", null);\n          });\n        case 4:\n          _context4.next = 9;\n          break;\n        case 6:\n          _context4.prev = 6;\n          _context4.t0 = _context4["catch"](0);\n          Response(res, 400, config.error_message, (_error$message4 = _context4.t0 === null || _context4.t0 === void 0 ? void 0 : _context4.t0.message) !== null && _error$message4 !== void 0 ? _error$message4 : _context4.t0, null);\n        case 9:\n        case "end":\n          return _context4.stop();\n      }\n    }, _callee4, null, [[0, 6]]);\n  }));\n  return function removeAddress(_x7, _x8) {\n    return _ref4.apply(this, arguments);\n  };\n}();\nvar updateDefaultAddress = /*#__PURE__*/function () {\n  var _ref5 = _asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee5(req, res) {\n    var _id, defaultAddress, _error$message5;\n    return _regeneratorRuntime().wrap(function _callee5$(_context5) {\n      while (1) switch (_context5.prev = _context5.next) {\n        case 0:\n          _context5.prev = 0;\n          _id = req.user._id;\n          _context5.next = 4;\n          return Address.findOne({\n            userId: _id,\n            "default": true\n          });\n        case 4:\n          defaultAddress = _context5.sent;\n          if (!defaultAddress) {\n            _context5.next = 8;\n            break;\n          }\n          _context5.next = 8;\n          return Address.updateOne({\n            _id: defaultAddress._id,\n            userId: _id\n          }, {\n            "default": false\n          });\n        case 8:\n          _context5.next = 10;\n          return Address.updateOne({\n            _id: req.params.id,\n            userId: _id\n          }, {\n            "default": true\n          }).then(function () {\n            Response(res, 200, config.success_message, "Address Changes as default", null);\n          });\n        case 10:\n          _context5.next = 15;\n          break;\n        case 12:\n          _context5.prev = 12;\n          _context5.t0 = _context5["catch"](0);\n          Response(res, 400, config.error_message, (_error$message5 = _context5.t0 === null || _context5.t0 === void 0 ? void 0 : _context5.t0.message) !== null && _error$message5 !== void 0 ? _error$message5 : _context5.t0, null);\n        case 15:\n        case "end":\n          return _context5.stop();\n      }\n    }, _callee5, null, [[0, 12]]);\n  }));\n  return function updateDefaultAddress(_x9, _x10) {\n    return _ref5.apply(this, arguments);\n  };\n}();\nmodule.exports = {\n  listAddress: listAddress,\n  createAddress: createAddress,\n  updateAddress: updateAddress,\n  removeAddress: removeAddress,\n  updateDefaultAddress: updateDefaultAddress\n};\n\n//# sourceURL=webpack://profitcart-nodejs/./User/controllers/addressController.js?')},"./User/controllers/cartController.js":(module,__unused_webpack_exports,__webpack_require__)=>{eval('function _typeof(o) { "@babel/helpers - typeof"; return _typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && "function" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? "symbol" : typeof o; }, _typeof(o); }\nfunction _regeneratorRuntime() { "use strict"; /*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */ _regeneratorRuntime = function _regeneratorRuntime() { return e; }; var t, e = {}, r = Object.prototype, n = r.hasOwnProperty, o = Object.defineProperty || function (t, e, r) { t[e] = r.value; }, i = "function" == typeof Symbol ? Symbol : {}, a = i.iterator || "@@iterator", c = i.asyncIterator || "@@asyncIterator", u = i.toStringTag || "@@toStringTag"; function define(t, e, r) { return Object.defineProperty(t, e, { value: r, enumerable: !0, configurable: !0, writable: !0 }), t[e]; } try { define({}, ""); } catch (t) { define = function define(t, e, r) { return t[e] = r; }; } function wrap(t, e, r, n) { var i = e && e.prototype instanceof Generator ? e : Generator, a = Object.create(i.prototype), c = new Context(n || []); return o(a, "_invoke", { value: makeInvokeMethod(t, r, c) }), a; } function tryCatch(t, e, r) { try { return { type: "normal", arg: t.call(e, r) }; } catch (t) { return { type: "throw", arg: t }; } } e.wrap = wrap; var h = "suspendedStart", l = "suspendedYield", f = "executing", s = "completed", y = {}; function Generator() {} function GeneratorFunction() {} function GeneratorFunctionPrototype() {} var p = {}; define(p, a, function () { return this; }); var d = Object.getPrototypeOf, v = d && d(d(values([]))); v && v !== r && n.call(v, a) && (p = v); var g = GeneratorFunctionPrototype.prototype = Generator.prototype = Object.create(p); function defineIteratorMethods(t) { ["next", "throw", "return"].forEach(function (e) { define(t, e, function (t) { return this._invoke(e, t); }); }); } function AsyncIterator(t, e) { function invoke(r, o, i, a) { var c = tryCatch(t[r], t, o); if ("throw" !== c.type) { var u = c.arg, h = u.value; return h && "object" == _typeof(h) && n.call(h, "__await") ? e.resolve(h.__await).then(function (t) { invoke("next", t, i, a); }, function (t) { invoke("throw", t, i, a); }) : e.resolve(h).then(function (t) { u.value = t, i(u); }, function (t) { return invoke("throw", t, i, a); }); } a(c.arg); } var r; o(this, "_invoke", { value: function value(t, n) { function callInvokeWithMethodAndArg() { return new e(function (e, r) { invoke(t, n, e, r); }); } return r = r ? r.then(callInvokeWithMethodAndArg, callInvokeWithMethodAndArg) : callInvokeWithMethodAndArg(); } }); } function makeInvokeMethod(e, r, n) { var o = h; return function (i, a) { if (o === f) throw Error("Generator is already running"); if (o === s) { if ("throw" === i) throw a; return { value: t, done: !0 }; } for (n.method = i, n.arg = a;;) { var c = n.delegate; if (c) { var u = maybeInvokeDelegate(c, n); if (u) { if (u === y) continue; return u; } } if ("next" === n.method) n.sent = n._sent = n.arg;else if ("throw" === n.method) { if (o === h) throw o = s, n.arg; n.dispatchException(n.arg); } else "return" === n.method && n.abrupt("return", n.arg); o = f; var p = tryCatch(e, r, n); if ("normal" === p.type) { if (o = n.done ? s : l, p.arg === y) continue; return { value: p.arg, done: n.done }; } "throw" === p.type && (o = s, n.method = "throw", n.arg = p.arg); } }; } function maybeInvokeDelegate(e, r) { var n = r.method, o = e.iterator[n]; if (o === t) return r.delegate = null, "throw" === n && e.iterator["return"] && (r.method = "return", r.arg = t, maybeInvokeDelegate(e, r), "throw" === r.method) || "return" !== n && (r.method = "throw", r.arg = new TypeError("The iterator does not provide a \'" + n + "\' method")), y; var i = tryCatch(o, e.iterator, r.arg); if ("throw" === i.type) return r.method = "throw", r.arg = i.arg, r.delegate = null, y; var a = i.arg; return a ? a.done ? (r[e.resultName] = a.value, r.next = e.nextLoc, "return" !== r.method && (r.method = "next", r.arg = t), r.delegate = null, y) : a : (r.method = "throw", r.arg = new TypeError("iterator result is not an object"), r.delegate = null, y); } function pushTryEntry(t) { var e = { tryLoc: t[0] }; 1 in t && (e.catchLoc = t[1]), 2 in t && (e.finallyLoc = t[2], e.afterLoc = t[3]), this.tryEntries.push(e); } function resetTryEntry(t) { var e = t.completion || {}; e.type = "normal", delete e.arg, t.completion = e; } function Context(t) { this.tryEntries = [{ tryLoc: "root" }], t.forEach(pushTryEntry, this), this.reset(!0); } function values(e) { if (e || "" === e) { var r = e[a]; if (r) return r.call(e); if ("function" == typeof e.next) return e; if (!isNaN(e.length)) { var o = -1, i = function next() { for (; ++o < e.length;) if (n.call(e, o)) return next.value = e[o], next.done = !1, next; return next.value = t, next.done = !0, next; }; return i.next = i; } } throw new TypeError(_typeof(e) + " is not iterable"); } return GeneratorFunction.prototype = GeneratorFunctionPrototype, o(g, "constructor", { value: GeneratorFunctionPrototype, configurable: !0 }), o(GeneratorFunctionPrototype, "constructor", { value: GeneratorFunction, configurable: !0 }), GeneratorFunction.displayName = define(GeneratorFunctionPrototype, u, "GeneratorFunction"), e.isGeneratorFunction = function (t) { var e = "function" == typeof t && t.constructor; return !!e && (e === GeneratorFunction || "GeneratorFunction" === (e.displayName || e.name)); }, e.mark = function (t) { return Object.setPrototypeOf ? Object.setPrototypeOf(t, GeneratorFunctionPrototype) : (t.__proto__ = GeneratorFunctionPrototype, define(t, u, "GeneratorFunction")), t.prototype = Object.create(g), t; }, e.awrap = function (t) { return { __await: t }; }, defineIteratorMethods(AsyncIterator.prototype), define(AsyncIterator.prototype, c, function () { return this; }), e.AsyncIterator = AsyncIterator, e.async = function (t, r, n, o, i) { void 0 === i && (i = Promise); var a = new AsyncIterator(wrap(t, r, n, o), i); return e.isGeneratorFunction(r) ? a : a.next().then(function (t) { return t.done ? t.value : a.next(); }); }, defineIteratorMethods(g), define(g, u, "Generator"), define(g, a, function () { return this; }), define(g, "toString", function () { return "[object Generator]"; }), e.keys = function (t) { var e = Object(t), r = []; for (var n in e) r.push(n); return r.reverse(), function next() { for (; r.length;) { var t = r.pop(); if (t in e) return next.value = t, next.done = !1, next; } return next.done = !0, next; }; }, e.values = values, Context.prototype = { constructor: Context, reset: function reset(e) { if (this.prev = 0, this.next = 0, this.sent = this._sent = t, this.done = !1, this.delegate = null, this.method = "next", this.arg = t, this.tryEntries.forEach(resetTryEntry), !e) for (var r in this) "t" === r.charAt(0) && n.call(this, r) && !isNaN(+r.slice(1)) && (this[r] = t); }, stop: function stop() { this.done = !0; var t = this.tryEntries[0].completion; if ("throw" === t.type) throw t.arg; return this.rval; }, dispatchException: function dispatchException(e) { if (this.done) throw e; var r = this; function handle(n, o) { return a.type = "throw", a.arg = e, r.next = n, o && (r.method = "next", r.arg = t), !!o; } for (var o = this.tryEntries.length - 1; o >= 0; --o) { var i = this.tryEntries[o], a = i.completion; if ("root" === i.tryLoc) return handle("end"); if (i.tryLoc <= this.prev) { var c = n.call(i, "catchLoc"), u = n.call(i, "finallyLoc"); if (c && u) { if (this.prev < i.catchLoc) return handle(i.catchLoc, !0); if (this.prev < i.finallyLoc) return handle(i.finallyLoc); } else if (c) { if (this.prev < i.catchLoc) return handle(i.catchLoc, !0); } else { if (!u) throw Error("try statement without catch or finally"); if (this.prev < i.finallyLoc) return handle(i.finallyLoc); } } } }, abrupt: function abrupt(t, e) { for (var r = this.tryEntries.length - 1; r >= 0; --r) { var o = this.tryEntries[r]; if (o.tryLoc <= this.prev && n.call(o, "finallyLoc") && this.prev < o.finallyLoc) { var i = o; break; } } i && ("break" === t || "continue" === t) && i.tryLoc <= e && e <= i.finallyLoc && (i = null); var a = i ? i.completion : {}; return a.type = t, a.arg = e, i ? (this.method = "next", this.next = i.finallyLoc, y) : this.complete(a); }, complete: function complete(t, e) { if ("throw" === t.type) throw t.arg; return "break" === t.type || "continue" === t.type ? this.next = t.arg : "return" === t.type ? (this.rval = this.arg = t.arg, this.method = "return", this.next = "end") : "normal" === t.type && e && (this.next = e), y; }, finish: function finish(t) { for (var e = this.tryEntries.length - 1; e >= 0; --e) { var r = this.tryEntries[e]; if (r.finallyLoc === t) return this.complete(r.completion, r.afterLoc), resetTryEntry(r), y; } }, "catch": function _catch(t) { for (var e = this.tryEntries.length - 1; e >= 0; --e) { var r = this.tryEntries[e]; if (r.tryLoc === t) { var n = r.completion; if ("throw" === n.type) { var o = n.arg; resetTryEntry(r); } return o; } } throw Error("illegal catch attempt"); }, delegateYield: function delegateYield(e, r, n) { return this.delegate = { iterator: values(e), resultName: r, nextLoc: n }, "next" === this.method && (this.arg = t), y; } }, e; }\nfunction asyncGeneratorStep(n, t, e, r, o, a, c) { try { var i = n[a](c), u = i.value; } catch (n) { return void e(n); } i.done ? t(u) : Promise.resolve(u).then(r, o); }\nfunction _asyncToGenerator(n) { return function () { var t = this, e = arguments; return new Promise(function (r, o) { var a = n.apply(t, e); function _next(n) { asyncGeneratorStep(a, r, o, _next, _throw, "next", n); } function _throw(n) { asyncGeneratorStep(a, r, o, _next, _throw, "throw", n); } _next(void 0); }); }; }\nvar _require = __webpack_require__(/*! ../../services/ResponseService */ "./services/ResponseService.js"),\n  Response = _require.Response;\nvar config = __webpack_require__(/*! ../../config.js */ "./config.js");\nvar Cart = __webpack_require__(/*! ../models/cartModel */ "./User/models/cartModel.js");\nvar Products = __webpack_require__(/*! ../models/productModel.js */ "./User/models/productModel.js");\nvar StripeOrders = __webpack_require__(/*! ../models/stripeOrdersModel.js */ "./User/models/stripeOrdersModel.js");\nvar listCart = /*#__PURE__*/function () {\n  var _ref = _asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(req, res) {\n    var _cartDetails$, _buylaterDetails$0$it, _req$query, page, size, skip, _id, cartDetails, buylaterDetails, _cartDetails$2, _cartDetails$3, _buylaterDetails$, _buylaterDetails$2, _cartDetails$4, data, cartTotalPage, cartDecimal, buylaterTotalPage, decimal, priceDetails, pricePromise, _error$message;\n    return _regeneratorRuntime().wrap(function _callee$(_context) {\n      while (1) switch (_context.prev = _context.next) {\n        case 0:\n          _context.prev = 0;\n          _req$query = req.query, page = _req$query.page, size = _req$query.size;\n          skip = (page - 1) * size;\n          _id = req.user._id;\n          _context.next = 6;\n          return Cart.find({\n            userId: _id,\n            \'items.later\': false\n          }).populate(\'userId\').populate(\'items.product\').skip(skip).limit(size).sort({\n            "items.createdAt": -1\n          });\n        case 6:\n          cartDetails = _context.sent;\n          _context.next = 9;\n          return Cart.find({\n            userId: _id,\n            \'items.later\': true\n          }).populate(\'userId\').populate(\'items.product\').skip(skip).limit(size).sort({\n            createdAt: -1\n          });\n        case 9:\n          buylaterDetails = _context.sent;\n          if (((_cartDetails$ = cartDetails[0]) === null || _cartDetails$ === void 0 || (_cartDetails$ = _cartDetails$.items) === null || _cartDetails$ === void 0 ? void 0 : _cartDetails$.length) <= 0 && ((_buylaterDetails$0$it = buylaterDetails[0].items) === null || _buylaterDetails$0$it === void 0 ? void 0 : _buylaterDetails$0$it.length) <= 0) {\n            Response(res, 200, config.success_message, "No data found", null);\n          } else {\n            data = {\n              cart: {\n                page: page,\n                size: size,\n                data: cartDetails,\n                totalPage: 1\n              },\n              buylater: {\n                page: page,\n                size: size,\n                data: buylaterDetails,\n                totalPage: 1\n              }\n            };\n            cartTotalPage = parseInt(((_cartDetails$2 = cartDetails[0]) === null || _cartDetails$2 === void 0 || (_cartDetails$2 = _cartDetails$2.items) === null || _cartDetails$2 === void 0 ? void 0 : _cartDetails$2.length) / 5);\n            cartDecimal = ((_cartDetails$3 = cartDetails[0]) === null || _cartDetails$3 === void 0 || (_cartDetails$3 = _cartDetails$3.items) === null || _cartDetails$3 === void 0 ? void 0 : _cartDetails$3.length) % 5;\n            if (cartDecimal > 0) {\n              cartTotalPage++;\n            }\n            data.cart.totalPage = data.cart.totalPage <= cartTotalPage ? cartTotalPage : data.cart.totalPage;\n            buylaterTotalPage = parseInt(((_buylaterDetails$ = buylaterDetails[0]) === null || _buylaterDetails$ === void 0 || (_buylaterDetails$ = _buylaterDetails$.items) === null || _buylaterDetails$ === void 0 ? void 0 : _buylaterDetails$.length) / 5);\n            decimal = ((_buylaterDetails$2 = buylaterDetails[0]) === null || _buylaterDetails$2 === void 0 || (_buylaterDetails$2 = _buylaterDetails$2.items) === null || _buylaterDetails$2 === void 0 ? void 0 : _buylaterDetails$2.length) % 5;\n            if (decimal > 0) {\n              buylaterTotalPage++;\n            }\n            priceDetails = [];\n            pricePromise = (_cartDetails$4 = cartDetails[0]) === null || _cartDetails$4 === void 0 ? void 0 : _cartDetails$4.items.map(function (item) {\n              var data = {};\n              if (!item.later) {\n                var _item$product, _item$product2, _item$product3;\n                data.id = item === null || item === void 0 || (_item$product = item.product) === null || _item$product === void 0 ? void 0 : _item$product._id;\n                data.quantity = item === null || item === void 0 ? void 0 : item.quantity;\n                var amount = item === null || item === void 0 || (_item$product2 = item.product) === null || _item$product2 === void 0 ? void 0 : _item$product2.selling_price.split(\',\').join("");\n                data.price = Number(amount);\n                data.title = item === null || item === void 0 || (_item$product3 = item.product) === null || _item$product3 === void 0 ? void 0 : _item$product3.title;\n                data.cartId = item === null || item === void 0 ? void 0 : item._id;\n                priceDetails.push(data);\n              }\n            });\n            data.cart.priceDetails = priceDetails;\n            data.buylater.totalPage = data.buylater.totalPage <= buylaterTotalPage ? buylaterTotalPage : data.buylater.totalPage;\n            Response(res, 200, config.success_message, null, data);\n          }\n          _context.next = 16;\n          break;\n        case 13:\n          _context.prev = 13;\n          _context.t0 = _context["catch"](0);\n          Response(res, 400, config.error_message, (_error$message = _context.t0 === null || _context.t0 === void 0 ? void 0 : _context.t0.message) !== null && _error$message !== void 0 ? _error$message : _context.t0, null);\n        case 16:\n        case "end":\n          return _context.stop();\n      }\n    }, _callee, null, [[0, 13]]);\n  }));\n  return function listCart(_x, _x2) {\n    return _ref.apply(this, arguments);\n  };\n}();\n\n// const listOfBuyLater= async(req, res)=>{\n//     try {\n//         const {page,size}=req.query;\n//         const {_id}=req.user;\n//         const skip=(page-1)*size;\n\n//         await Cart.find({userId:_id,\'items.later\':true}).populate(\'userId\').populate(\'items.product\').skip(skip).limit(size).then((cart)=>{\n//             const data={\n//                 page,\n//                 size,\n//                 totalLength:cart.length,\n//                 cart\n//             }\n//             Response(res,200,config.success_message,null,data)\n//         })\n//     } catch (error) {\n//         console.log(error);\n//         Response(res,400,config.error_message,error?.message ?? error,null)\n//     }\n// }\n\nvar addProduct = /*#__PURE__*/function () {\n  var _ref2 = _asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee4(req, res) {\n    var _req$body, productId, quantity, currency, _id, _req$body2, amount, actual_amount, totalDiscount, cartDetails, productDetails, product, _error$message2;\n    return _regeneratorRuntime().wrap(function _callee4$(_context4) {\n      while (1) switch (_context4.prev = _context4.next) {\n        case 0:\n          _context4.prev = 0;\n          _req$body = req.body, productId = _req$body.productId, quantity = _req$body.quantity, currency = _req$body.currency;\n          _id = req.user._id;\n          _req$body2 = req.body, amount = _req$body2.amount, actual_amount = _req$body2.actual_amount;\n          amount = amount.split(\',\').join("");\n          actual_amount = actual_amount.split(\',\').join("");\n          _context4.next = 8;\n          return Cart.findOne({\n            userId: _id\n          });\n        case 8:\n          cartDetails = _context4.sent;\n          _context4.next = 11;\n          return Products.findOne({\n            _id: productId\n          });\n        case 11:\n          productDetails = _context4.sent;\n          product = {\n            product: productId,\n            quantity: quantity\n          };\n          if (cartDetails !== null && cartDetails !== void 0 && cartDetails.totalAmount) {\n            amount = (cartDetails === null || cartDetails === void 0 ? void 0 : cartDetails.totalAmount) + parseInt(amount);\n          }\n          if (cartDetails !== null && cartDetails !== void 0 && cartDetails.totalActualAmount) {\n            actual_amount = (cartDetails === null || cartDetails === void 0 ? void 0 : cartDetails.totalActualAmount) + parseInt(actual_amount);\n          }\n          if (amount && actual_amount) {\n            totalDiscount = parseInt((actual_amount - amount) / actual_amount * 100);\n            totalDiscount = "".concat(totalDiscount, "% off");\n          }\n          if (!(productDetails.length != 0)) {\n            _context4.next = 26;\n            break;\n          }\n          if (cartDetails) {\n            _context4.next = 22;\n            break;\n          }\n          _context4.next = 20;\n          return Cart.create({\n            userId: _id,\n            items: [product],\n            totalAmount: amount,\n            totalActualAmount: actual_amount,\n            totalDiscount: totalDiscount,\n            currency: currency,\n            $push: {\n              productIds: productId\n            }\n          }).then(/*#__PURE__*/function () {\n            var _ref3 = _asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(result) {\n              return _regeneratorRuntime().wrap(function _callee2$(_context2) {\n                while (1) switch (_context2.prev = _context2.next) {\n                  case 0:\n                    Response(res, 200, config.success_message, "Product added to cart!", null);\n                  case 1:\n                  case "end":\n                    return _context2.stop();\n                }\n              }, _callee2);\n            }));\n            return function (_x5) {\n              return _ref3.apply(this, arguments);\n            };\n          }());\n        case 20:\n          _context4.next = 24;\n          break;\n        case 22:\n          _context4.next = 24;\n          return Cart.updateOne({\n            _id: cartDetails._id\n          }, {\n            $push: {\n              items: product,\n              productIds: productId\n            },\n            totalAmount: amount,\n            totalActualAmount: actual_amount,\n            totalDiscount: totalDiscount\n          }).then(/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee3() {\n            return _regeneratorRuntime().wrap(function _callee3$(_context3) {\n              while (1) switch (_context3.prev = _context3.next) {\n                case 0:\n                  Response(res, 200, config.success_message, "Product added to cart", null);\n                case 1:\n                case "end":\n                  return _context3.stop();\n              }\n            }, _callee3);\n          })))["catch"](function (err) {\n            return console.log(err);\n          });\n        case 24:\n          _context4.next = 27;\n          break;\n        case 26:\n          Response(res, 400, config.error_message, "Product doesn\'t exist!", null);\n        case 27:\n          _context4.next = 32;\n          break;\n        case 29:\n          _context4.prev = 29;\n          _context4.t0 = _context4["catch"](0);\n          Response(res, 400, config.error_message, (_error$message2 = _context4.t0 === null || _context4.t0 === void 0 ? void 0 : _context4.t0.message) !== null && _error$message2 !== void 0 ? _error$message2 : _context4.t0, null);\n        case 32:\n        case "end":\n          return _context4.stop();\n      }\n    }, _callee4, null, [[0, 29]]);\n  }));\n  return function addProduct(_x3, _x4) {\n    return _ref2.apply(this, arguments);\n  };\n}();\nvar removeProduct = /*#__PURE__*/function () {\n  var _ref5 = _asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee5(req, res) {\n    var _actual_amount, _req$body3, id, productId, _req$body4, amount, actual_amount, _id, cartDetails, totalDiscount, _error$message3;\n    return _regeneratorRuntime().wrap(function _callee5$(_context5) {\n      while (1) switch (_context5.prev = _context5.next) {\n        case 0:\n          _context5.prev = 0;\n          _req$body3 = req.body, id = _req$body3.id, productId = _req$body3.productId;\n          _req$body4 = req.body, amount = _req$body4.amount, actual_amount = _req$body4.actual_amount;\n          amount = amount.split(\',\').join("");\n          actual_amount = (_actual_amount = actual_amount) === null || _actual_amount === void 0 ? void 0 : _actual_amount.split(\',\').join("");\n          _id = req.user._id;\n          _context5.next = 8;\n          return Cart.findOne({\n            userId: _id\n          });\n        case 8:\n          cartDetails = _context5.sent;\n          amount = (cartDetails === null || cartDetails === void 0 ? void 0 : cartDetails.totalAmount) - parseInt(amount);\n          actual_amount = (cartDetails === null || cartDetails === void 0 ? void 0 : cartDetails.totalActualAmount) - parseInt(actual_amount);\n          totalDiscount = parseInt((actual_amount - amount) / actual_amount * 100);\n          totalDiscount = "".concat(totalDiscount, "% off");\n          _context5.next = 15;\n          return Cart.updateOne({\n            userId: _id\n          }, {\n            $pull: {\n              items: {\n                _id: id\n              },\n              productIds: productId\n            },\n            totalAmount: amount,\n            totalActualAmount: actual_amount,\n            totalDiscount: totalDiscount\n          }).then(function () {\n            Response(res, 200, config.success_message, "Product removed from cart", null);\n          });\n        case 15:\n          _context5.next = 20;\n          break;\n        case 17:\n          _context5.prev = 17;\n          _context5.t0 = _context5["catch"](0);\n          Response(res, 400, config.error_message, (_error$message3 = _context5.t0 === null || _context5.t0 === void 0 ? void 0 : _context5.t0.message) !== null && _error$message3 !== void 0 ? _error$message3 : _context5.t0, null);\n        case 20:\n        case "end":\n          return _context5.stop();\n      }\n    }, _callee5, null, [[0, 17]]);\n  }));\n  return function removeProduct(_x6, _x7) {\n    return _ref5.apply(this, arguments);\n  };\n}();\nvar removeOrderedProducts = /*#__PURE__*/function () {\n  var _ref6 = _asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee7(req, res) {\n    var _req$body5, products, type, stripeOrderId, _id, productData, stripeOrderedData, removePromise, _error$message4;\n    return _regeneratorRuntime().wrap(function _callee7$(_context7) {\n      while (1) switch (_context7.prev = _context7.next) {\n        case 0:\n          _context7.prev = 0;\n          _req$body5 = req.body, products = _req$body5.products, type = _req$body5.type, stripeOrderId = _req$body5.stripeOrderId;\n          _id = req.user._id;\n          productData = [];\n          _context7.next = 6;\n          return StripeOrders.findOne({\n            _id: stripeOrderId,\n            userId: _id\n          });\n        case 6:\n          stripeOrderedData = _context7.sent;\n          console.log(stripeOrderedData);\n          _context7.t0 = type;\n          _context7.next = _context7.t0 === "card" ? 11 : _context7.t0 === "cashondelivery" ? 13 : 15;\n          break;\n        case 11:\n          productData = stripeOrderedData === null || stripeOrderedData === void 0 ? void 0 : stripeOrderedData.cartProducts;\n          return _context7.abrupt("break", 15);\n        case 13:\n          productData = products;\n          return _context7.abrupt("break", 15);\n        case 15:\n          console.log(productData);\n          removePromise = productData.map(/*#__PURE__*/function () {\n            var _ref7 = _asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee6(item) {\n              var cartDetails, productDetails, amount, actual_amount, totalDiscount;\n              return _regeneratorRuntime().wrap(function _callee6$(_context6) {\n                while (1) switch (_context6.prev = _context6.next) {\n                  case 0:\n                    _context6.next = 2;\n                    return Cart.findOne({\n                      userId: _id\n                    });\n                  case 2:\n                    cartDetails = _context6.sent;\n                    _context6.next = 5;\n                    return Products.findOne({\n                      _id: item.id\n                    });\n                  case 5:\n                    productDetails = _context6.sent;\n                    amount = productDetails.selling_price.split(\',\').join("");\n                    actual_amount = productDetails.actual_price.split(\',\').join("");\n                    amount = (cartDetails === null || cartDetails === void 0 ? void 0 : cartDetails.totalAmount) - parseInt(amount);\n                    actual_amount = (cartDetails === null || cartDetails === void 0 ? void 0 : cartDetails.totalActualAmount) - parseInt(actual_amount);\n                    totalDiscount = parseInt((actual_amount - amount) / actual_amount * 100);\n                    totalDiscount = "".concat(totalDiscount, "% off");\n                    _context6.next = 14;\n                    return Cart.updateOne({\n                      userId: _id\n                    }, {\n                      $pull: {\n                        items: {\n                          _id: item === null || item === void 0 ? void 0 : item.cartId\n                        },\n                        productIds: item.id\n                      },\n                      totalAmount: amount,\n                      totalActualAmount: actual_amount,\n                      totalDiscount: totalDiscount\n                    });\n                  case 14:\n                  case "end":\n                    return _context6.stop();\n                }\n              }, _callee6);\n            }));\n            return function (_x10) {\n              return _ref7.apply(this, arguments);\n            };\n          }());\n          _context7.next = 19;\n          return Promise.all(removePromise).then(function () {\n            Response(res, 200, config.success_message, "Product removed from cart", null);\n          });\n        case 19:\n          _context7.next = 25;\n          break;\n        case 21:\n          _context7.prev = 21;\n          _context7.t1 = _context7["catch"](0);\n          console.log(_context7.t1);\n          Response(res, 400, config.error_message, (_error$message4 = _context7.t1 === null || _context7.t1 === void 0 ? void 0 : _context7.t1.message) !== null && _error$message4 !== void 0 ? _error$message4 : _context7.t1, null);\n        case 25:\n        case "end":\n          return _context7.stop();\n      }\n    }, _callee7, null, [[0, 21]]);\n  }));\n  return function removeOrderedProducts(_x8, _x9) {\n    return _ref6.apply(this, arguments);\n  };\n}();\nvar updateLater = /*#__PURE__*/function () {\n  var _ref8 = _asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee8(req, res) {\n    var _req$body6, id, type, _id, _req$body7, amount, actual_amount, cartDetails, totalDiscount, _error$message5;\n    return _regeneratorRuntime().wrap(function _callee8$(_context8) {\n      while (1) switch (_context8.prev = _context8.next) {\n        case 0:\n          _context8.prev = 0;\n          _req$body6 = req.body, id = _req$body6.id, type = _req$body6.type;\n          _id = req.user._id;\n          _req$body7 = req.body, amount = _req$body7.amount, actual_amount = _req$body7.actual_amount;\n          amount = amount.split(\',\').join("");\n          actual_amount = actual_amount.split(\',\').join("");\n          _context8.next = 8;\n          return Cart.findOne({\n            userId: _id\n          });\n        case 8:\n          cartDetails = _context8.sent;\n          _context8.t0 = type;\n          _context8.next = _context8.t0 === \'buylater\' ? 12 : _context8.t0 === \'cart\' ? 19 : 25;\n          break;\n        case 12:\n          amount = (cartDetails === null || cartDetails === void 0 ? void 0 : cartDetails.totalAmount) - parseInt(amount);\n          actual_amount = (cartDetails === null || cartDetails === void 0 ? void 0 : cartDetails.totalActualAmount) - parseInt(actual_amount);\n          totalDiscount = parseInt((actual_amount - amount) / actual_amount * 100);\n          totalDiscount = "".concat(totalDiscount, "% off");\n          _context8.next = 18;\n          return Cart.updateOne({\n            userId: _id,\n            "items._id": id\n          }, {\n            $set: {\n              "items.$.later": true,\n              totalAmount: amount,\n              totalActualAmount: actual_amount,\n              totalDiscount: totalDiscount\n            }\n          }).then(function () {\n            Response(res, 200, config.success_message, "Save for later updated", null);\n          });\n        case 18:\n          return _context8.abrupt("break", 25);\n        case 19:\n          amount = (cartDetails === null || cartDetails === void 0 ? void 0 : cartDetails.totalAmount) + parseInt(amount);\n          actual_amount = (cartDetails === null || cartDetails === void 0 ? void 0 : cartDetails.totalActualAmount) + parseInt(actual_amount);\n          totalDiscount = parseInt((actual_amount - amount) / actual_amount * 100);\n          totalDiscount = "".concat(totalDiscount, "% off");\n          _context8.next = 25;\n          return Cart.updateOne({\n            userId: _id,\n            "items._id": id\n          }, {\n            $set: {\n              "items.$.later": false,\n              totalAmount: amount,\n              totalActualAmount: actual_amount,\n              totalDiscount: totalDiscount\n            }\n          }).then(function () {\n            Response(res, 200, config.success_message, "Save for later updated", null);\n          });\n        case 25:\n          _context8.next = 30;\n          break;\n        case 27:\n          _context8.prev = 27;\n          _context8.t1 = _context8["catch"](0);\n          Response(res, 400, config.error_message, (_error$message5 = _context8.t1 === null || _context8.t1 === void 0 ? void 0 : _context8.t1.message) !== null && _error$message5 !== void 0 ? _error$message5 : _context8.t1, null);\n        case 30:\n        case "end":\n          return _context8.stop();\n      }\n    }, _callee8, null, [[0, 27]]);\n  }));\n  return function updateLater(_x11, _x12) {\n    return _ref8.apply(this, arguments);\n  };\n}();\nvar quantityUpdate = /*#__PURE__*/function () {\n  var _ref9 = _asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee9(req, res) {\n    var _req$body8, productId, quantity, type, _id, _req$body9, amount, actual_amount, cartDetails, totalDiscount, _error$message6;\n    return _regeneratorRuntime().wrap(function _callee9$(_context9) {\n      while (1) switch (_context9.prev = _context9.next) {\n        case 0:\n          _context9.prev = 0;\n          _req$body8 = req.body, productId = _req$body8.productId, quantity = _req$body8.quantity, type = _req$body8.type;\n          _id = req.user._id;\n          _req$body9 = req.body, amount = _req$body9.amount, actual_amount = _req$body9.actual_amount;\n          amount = amount.split(\',\').join("");\n          actual_amount = actual_amount.split(\',\').join("");\n          _context9.next = 8;\n          return Cart.findOne({\n            userId: _id\n          });\n        case 8:\n          cartDetails = _context9.sent;\n          _context9.t0 = type;\n          _context9.next = _context9.t0 === "add" ? 12 : _context9.t0 === "reduce" ? 19 : 26;\n          break;\n        case 12:\n          amount = (cartDetails === null || cartDetails === void 0 ? void 0 : cartDetails.totalAmount) + parseInt(amount);\n          actual_amount = (cartDetails === null || cartDetails === void 0 ? void 0 : cartDetails.totalActualAmount) + parseInt(actual_amount);\n          totalDiscount = parseInt((actual_amount - amount) / actual_amount * 100);\n          totalDiscount = "".concat(totalDiscount, "% off");\n          _context9.next = 18;\n          return Cart.updateOne({\n            userId: _id,\n            "items.product": productId\n          }, {\n            $set: {\n              "items.$.quantity": quantity,\n              totalAmount: amount,\n              totalActualAmount: actual_amount,\n              totalDiscount: totalDiscount\n            }\n          }).then(function () {\n            Response(res, 200, config.success_message, "Quantity count Updated", null);\n          });\n        case 18:\n          return _context9.abrupt("break", 27);\n        case 19:\n          amount = (cartDetails === null || cartDetails === void 0 ? void 0 : cartDetails.totalAmount) - parseInt(amount);\n          actual_amount = (cartDetails === null || cartDetails === void 0 ? void 0 : cartDetails.totalActualAmount) - parseInt(actual_amount);\n          totalDiscount = parseInt((actual_amount - amount) / actual_amount * 100);\n          totalDiscount = "".concat(totalDiscount, "% off");\n          _context9.next = 25;\n          return Cart.updateOne({\n            userId: _id,\n            "items.product": productId\n          }, {\n            $set: {\n              "items.$.quantity": quantity,\n              totalAmount: amount,\n              totalActualAmount: actual_amount,\n              totalDiscount: totalDiscount\n            }\n          }).then(function () {\n            Response(res, 200, config.success_message, "Quantity count Updated", null);\n          });\n        case 25:\n          return _context9.abrupt("break", 27);\n        case 26:\n          Response(res, 200, config.success_message, "Type not mentioned", null);\n        case 27:\n          _context9.next = 32;\n          break;\n        case 29:\n          _context9.prev = 29;\n          _context9.t1 = _context9["catch"](0);\n          Response(res, 400, config.error_message, (_error$message6 = _context9.t1 === null || _context9.t1 === void 0 ? void 0 : _context9.t1.message) !== null && _error$message6 !== void 0 ? _error$message6 : _context9.t1, null);\n        case 32:\n        case "end":\n          return _context9.stop();\n      }\n    }, _callee9, null, [[0, 29]]);\n  }));\n  return function quantityUpdate(_x13, _x14) {\n    return _ref9.apply(this, arguments);\n  };\n}();\nmodule.exports = {\n  listCart: listCart,\n  // listOfBuyLater,\n  addProduct: addProduct,\n  removeProduct: removeProduct,\n  updateLater: updateLater,\n  quantityUpdate: quantityUpdate,\n  removeOrderedProducts: removeOrderedProducts\n};\n\n//# sourceURL=webpack://profitcart-nodejs/./User/controllers/cartController.js?')},"./User/controllers/notificationController.js":(module,__unused_webpack_exports,__webpack_require__)=>{eval('function _typeof(o) { "@babel/helpers - typeof"; return _typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && "function" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? "symbol" : typeof o; }, _typeof(o); }\nfunction _regeneratorRuntime() { "use strict"; /*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */ _regeneratorRuntime = function _regeneratorRuntime() { return e; }; var t, e = {}, r = Object.prototype, n = r.hasOwnProperty, o = Object.defineProperty || function (t, e, r) { t[e] = r.value; }, i = "function" == typeof Symbol ? Symbol : {}, a = i.iterator || "@@iterator", c = i.asyncIterator || "@@asyncIterator", u = i.toStringTag || "@@toStringTag"; function define(t, e, r) { return Object.defineProperty(t, e, { value: r, enumerable: !0, configurable: !0, writable: !0 }), t[e]; } try { define({}, ""); } catch (t) { define = function define(t, e, r) { return t[e] = r; }; } function wrap(t, e, r, n) { var i = e && e.prototype instanceof Generator ? e : Generator, a = Object.create(i.prototype), c = new Context(n || []); return o(a, "_invoke", { value: makeInvokeMethod(t, r, c) }), a; } function tryCatch(t, e, r) { try { return { type: "normal", arg: t.call(e, r) }; } catch (t) { return { type: "throw", arg: t }; } } e.wrap = wrap; var h = "suspendedStart", l = "suspendedYield", f = "executing", s = "completed", y = {}; function Generator() {} function GeneratorFunction() {} function GeneratorFunctionPrototype() {} var p = {}; define(p, a, function () { return this; }); var d = Object.getPrototypeOf, v = d && d(d(values([]))); v && v !== r && n.call(v, a) && (p = v); var g = GeneratorFunctionPrototype.prototype = Generator.prototype = Object.create(p); function defineIteratorMethods(t) { ["next", "throw", "return"].forEach(function (e) { define(t, e, function (t) { return this._invoke(e, t); }); }); } function AsyncIterator(t, e) { function invoke(r, o, i, a) { var c = tryCatch(t[r], t, o); if ("throw" !== c.type) { var u = c.arg, h = u.value; return h && "object" == _typeof(h) && n.call(h, "__await") ? e.resolve(h.__await).then(function (t) { invoke("next", t, i, a); }, function (t) { invoke("throw", t, i, a); }) : e.resolve(h).then(function (t) { u.value = t, i(u); }, function (t) { return invoke("throw", t, i, a); }); } a(c.arg); } var r; o(this, "_invoke", { value: function value(t, n) { function callInvokeWithMethodAndArg() { return new e(function (e, r) { invoke(t, n, e, r); }); } return r = r ? r.then(callInvokeWithMethodAndArg, callInvokeWithMethodAndArg) : callInvokeWithMethodAndArg(); } }); } function makeInvokeMethod(e, r, n) { var o = h; return function (i, a) { if (o === f) throw Error("Generator is already running"); if (o === s) { if ("throw" === i) throw a; return { value: t, done: !0 }; } for (n.method = i, n.arg = a;;) { var c = n.delegate; if (c) { var u = maybeInvokeDelegate(c, n); if (u) { if (u === y) continue; return u; } } if ("next" === n.method) n.sent = n._sent = n.arg;else if ("throw" === n.method) { if (o === h) throw o = s, n.arg; n.dispatchException(n.arg); } else "return" === n.method && n.abrupt("return", n.arg); o = f; var p = tryCatch(e, r, n); if ("normal" === p.type) { if (o = n.done ? s : l, p.arg === y) continue; return { value: p.arg, done: n.done }; } "throw" === p.type && (o = s, n.method = "throw", n.arg = p.arg); } }; } function maybeInvokeDelegate(e, r) { var n = r.method, o = e.iterator[n]; if (o === t) return r.delegate = null, "throw" === n && e.iterator["return"] && (r.method = "return", r.arg = t, maybeInvokeDelegate(e, r), "throw" === r.method) || "return" !== n && (r.method = "throw", r.arg = new TypeError("The iterator does not provide a \'" + n + "\' method")), y; var i = tryCatch(o, e.iterator, r.arg); if ("throw" === i.type) return r.method = "throw", r.arg = i.arg, r.delegate = null, y; var a = i.arg; return a ? a.done ? (r[e.resultName] = a.value, r.next = e.nextLoc, "return" !== r.method && (r.method = "next", r.arg = t), r.delegate = null, y) : a : (r.method = "throw", r.arg = new TypeError("iterator result is not an object"), r.delegate = null, y); } function pushTryEntry(t) { var e = { tryLoc: t[0] }; 1 in t && (e.catchLoc = t[1]), 2 in t && (e.finallyLoc = t[2], e.afterLoc = t[3]), this.tryEntries.push(e); } function resetTryEntry(t) { var e = t.completion || {}; e.type = "normal", delete e.arg, t.completion = e; } function Context(t) { this.tryEntries = [{ tryLoc: "root" }], t.forEach(pushTryEntry, this), this.reset(!0); } function values(e) { if (e || "" === e) { var r = e[a]; if (r) return r.call(e); if ("function" == typeof e.next) return e; if (!isNaN(e.length)) { var o = -1, i = function next() { for (; ++o < e.length;) if (n.call(e, o)) return next.value = e[o], next.done = !1, next; return next.value = t, next.done = !0, next; }; return i.next = i; } } throw new TypeError(_typeof(e) + " is not iterable"); } return GeneratorFunction.prototype = GeneratorFunctionPrototype, o(g, "constructor", { value: GeneratorFunctionPrototype, configurable: !0 }), o(GeneratorFunctionPrototype, "constructor", { value: GeneratorFunction, configurable: !0 }), GeneratorFunction.displayName = define(GeneratorFunctionPrototype, u, "GeneratorFunction"), e.isGeneratorFunction = function (t) { var e = "function" == typeof t && t.constructor; return !!e && (e === GeneratorFunction || "GeneratorFunction" === (e.displayName || e.name)); }, e.mark = function (t) { return Object.setPrototypeOf ? Object.setPrototypeOf(t, GeneratorFunctionPrototype) : (t.__proto__ = GeneratorFunctionPrototype, define(t, u, "GeneratorFunction")), t.prototype = Object.create(g), t; }, e.awrap = function (t) { return { __await: t }; }, defineIteratorMethods(AsyncIterator.prototype), define(AsyncIterator.prototype, c, function () { return this; }), e.AsyncIterator = AsyncIterator, e.async = function (t, r, n, o, i) { void 0 === i && (i = Promise); var a = new AsyncIterator(wrap(t, r, n, o), i); return e.isGeneratorFunction(r) ? a : a.next().then(function (t) { return t.done ? t.value : a.next(); }); }, defineIteratorMethods(g), define(g, u, "Generator"), define(g, a, function () { return this; }), define(g, "toString", function () { return "[object Generator]"; }), e.keys = function (t) { var e = Object(t), r = []; for (var n in e) r.push(n); return r.reverse(), function next() { for (; r.length;) { var t = r.pop(); if (t in e) return next.value = t, next.done = !1, next; } return next.done = !0, next; }; }, e.values = values, Context.prototype = { constructor: Context, reset: function reset(e) { if (this.prev = 0, this.next = 0, this.sent = this._sent = t, this.done = !1, this.delegate = null, this.method = "next", this.arg = t, this.tryEntries.forEach(resetTryEntry), !e) for (var r in this) "t" === r.charAt(0) && n.call(this, r) && !isNaN(+r.slice(1)) && (this[r] = t); }, stop: function stop() { this.done = !0; var t = this.tryEntries[0].completion; if ("throw" === t.type) throw t.arg; return this.rval; }, dispatchException: function dispatchException(e) { if (this.done) throw e; var r = this; function handle(n, o) { return a.type = "throw", a.arg = e, r.next = n, o && (r.method = "next", r.arg = t), !!o; } for (var o = this.tryEntries.length - 1; o >= 0; --o) { var i = this.tryEntries[o], a = i.completion; if ("root" === i.tryLoc) return handle("end"); if (i.tryLoc <= this.prev) { var c = n.call(i, "catchLoc"), u = n.call(i, "finallyLoc"); if (c && u) { if (this.prev < i.catchLoc) return handle(i.catchLoc, !0); if (this.prev < i.finallyLoc) return handle(i.finallyLoc); } else if (c) { if (this.prev < i.catchLoc) return handle(i.catchLoc, !0); } else { if (!u) throw Error("try statement without catch or finally"); if (this.prev < i.finallyLoc) return handle(i.finallyLoc); } } } }, abrupt: function abrupt(t, e) { for (var r = this.tryEntries.length - 1; r >= 0; --r) { var o = this.tryEntries[r]; if (o.tryLoc <= this.prev && n.call(o, "finallyLoc") && this.prev < o.finallyLoc) { var i = o; break; } } i && ("break" === t || "continue" === t) && i.tryLoc <= e && e <= i.finallyLoc && (i = null); var a = i ? i.completion : {}; return a.type = t, a.arg = e, i ? (this.method = "next", this.next = i.finallyLoc, y) : this.complete(a); }, complete: function complete(t, e) { if ("throw" === t.type) throw t.arg; return "break" === t.type || "continue" === t.type ? this.next = t.arg : "return" === t.type ? (this.rval = this.arg = t.arg, this.method = "return", this.next = "end") : "normal" === t.type && e && (this.next = e), y; }, finish: function finish(t) { for (var e = this.tryEntries.length - 1; e >= 0; --e) { var r = this.tryEntries[e]; if (r.finallyLoc === t) return this.complete(r.completion, r.afterLoc), resetTryEntry(r), y; } }, "catch": function _catch(t) { for (var e = this.tryEntries.length - 1; e >= 0; --e) { var r = this.tryEntries[e]; if (r.tryLoc === t) { var n = r.completion; if ("throw" === n.type) { var o = n.arg; resetTryEntry(r); } return o; } } throw Error("illegal catch attempt"); }, delegateYield: function delegateYield(e, r, n) { return this.delegate = { iterator: values(e), resultName: r, nextLoc: n }, "next" === this.method && (this.arg = t), y; } }, e; }\nfunction asyncGeneratorStep(n, t, e, r, o, a, c) { try { var i = n[a](c), u = i.value; } catch (n) { return void e(n); } i.done ? t(u) : Promise.resolve(u).then(r, o); }\nfunction _asyncToGenerator(n) { return function () { var t = this, e = arguments; return new Promise(function (r, o) { var a = n.apply(t, e); function _next(n) { asyncGeneratorStep(a, r, o, _next, _throw, "next", n); } function _throw(n) { asyncGeneratorStep(a, r, o, _next, _throw, "throw", n); } _next(void 0); }); }; }\nvar _require = __webpack_require__(/*! ../../services/ResponseService.js */ "./services/ResponseService.js"),\n  Response = _require.Response;\nvar config = __webpack_require__(/*! ../../config.js */ "./config.js");\nvar Notification = __webpack_require__(/*! ../models/notificationModel.js */ "./User/models/notificationModel.js");\nvar getNotification = /*#__PURE__*/function () {\n  var _ref = _asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(req, res) {\n    var _req$query, page, size, type, _id, skip, data, unread, all, _error$message;\n    return _regeneratorRuntime().wrap(function _callee$(_context) {\n      while (1) switch (_context.prev = _context.next) {\n        case 0:\n          _context.prev = 0;\n          _req$query = req.query, page = _req$query.page, size = _req$query.size, type = _req$query.type;\n          _id = req.user._id;\n          skip = (page - 1) * size;\n          data = {\n            page: page,\n            size: size\n          };\n          _context.t0 = type;\n          _context.next = _context.t0 === "unread" ? 8 : _context.t0 === "all" ? 13 : 18;\n          break;\n        case 8:\n          _context.next = 10;\n          return Notification.find({\n            userId: _id,\n            read: false,\n            status: 1\n          }).populate("productId").skip(skip).limit(size).sort({\n            createdAt: -1\n          });\n        case 10:\n          unread = _context.sent;\n          if (unread.length != 0) {\n            data.totalLength = unread.length;\n            data.notification = unread;\n          }\n          return _context.abrupt("break", 19);\n        case 13:\n          _context.next = 15;\n          return Notification.find({\n            userId: _id,\n            read: false\n          }).skip(skip).limit(size).sort({\n            createdAt: -1\n          });\n        case 15:\n          all = _context.sent;\n          if (all.length != 0) {\n            data.totalLength = all.length;\n            data.notification = all;\n          }\n          return _context.abrupt("break", 19);\n        case 18:\n          return _context.abrupt("break", 19);\n        case 19:\n          if ((data === null || data === void 0 ? void 0 : data.totalLength) == 0 || (data === null || data === void 0 ? void 0 : data.totalLength) == null) {\n            Response(res, 200, config.success_message, "No data found", null);\n          } else {\n            Response(res, 200, config.success_message, null, data);\n          }\n          _context.next = 25;\n          break;\n        case 22:\n          _context.prev = 22;\n          _context.t1 = _context["catch"](0);\n          Response(res, 400, config.error_message, (_error$message = _context.t1 === null || _context.t1 === void 0 ? void 0 : _context.t1.message) !== null && _error$message !== void 0 ? _error$message : _context.t1, null);\n        case 25:\n        case "end":\n          return _context.stop();\n      }\n    }, _callee, null, [[0, 22]]);\n  }));\n  return function getNotification(_x, _x2) {\n    return _ref.apply(this, arguments);\n  };\n}();\nvar createNotification = /*#__PURE__*/function () {\n  var _ref2 = _asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(req, res) {\n    var _req$body, type, message, _id, _error$message2;\n    return _regeneratorRuntime().wrap(function _callee2$(_context2) {\n      while (1) switch (_context2.prev = _context2.next) {\n        case 0:\n          _context2.prev = 0;\n          _req$body = req.body, type = _req$body.type, message = _req$body.message;\n          _id = req.user._id;\n          _context2.next = 5;\n          return Notification.create({\n            userId: _id,\n            type: type,\n            message: message\n          }).then(function () {\n            Response(res, 200, config.success_message, "Notification created successfully", null);\n          });\n        case 5:\n          _context2.next = 10;\n          break;\n        case 7:\n          _context2.prev = 7;\n          _context2.t0 = _context2["catch"](0);\n          Response(res, 400, config.error_message, (_error$message2 = _context2.t0 === null || _context2.t0 === void 0 ? void 0 : _context2.t0.message) !== null && _error$message2 !== void 0 ? _error$message2 : _context2.t0, null);\n        case 10:\n        case "end":\n          return _context2.stop();\n      }\n    }, _callee2, null, [[0, 7]]);\n  }));\n  return function createNotification(_x3, _x4) {\n    return _ref2.apply(this, arguments);\n  };\n}();\nvar updateRead = /*#__PURE__*/function () {\n  var _ref3 = _asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee4(req, res) {\n    var flag, id, _id, _error$message3;\n    return _regeneratorRuntime().wrap(function _callee4$(_context4) {\n      while (1) switch (_context4.prev = _context4.next) {\n        case 0:\n          flag = true;\n          _context4.prev = 1;\n          id = req.body.id;\n          _id = req.user._id;\n          _context4.next = 6;\n          return Promise.all(id.map(/*#__PURE__*/function () {\n            var _ref4 = _asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee3(id) {\n              var notificationDetails;\n              return _regeneratorRuntime().wrap(function _callee3$(_context3) {\n                while (1) switch (_context3.prev = _context3.next) {\n                  case 0:\n                    _context3.next = 2;\n                    return Notification.find({\n                      _id: id\n                    });\n                  case 2:\n                    notificationDetails = _context3.sent;\n                    if (notificationDetails.length == 0 || (notificationDetails === null || notificationDetails === void 0 ? void 0 : notificationDetails.length) == null) {\n                      flag = false;\n                      Response(res, 400, config.error_message, "Notificaiton not exist", null);\n                    }\n                  case 4:\n                  case "end":\n                    return _context3.stop();\n                }\n              }, _callee3);\n            }));\n            return function (_x7) {\n              return _ref4.apply(this, arguments);\n            };\n          }()));\n        case 6:\n          _context4.next = 8;\n          return Notification.updateMany({\n            _id: id,\n            userId: _id\n          }, {\n            $set: {\n              read: true\n            }\n          }).then(function () {\n            Response(res, 200, config.success_message, "Read updated successfully", null);\n          });\n        case 8:\n          _context4.next = 13;\n          break;\n        case 10:\n          _context4.prev = 10;\n          _context4.t0 = _context4["catch"](1);\n          flag ? Response(res, 200, config.error_message, (_error$message3 = _context4.t0 === null || _context4.t0 === void 0 ? void 0 : _context4.t0.message) !== null && _error$message3 !== void 0 ? _error$message3 : _context4.t0, null) : null;\n        case 13:\n        case "end":\n          return _context4.stop();\n      }\n    }, _callee4, null, [[1, 10]]);\n  }));\n  return function updateRead(_x5, _x6) {\n    return _ref3.apply(this, arguments);\n  };\n}();\nvar removeNotification = /*#__PURE__*/function () {\n  var _ref5 = _asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee6(req, res) {\n    var flag, id, _id, _error$message4;\n    return _regeneratorRuntime().wrap(function _callee6$(_context6) {\n      while (1) switch (_context6.prev = _context6.next) {\n        case 0:\n          flag = true;\n          _context6.prev = 1;\n          id = req.body.id;\n          _id = req.user._id;\n          _context6.next = 6;\n          return Promise.all(id.map(/*#__PURE__*/function () {\n            var _ref6 = _asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee5(id) {\n              var notificationDetails;\n              return _regeneratorRuntime().wrap(function _callee5$(_context5) {\n                while (1) switch (_context5.prev = _context5.next) {\n                  case 0:\n                    _context5.next = 2;\n                    return Notification.find({\n                      _id: id\n                    });\n                  case 2:\n                    notificationDetails = _context5.sent;\n                    if ((notificationDetails === null || notificationDetails === void 0 ? void 0 : notificationDetails.length) == 0 || (notificationDetails === null || notificationDetails === void 0 ? void 0 : notificationDetails.length) == null) {\n                      flag = false;\n                      Response(res, 400, config.error_message, "Notification doesn\'t exist", null);\n                    }\n                  case 4:\n                  case "end":\n                    return _context5.stop();\n                }\n              }, _callee5);\n            }));\n            return function (_x10) {\n              return _ref6.apply(this, arguments);\n            };\n          }()));\n        case 6:\n          _context6.next = 8;\n          return Notification.updateMany({\n            _id: id,\n            userId: _id\n          }, {\n            $set: {\n              status: 0\n            }\n          }).then(function () {\n            Response(res, 200, config.success_message, "Message deleted successfully", null);\n          });\n        case 8:\n          _context6.next = 13;\n          break;\n        case 10:\n          _context6.prev = 10;\n          _context6.t0 = _context6["catch"](1);\n          flag ? Response(res, 200, config.error_message, (_error$message4 = _context6.t0 === null || _context6.t0 === void 0 ? void 0 : _context6.t0.message) !== null && _error$message4 !== void 0 ? _error$message4 : _context6.t0, null) : null;\n        case 13:\n        case "end":\n          return _context6.stop();\n      }\n    }, _callee6, null, [[1, 10]]);\n  }));\n  return function removeNotification(_x8, _x9) {\n    return _ref5.apply(this, arguments);\n  };\n}();\nmodule.exports = {\n  getNotification: getNotification,\n  createNotification: createNotification,\n  updateRead: updateRead,\n  removeNotification: removeNotification\n};\n\n//# sourceURL=webpack://profitcart-nodejs/./User/controllers/notificationController.js?')},"./User/controllers/orderController.js":(module,__unused_webpack_exports,__webpack_require__)=>{eval('function _typeof(o) { "@babel/helpers - typeof"; return _typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && "function" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? "symbol" : typeof o; }, _typeof(o); }\nfunction _regeneratorRuntime() { "use strict"; /*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */ _regeneratorRuntime = function _regeneratorRuntime() { return e; }; var t, e = {}, r = Object.prototype, n = r.hasOwnProperty, o = Object.defineProperty || function (t, e, r) { t[e] = r.value; }, i = "function" == typeof Symbol ? Symbol : {}, a = i.iterator || "@@iterator", c = i.asyncIterator || "@@asyncIterator", u = i.toStringTag || "@@toStringTag"; function define(t, e, r) { return Object.defineProperty(t, e, { value: r, enumerable: !0, configurable: !0, writable: !0 }), t[e]; } try { define({}, ""); } catch (t) { define = function define(t, e, r) { return t[e] = r; }; } function wrap(t, e, r, n) { var i = e && e.prototype instanceof Generator ? e : Generator, a = Object.create(i.prototype), c = new Context(n || []); return o(a, "_invoke", { value: makeInvokeMethod(t, r, c) }), a; } function tryCatch(t, e, r) { try { return { type: "normal", arg: t.call(e, r) }; } catch (t) { return { type: "throw", arg: t }; } } e.wrap = wrap; var h = "suspendedStart", l = "suspendedYield", f = "executing", s = "completed", y = {}; function Generator() {} function GeneratorFunction() {} function GeneratorFunctionPrototype() {} var p = {}; define(p, a, function () { return this; }); var d = Object.getPrototypeOf, v = d && d(d(values([]))); v && v !== r && n.call(v, a) && (p = v); var g = GeneratorFunctionPrototype.prototype = Generator.prototype = Object.create(p); function defineIteratorMethods(t) { ["next", "throw", "return"].forEach(function (e) { define(t, e, function (t) { return this._invoke(e, t); }); }); } function AsyncIterator(t, e) { function invoke(r, o, i, a) { var c = tryCatch(t[r], t, o); if ("throw" !== c.type) { var u = c.arg, h = u.value; return h && "object" == _typeof(h) && n.call(h, "__await") ? e.resolve(h.__await).then(function (t) { invoke("next", t, i, a); }, function (t) { invoke("throw", t, i, a); }) : e.resolve(h).then(function (t) { u.value = t, i(u); }, function (t) { return invoke("throw", t, i, a); }); } a(c.arg); } var r; o(this, "_invoke", { value: function value(t, n) { function callInvokeWithMethodAndArg() { return new e(function (e, r) { invoke(t, n, e, r); }); } return r = r ? r.then(callInvokeWithMethodAndArg, callInvokeWithMethodAndArg) : callInvokeWithMethodAndArg(); } }); } function makeInvokeMethod(e, r, n) { var o = h; return function (i, a) { if (o === f) throw Error("Generator is already running"); if (o === s) { if ("throw" === i) throw a; return { value: t, done: !0 }; } for (n.method = i, n.arg = a;;) { var c = n.delegate; if (c) { var u = maybeInvokeDelegate(c, n); if (u) { if (u === y) continue; return u; } } if ("next" === n.method) n.sent = n._sent = n.arg;else if ("throw" === n.method) { if (o === h) throw o = s, n.arg; n.dispatchException(n.arg); } else "return" === n.method && n.abrupt("return", n.arg); o = f; var p = tryCatch(e, r, n); if ("normal" === p.type) { if (o = n.done ? s : l, p.arg === y) continue; return { value: p.arg, done: n.done }; } "throw" === p.type && (o = s, n.method = "throw", n.arg = p.arg); } }; } function maybeInvokeDelegate(e, r) { var n = r.method, o = e.iterator[n]; if (o === t) return r.delegate = null, "throw" === n && e.iterator["return"] && (r.method = "return", r.arg = t, maybeInvokeDelegate(e, r), "throw" === r.method) || "return" !== n && (r.method = "throw", r.arg = new TypeError("The iterator does not provide a \'" + n + "\' method")), y; var i = tryCatch(o, e.iterator, r.arg); if ("throw" === i.type) return r.method = "throw", r.arg = i.arg, r.delegate = null, y; var a = i.arg; return a ? a.done ? (r[e.resultName] = a.value, r.next = e.nextLoc, "return" !== r.method && (r.method = "next", r.arg = t), r.delegate = null, y) : a : (r.method = "throw", r.arg = new TypeError("iterator result is not an object"), r.delegate = null, y); } function pushTryEntry(t) { var e = { tryLoc: t[0] }; 1 in t && (e.catchLoc = t[1]), 2 in t && (e.finallyLoc = t[2], e.afterLoc = t[3]), this.tryEntries.push(e); } function resetTryEntry(t) { var e = t.completion || {}; e.type = "normal", delete e.arg, t.completion = e; } function Context(t) { this.tryEntries = [{ tryLoc: "root" }], t.forEach(pushTryEntry, this), this.reset(!0); } function values(e) { if (e || "" === e) { var r = e[a]; if (r) return r.call(e); if ("function" == typeof e.next) return e; if (!isNaN(e.length)) { var o = -1, i = function next() { for (; ++o < e.length;) if (n.call(e, o)) return next.value = e[o], next.done = !1, next; return next.value = t, next.done = !0, next; }; return i.next = i; } } throw new TypeError(_typeof(e) + " is not iterable"); } return GeneratorFunction.prototype = GeneratorFunctionPrototype, o(g, "constructor", { value: GeneratorFunctionPrototype, configurable: !0 }), o(GeneratorFunctionPrototype, "constructor", { value: GeneratorFunction, configurable: !0 }), GeneratorFunction.displayName = define(GeneratorFunctionPrototype, u, "GeneratorFunction"), e.isGeneratorFunction = function (t) { var e = "function" == typeof t && t.constructor; return !!e && (e === GeneratorFunction || "GeneratorFunction" === (e.displayName || e.name)); }, e.mark = function (t) { return Object.setPrototypeOf ? Object.setPrototypeOf(t, GeneratorFunctionPrototype) : (t.__proto__ = GeneratorFunctionPrototype, define(t, u, "GeneratorFunction")), t.prototype = Object.create(g), t; }, e.awrap = function (t) { return { __await: t }; }, defineIteratorMethods(AsyncIterator.prototype), define(AsyncIterator.prototype, c, function () { return this; }), e.AsyncIterator = AsyncIterator, e.async = function (t, r, n, o, i) { void 0 === i && (i = Promise); var a = new AsyncIterator(wrap(t, r, n, o), i); return e.isGeneratorFunction(r) ? a : a.next().then(function (t) { return t.done ? t.value : a.next(); }); }, defineIteratorMethods(g), define(g, u, "Generator"), define(g, a, function () { return this; }), define(g, "toString", function () { return "[object Generator]"; }), e.keys = function (t) { var e = Object(t), r = []; for (var n in e) r.push(n); return r.reverse(), function next() { for (; r.length;) { var t = r.pop(); if (t in e) return next.value = t, next.done = !1, next; } return next.done = !0, next; }; }, e.values = values, Context.prototype = { constructor: Context, reset: function reset(e) { if (this.prev = 0, this.next = 0, this.sent = this._sent = t, this.done = !1, this.delegate = null, this.method = "next", this.arg = t, this.tryEntries.forEach(resetTryEntry), !e) for (var r in this) "t" === r.charAt(0) && n.call(this, r) && !isNaN(+r.slice(1)) && (this[r] = t); }, stop: function stop() { this.done = !0; var t = this.tryEntries[0].completion; if ("throw" === t.type) throw t.arg; return this.rval; }, dispatchException: function dispatchException(e) { if (this.done) throw e; var r = this; function handle(n, o) { return a.type = "throw", a.arg = e, r.next = n, o && (r.method = "next", r.arg = t), !!o; } for (var o = this.tryEntries.length - 1; o >= 0; --o) { var i = this.tryEntries[o], a = i.completion; if ("root" === i.tryLoc) return handle("end"); if (i.tryLoc <= this.prev) { var c = n.call(i, "catchLoc"), u = n.call(i, "finallyLoc"); if (c && u) { if (this.prev < i.catchLoc) return handle(i.catchLoc, !0); if (this.prev < i.finallyLoc) return handle(i.finallyLoc); } else if (c) { if (this.prev < i.catchLoc) return handle(i.catchLoc, !0); } else { if (!u) throw Error("try statement without catch or finally"); if (this.prev < i.finallyLoc) return handle(i.finallyLoc); } } } }, abrupt: function abrupt(t, e) { for (var r = this.tryEntries.length - 1; r >= 0; --r) { var o = this.tryEntries[r]; if (o.tryLoc <= this.prev && n.call(o, "finallyLoc") && this.prev < o.finallyLoc) { var i = o; break; } } i && ("break" === t || "continue" === t) && i.tryLoc <= e && e <= i.finallyLoc && (i = null); var a = i ? i.completion : {}; return a.type = t, a.arg = e, i ? (this.method = "next", this.next = i.finallyLoc, y) : this.complete(a); }, complete: function complete(t, e) { if ("throw" === t.type) throw t.arg; return "break" === t.type || "continue" === t.type ? this.next = t.arg : "return" === t.type ? (this.rval = this.arg = t.arg, this.method = "return", this.next = "end") : "normal" === t.type && e && (this.next = e), y; }, finish: function finish(t) { for (var e = this.tryEntries.length - 1; e >= 0; --e) { var r = this.tryEntries[e]; if (r.finallyLoc === t) return this.complete(r.completion, r.afterLoc), resetTryEntry(r), y; } }, "catch": function _catch(t) { for (var e = this.tryEntries.length - 1; e >= 0; --e) { var r = this.tryEntries[e]; if (r.tryLoc === t) { var n = r.completion; if ("throw" === n.type) { var o = n.arg; resetTryEntry(r); } return o; } } throw Error("illegal catch attempt"); }, delegateYield: function delegateYield(e, r, n) { return this.delegate = { iterator: values(e), resultName: r, nextLoc: n }, "next" === this.method && (this.arg = t), y; } }, e; }\nfunction asyncGeneratorStep(n, t, e, r, o, a, c) { try { var i = n[a](c), u = i.value; } catch (n) { return void e(n); } i.done ? t(u) : Promise.resolve(u).then(r, o); }\nfunction _asyncToGenerator(n) { return function () { var t = this, e = arguments; return new Promise(function (r, o) { var a = n.apply(t, e); function _next(n) { asyncGeneratorStep(a, r, o, _next, _throw, "next", n); } function _throw(n) { asyncGeneratorStep(a, r, o, _next, _throw, "throw", n); } _next(void 0); }); }; }\nvar Order = __webpack_require__(/*! ../models/orderModel.js */ "./User/models/orderModel.js");\nvar _require = __webpack_require__(/*! ../../services/ResponseService.js */ "./services/ResponseService.js"),\n  Response = _require.Response;\nvar config = __webpack_require__(/*! ../../config.js */ "./config.js");\nvar Products = __webpack_require__(/*! ../models/productModel.js */ "./User/models/productModel.js");\nvar mongoose = __webpack_require__(/*! mongoose */ "mongoose");\nvar StripeOrders = __webpack_require__(/*! ../models/stripeOrdersModel.js */ "./User/models/stripeOrdersModel.js");\nvar User = __webpack_require__(/*! ../models/userModel.js */ "./User/models/userModel.js");\nvar listOrder = /*#__PURE__*/function () {\n  var _ref = _asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(req, res) {\n    var _req$query, page, size, skip, _id, _error$message;\n    return _regeneratorRuntime().wrap(function _callee$(_context) {\n      while (1) switch (_context.prev = _context.next) {\n        case 0:\n          _context.prev = 0;\n          _req$query = req.query, page = _req$query.page, size = _req$query.size;\n          skip = (page - 1) * size;\n          _id = req.user._id;\n          _context.next = 6;\n          return Order.find({\n            userId: _id\n          }).populate(\'userId\').populate(\'items.product\').populate(\'items.shippingAddress\').skip(skip).limit(size).sort({\n            createdAt: -1\n          }).then(function (order) {\n            if (order.length == 0) {\n              Response(res, 200, config.success_message, "No data found", {\n                order: []\n              });\n            } else {\n              var count = 0;\n              var returnCount = 0;\n              order.map(function (items) {\n                items.items.map(function (item) {\n                  if (!item.cancelOrder) {\n                    if (item.status == "ordered" || item.status == "processing" || item.status == "shipped") {\n                      count++;\n                    }\n                  }\n                  if (item !== null && item !== void 0 && item.returnProduct) {\n                    returnCount++;\n                  }\n                });\n              });\n              var data = {\n                page: page,\n                size: size,\n                totalCount: order.length,\n                totalOrderedProduct: count,\n                totalReturnProduct: returnCount,\n                order: order\n              };\n              Response(res, 200, config.success_message, null, data);\n            }\n          });\n        case 6:\n          _context.next = 11;\n          break;\n        case 8:\n          _context.prev = 8;\n          _context.t0 = _context["catch"](0);\n          Response(res, 400, config.error_message, (_error$message = _context.t0 === null || _context.t0 === void 0 ? void 0 : _context.t0.message) !== null && _error$message !== void 0 ? _error$message : _context.t0, null);\n        case 11:\n        case "end":\n          return _context.stop();\n      }\n    }, _callee, null, [[0, 8]]);\n  }));\n  return function listOrder(_x, _x2) {\n    return _ref.apply(this, arguments);\n  };\n}();\nvar createOrder = /*#__PURE__*/function () {\n  var _ref2 = _asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee4(req, res) {\n    var _req$body, product, paymentMethod, _id, productData, _error$message2;\n    return _regeneratorRuntime().wrap(function _callee4$(_context4) {\n      while (1) switch (_context4.prev = _context4.next) {\n        case 0:\n          _context4.prev = 0;\n          _req$body = req.body, product = _req$body.product, paymentMethod = _req$body.paymentMethod;\n          _id = req.user._id;\n          productData = [];\n          productData = product;\n          _context4.next = 7;\n          return Promise.all(productData.map(/*#__PURE__*/function () {\n            var _ref3 = _asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(item) {\n              var proudctCheck, deliveryDate;\n              return _regeneratorRuntime().wrap(function _callee2$(_context2) {\n                while (1) switch (_context2.prev = _context2.next) {\n                  case 0:\n                    _context2.next = 2;\n                    return Products.findOne({\n                      _id: item.product\n                    });\n                  case 2:\n                    proudctCheck = _context2.sent;\n                    if ((proudctCheck === null || proudctCheck === void 0 ? void 0 : proudctCheck.length) == 0) {\n                      Response(res, 400, config.error_message, "".concat(item.title, " doesn\'t exist, please remove that"), null);\n                    } else {\n                      deliveryDate = new Date(new Date().getTime() + 4 * 24 * 60 * 60 * 1000);\n                      item.deliveryDate = deliveryDate;\n                    }\n                  case 4:\n                  case "end":\n                    return _context2.stop();\n                }\n              }, _callee2);\n            }));\n            return function (_x5) {\n              return _ref3.apply(this, arguments);\n            };\n          }()));\n        case 7:\n          if (!((product === null || product === void 0 ? void 0 : product.length) != 0)) {\n            _context4.next = 10;\n            break;\n          }\n          _context4.next = 10;\n          return Order.create({\n            userId: _id,\n            items: productData,\n            paymentMethod: paymentMethod\n          }).then(/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee3() {\n            return _regeneratorRuntime().wrap(function _callee3$(_context3) {\n              while (1) switch (_context3.prev = _context3.next) {\n                case 0:\n                  _context3.next = 2;\n                  return User.updateOne({\n                    _id: _id\n                  }, {\n                    $inc: {\n                      currentOrder: productData.length\n                    }\n                  });\n                case 2:\n                  Response(res, 200, config.success_message, "Items ordered succuessfully!", null);\n                case 3:\n                case "end":\n                  return _context3.stop();\n              }\n            }, _callee3);\n          })));\n        case 10:\n          _context4.next = 16;\n          break;\n        case 12:\n          _context4.prev = 12;\n          _context4.t0 = _context4["catch"](0);\n          console.log(_context4.t0);\n          Response(res, 400, config.error_message, (_error$message2 = _context4.t0 === null || _context4.t0 === void 0 ? void 0 : _context4.t0.message) !== null && _error$message2 !== void 0 ? _error$message2 : _context4.t0, null);\n        case 16:\n        case "end":\n          return _context4.stop();\n      }\n    }, _callee4, null, [[0, 12]]);\n  }));\n  return function createOrder(_x3, _x4) {\n    return _ref2.apply(this, arguments);\n  };\n}();\nvar cancelOrder = /*#__PURE__*/function () {\n  var _ref5 = _asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee6(req, res) {\n    var _orderDetails$items, _req$body2, orderId, productId, returnOption, _id, orderDetails, status, _orderDetails$items2, _error$message3;\n    return _regeneratorRuntime().wrap(function _callee6$(_context6) {\n      while (1) switch (_context6.prev = _context6.next) {\n        case 0:\n          _context6.prev = 0;\n          _req$body2 = req.body, orderId = _req$body2.orderId, productId = _req$body2.productId, returnOption = _req$body2.returnOption;\n          _id = req.user._id;\n          _context6.next = 5;\n          return Order.findOne({\n            _id: orderId,\n            "items.product": productId\n          });\n        case 5:\n          orderDetails = _context6.sent;\n          status = "";\n          if (!(orderDetails !== null && orderDetails !== void 0 && (_orderDetails$items = orderDetails.items) !== null && _orderDetails$items !== void 0 && _orderDetails$items.length)) {\n            _context6.next = 12;\n            break;\n          }\n          _context6.next = 10;\n          return Promise.all(orderDetails === null || orderDetails === void 0 || (_orderDetails$items2 = orderDetails.items) === null || _orderDetails$items2 === void 0 ? void 0 : _orderDetails$items2.map(function (item) {\n            var _item$product;\n            if ((item === null || item === void 0 || (_item$product = item.product) === null || _item$product === void 0 ? void 0 : _item$product.toString()) == productId) {\n              status = item.status;\n            }\n          }));\n        case 10:\n          _context6.next = 13;\n          break;\n        case 12:\n          Response(res, 400, config.error_message, "Order not available", null);\n        case 13:\n          if (!(status == "delivered")) {\n            _context6.next = 18;\n            break;\n          }\n          _context6.next = 16;\n          return Order.updateOne({\n            _id: orderId,\n            userId: _id,\n            "items.product": productId\n          }, {\n            $set: {\n              "items.$.cancelOrder": true,\n              "items.$.returnOption": returnOption,\n              "items.$.cancelStatus": "applied",\n              "items.$.returnStatus": "initiated"\n            }\n          }).then(/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee5() {\n            return _regeneratorRuntime().wrap(function _callee5$(_context5) {\n              while (1) switch (_context5.prev = _context5.next) {\n                case 0:\n                  _context5.next = 2;\n                  return User.updateOne({\n                    _id: _id\n                  }, {\n                    $inc: {\n                      currentOrder: -1\n                    }\n                  });\n                case 2:\n                  Response(res, 200, config.success_message, "Cancel orderd intiated, we will let you know progress", null);\n                case 3:\n                case "end":\n                  return _context5.stop();\n              }\n            }, _callee5);\n          })));\n        case 16:\n          _context6.next = 19;\n          break;\n        case 18:\n          Response(res, 400, config.error_message, "Order doesn\'t delivered yet", null);\n        case 19:\n          _context6.next = 24;\n          break;\n        case 21:\n          _context6.prev = 21;\n          _context6.t0 = _context6["catch"](0);\n          Response(res, 400, config.error_message, (_error$message3 = _context6.t0 === null || _context6.t0 === void 0 ? void 0 : _context6.t0.message) !== null && _error$message3 !== void 0 ? _error$message3 : _context6.t0, null);\n        case 24:\n        case "end":\n          return _context6.stop();\n      }\n    }, _callee6, null, [[0, 21]]);\n  }));\n  return function cancelOrder(_x6, _x7) {\n    return _ref5.apply(this, arguments);\n  };\n}();\nvar updateAddress = /*#__PURE__*/function () {\n  var _ref7 = _asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee7(req, res) {\n    var _orderDetails$items3, _req$body3, orderId, productId, shippingAddress, _id, orderDetails, status, _error$message4;\n    return _regeneratorRuntime().wrap(function _callee7$(_context7) {\n      while (1) switch (_context7.prev = _context7.next) {\n        case 0:\n          _context7.prev = 0;\n          _req$body3 = req.body, orderId = _req$body3.orderId, productId = _req$body3.productId, shippingAddress = _req$body3.shippingAddress;\n          _id = req.user._id;\n          _context7.next = 5;\n          return Order.findOne({\n            _id: orderId,\n            "items.product": productId\n          });\n        case 5:\n          orderDetails = _context7.sent;\n          status = "";\n          if (!(orderDetails !== null && orderDetails !== void 0 && (_orderDetails$items3 = orderDetails.items) !== null && _orderDetails$items3 !== void 0 && _orderDetails$items3.length)) {\n            _context7.next = 15;\n            break;\n          }\n          _context7.next = 10;\n          return Promise.all(orderDetails.items.map(function (item) {\n            if (item.product.toString() == productId) {\n              status = item.status;\n            }\n          }));\n        case 10:\n          if (status == "shipped" || status == "delivered") {\n            _context7.next = 13;\n            break;\n          }\n          _context7.next = 13;\n          return Order.updateOne({\n            _id: orderId,\n            userId: _id,\n            "items.product": productId\n          }, {\n            $set: {\n              \'items.$.shippingAddress\': shippingAddress\n            }\n          }).then(function () {\n            Response(res, 200, config.success_message, "Address updated successfully", null);\n          });\n        case 13:\n          _context7.next = 16;\n          break;\n        case 15:\n          Response(res, 400, config.error_message, "Order not available", null);\n        case 16:\n          _context7.next = 22;\n          break;\n        case 18:\n          _context7.prev = 18;\n          _context7.t0 = _context7["catch"](0);\n          console.log(_context7.t0);\n          Response(res, 400, config.error_message, (_error$message4 = _context7.t0 === null || _context7.t0 === void 0 ? void 0 : _context7.t0.message) !== null && _error$message4 !== void 0 ? _error$message4 : _context7.t0, null);\n        case 22:\n        case "end":\n          return _context7.stop();\n      }\n    }, _callee7, null, [[0, 18]]);\n  }));\n  return function updateAddress(_x8, _x9) {\n    return _ref7.apply(this, arguments);\n  };\n}();\nvar createBulkOrder = /*#__PURE__*/function () {\n  var _ref8 = _asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee10(req, res) {\n    var id, _id, orderItems, getStripeOrder, _getStripeOrder, _error$message5;\n    return _regeneratorRuntime().wrap(function _callee10$(_context10) {\n      while (1) switch (_context10.prev = _context10.next) {\n        case 0:\n          _context10.prev = 0;\n          id = req.body.id;\n          _id = req.user._id;\n          orderItems = [];\n          _context10.next = 6;\n          return StripeOrders.findOne({\n            _id: id,\n            userId: _id\n          }).populate("items.$.product");\n        case 6:\n          getStripeOrder = _context10.sent;\n          if (!getStripeOrder) {\n            _context10.next = 22;\n            break;\n          }\n          _context10.next = 10;\n          return Promise.all((_getStripeOrder = getStripeOrder) === null || _getStripeOrder === void 0 ? void 0 : _getStripeOrder.items.map(/*#__PURE__*/function () {\n            var _ref9 = _asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee8(item) {\n              var proudctCheck;\n              return _regeneratorRuntime().wrap(function _callee8$(_context8) {\n                while (1) switch (_context8.prev = _context8.next) {\n                  case 0:\n                    _context8.next = 2;\n                    return Products.findOne({\n                      _id: item === null || item === void 0 ? void 0 : item.product\n                    });\n                  case 2:\n                    proudctCheck = _context8.sent;\n                    if (proudctCheck.length == 0) {\n                      Response(res, 400, config.error_message, "".concat(item.title, " doesn\'t exist, please remove that"), null);\n                    }\n                  case 4:\n                  case "end":\n                    return _context8.stop();\n                }\n              }, _callee8);\n            }));\n            return function (_x12) {\n              return _ref9.apply(this, arguments);\n            };\n          }()));\n        case 10:\n          _context10.next = 12;\n          return StripeOrders.findOne({\n            _id: id,\n            userId: _id\n          });\n        case 12:\n          getStripeOrder = _context10.sent;\n          getStripeOrder.items.map(function (item) {\n            var data = {\n              product: item === null || item === void 0 ? void 0 : item.product,\n              quantity: item === null || item === void 0 ? void 0 : item.quantity,\n              shippingAddress: getStripeOrder.addressId\n            };\n            orderItems.push(data);\n          });\n          if (!(orderItems.length != 0)) {\n            _context10.next = 19;\n            break;\n          }\n          _context10.next = 17;\n          return Order.create({\n            userId: _id,\n            items: orderItems,\n            paymentMethod: "card"\n          }).then(/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee9() {\n            return _regeneratorRuntime().wrap(function _callee9$(_context9) {\n              while (1) switch (_context9.prev = _context9.next) {\n                case 0:\n                  _context9.next = 2;\n                  return User.updateOne({\n                    _id: _id\n                  }, {\n                    $inc: {\n                      currentOrder: orderItems.length\n                    }\n                  });\n                case 2:\n                  Response(res, 200, config.success_message, "Items ordered succuessfully!", null);\n                case 3:\n                case "end":\n                  return _context9.stop();\n              }\n            }, _callee9);\n          })));\n        case 17:\n          _context10.next = 20;\n          break;\n        case 19:\n          Response(res, 400, config.error_message, "Product didn\'t get to order", null);\n        case 20:\n          _context10.next = 23;\n          break;\n        case 22:\n          Response(res, 400, config.error_message, "Stripe order not available", null);\n        case 23:\n          _context10.next = 28;\n          break;\n        case 25:\n          _context10.prev = 25;\n          _context10.t0 = _context10["catch"](0);\n          Response(res, 400, config.error_message, (_error$message5 = _context10.t0 === null || _context10.t0 === void 0 ? void 0 : _context10.t0.message) !== null && _error$message5 !== void 0 ? _error$message5 : _context10.t0, null);\n        case 28:\n        case "end":\n          return _context10.stop();\n      }\n    }, _callee10, null, [[0, 25]]);\n  }));\n  return function createBulkOrder(_x10, _x11) {\n    return _ref8.apply(this, arguments);\n  };\n}();\nvar getProduct = /*#__PURE__*/function () {\n  var _ref11 = _asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee11(req, res) {\n    var _req$params, orderId, productId, _id, orderDetails, details, _error$message6;\n    return _regeneratorRuntime().wrap(function _callee11$(_context11) {\n      while (1) switch (_context11.prev = _context11.next) {\n        case 0:\n          _context11.prev = 0;\n          _req$params = req.params, orderId = _req$params.orderId, productId = _req$params.productId;\n          _id = req.user._id;\n          _context11.next = 5;\n          return Order.findOne({\n            _id: orderId,\n            "items.product": productId,\n            userId: _id\n          }).populate("items.product");\n        case 5:\n          orderDetails = _context11.sent;\n          details = [];\n          _context11.next = 9;\n          return Promise.all(orderDetails.items.map(function (item) {\n            if (item.product._id.toString() == productId) {\n              details.push(item);\n            }\n          }));\n        case 9:\n          Response(res, 200, config.success_message, null, details);\n          _context11.next = 15;\n          break;\n        case 12:\n          _context11.prev = 12;\n          _context11.t0 = _context11["catch"](0);\n          Response(res, 400, config.error_message, (_error$message6 = _context11.t0 === null || _context11.t0 === void 0 ? void 0 : _context11.t0.message) !== null && _error$message6 !== void 0 ? _error$message6 : _context11.t0, null);\n        case 15:\n        case "end":\n          return _context11.stop();\n      }\n    }, _callee11, null, [[0, 12]]);\n  }));\n  return function getProduct(_x13, _x14) {\n    return _ref11.apply(this, arguments);\n  };\n}();\nmodule.exports = {\n  listOrder: listOrder,\n  createOrder: createOrder,\n  cancelOrder: cancelOrder,\n  updateAddress: updateAddress,\n  createBulkOrder: createBulkOrder,\n  getProduct: getProduct\n};\n\n//# sourceURL=webpack://profitcart-nodejs/./User/controllers/orderController.js?')},"./User/controllers/productController.js":(module,__unused_webpack_exports,__webpack_require__)=>{eval('function _typeof(o) { "@babel/helpers - typeof"; return _typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && "function" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? "symbol" : typeof o; }, _typeof(o); }\nfunction _regeneratorRuntime() { "use strict"; /*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */ _regeneratorRuntime = function _regeneratorRuntime() { return e; }; var t, e = {}, r = Object.prototype, n = r.hasOwnProperty, o = Object.defineProperty || function (t, e, r) { t[e] = r.value; }, i = "function" == typeof Symbol ? Symbol : {}, a = i.iterator || "@@iterator", c = i.asyncIterator || "@@asyncIterator", u = i.toStringTag || "@@toStringTag"; function define(t, e, r) { return Object.defineProperty(t, e, { value: r, enumerable: !0, configurable: !0, writable: !0 }), t[e]; } try { define({}, ""); } catch (t) { define = function define(t, e, r) { return t[e] = r; }; } function wrap(t, e, r, n) { var i = e && e.prototype instanceof Generator ? e : Generator, a = Object.create(i.prototype), c = new Context(n || []); return o(a, "_invoke", { value: makeInvokeMethod(t, r, c) }), a; } function tryCatch(t, e, r) { try { return { type: "normal", arg: t.call(e, r) }; } catch (t) { return { type: "throw", arg: t }; } } e.wrap = wrap; var h = "suspendedStart", l = "suspendedYield", f = "executing", s = "completed", y = {}; function Generator() {} function GeneratorFunction() {} function GeneratorFunctionPrototype() {} var p = {}; define(p, a, function () { return this; }); var d = Object.getPrototypeOf, v = d && d(d(values([]))); v && v !== r && n.call(v, a) && (p = v); var g = GeneratorFunctionPrototype.prototype = Generator.prototype = Object.create(p); function defineIteratorMethods(t) { ["next", "throw", "return"].forEach(function (e) { define(t, e, function (t) { return this._invoke(e, t); }); }); } function AsyncIterator(t, e) { function invoke(r, o, i, a) { var c = tryCatch(t[r], t, o); if ("throw" !== c.type) { var u = c.arg, h = u.value; return h && "object" == _typeof(h) && n.call(h, "__await") ? e.resolve(h.__await).then(function (t) { invoke("next", t, i, a); }, function (t) { invoke("throw", t, i, a); }) : e.resolve(h).then(function (t) { u.value = t, i(u); }, function (t) { return invoke("throw", t, i, a); }); } a(c.arg); } var r; o(this, "_invoke", { value: function value(t, n) { function callInvokeWithMethodAndArg() { return new e(function (e, r) { invoke(t, n, e, r); }); } return r = r ? r.then(callInvokeWithMethodAndArg, callInvokeWithMethodAndArg) : callInvokeWithMethodAndArg(); } }); } function makeInvokeMethod(e, r, n) { var o = h; return function (i, a) { if (o === f) throw Error("Generator is already running"); if (o === s) { if ("throw" === i) throw a; return { value: t, done: !0 }; } for (n.method = i, n.arg = a;;) { var c = n.delegate; if (c) { var u = maybeInvokeDelegate(c, n); if (u) { if (u === y) continue; return u; } } if ("next" === n.method) n.sent = n._sent = n.arg;else if ("throw" === n.method) { if (o === h) throw o = s, n.arg; n.dispatchException(n.arg); } else "return" === n.method && n.abrupt("return", n.arg); o = f; var p = tryCatch(e, r, n); if ("normal" === p.type) { if (o = n.done ? s : l, p.arg === y) continue; return { value: p.arg, done: n.done }; } "throw" === p.type && (o = s, n.method = "throw", n.arg = p.arg); } }; } function maybeInvokeDelegate(e, r) { var n = r.method, o = e.iterator[n]; if (o === t) return r.delegate = null, "throw" === n && e.iterator["return"] && (r.method = "return", r.arg = t, maybeInvokeDelegate(e, r), "throw" === r.method) || "return" !== n && (r.method = "throw", r.arg = new TypeError("The iterator does not provide a \'" + n + "\' method")), y; var i = tryCatch(o, e.iterator, r.arg); if ("throw" === i.type) return r.method = "throw", r.arg = i.arg, r.delegate = null, y; var a = i.arg; return a ? a.done ? (r[e.resultName] = a.value, r.next = e.nextLoc, "return" !== r.method && (r.method = "next", r.arg = t), r.delegate = null, y) : a : (r.method = "throw", r.arg = new TypeError("iterator result is not an object"), r.delegate = null, y); } function pushTryEntry(t) { var e = { tryLoc: t[0] }; 1 in t && (e.catchLoc = t[1]), 2 in t && (e.finallyLoc = t[2], e.afterLoc = t[3]), this.tryEntries.push(e); } function resetTryEntry(t) { var e = t.completion || {}; e.type = "normal", delete e.arg, t.completion = e; } function Context(t) { this.tryEntries = [{ tryLoc: "root" }], t.forEach(pushTryEntry, this), this.reset(!0); } function values(e) { if (e || "" === e) { var r = e[a]; if (r) return r.call(e); if ("function" == typeof e.next) return e; if (!isNaN(e.length)) { var o = -1, i = function next() { for (; ++o < e.length;) if (n.call(e, o)) return next.value = e[o], next.done = !1, next; return next.value = t, next.done = !0, next; }; return i.next = i; } } throw new TypeError(_typeof(e) + " is not iterable"); } return GeneratorFunction.prototype = GeneratorFunctionPrototype, o(g, "constructor", { value: GeneratorFunctionPrototype, configurable: !0 }), o(GeneratorFunctionPrototype, "constructor", { value: GeneratorFunction, configurable: !0 }), GeneratorFunction.displayName = define(GeneratorFunctionPrototype, u, "GeneratorFunction"), e.isGeneratorFunction = function (t) { var e = "function" == typeof t && t.constructor; return !!e && (e === GeneratorFunction || "GeneratorFunction" === (e.displayName || e.name)); }, e.mark = function (t) { return Object.setPrototypeOf ? Object.setPrototypeOf(t, GeneratorFunctionPrototype) : (t.__proto__ = GeneratorFunctionPrototype, define(t, u, "GeneratorFunction")), t.prototype = Object.create(g), t; }, e.awrap = function (t) { return { __await: t }; }, defineIteratorMethods(AsyncIterator.prototype), define(AsyncIterator.prototype, c, function () { return this; }), e.AsyncIterator = AsyncIterator, e.async = function (t, r, n, o, i) { void 0 === i && (i = Promise); var a = new AsyncIterator(wrap(t, r, n, o), i); return e.isGeneratorFunction(r) ? a : a.next().then(function (t) { return t.done ? t.value : a.next(); }); }, defineIteratorMethods(g), define(g, u, "Generator"), define(g, a, function () { return this; }), define(g, "toString", function () { return "[object Generator]"; }), e.keys = function (t) { var e = Object(t), r = []; for (var n in e) r.push(n); return r.reverse(), function next() { for (; r.length;) { var t = r.pop(); if (t in e) return next.value = t, next.done = !1, next; } return next.done = !0, next; }; }, e.values = values, Context.prototype = { constructor: Context, reset: function reset(e) { if (this.prev = 0, this.next = 0, this.sent = this._sent = t, this.done = !1, this.delegate = null, this.method = "next", this.arg = t, this.tryEntries.forEach(resetTryEntry), !e) for (var r in this) "t" === r.charAt(0) && n.call(this, r) && !isNaN(+r.slice(1)) && (this[r] = t); }, stop: function stop() { this.done = !0; var t = this.tryEntries[0].completion; if ("throw" === t.type) throw t.arg; return this.rval; }, dispatchException: function dispatchException(e) { if (this.done) throw e; var r = this; function handle(n, o) { return a.type = "throw", a.arg = e, r.next = n, o && (r.method = "next", r.arg = t), !!o; } for (var o = this.tryEntries.length - 1; o >= 0; --o) { var i = this.tryEntries[o], a = i.completion; if ("root" === i.tryLoc) return handle("end"); if (i.tryLoc <= this.prev) { var c = n.call(i, "catchLoc"), u = n.call(i, "finallyLoc"); if (c && u) { if (this.prev < i.catchLoc) return handle(i.catchLoc, !0); if (this.prev < i.finallyLoc) return handle(i.finallyLoc); } else if (c) { if (this.prev < i.catchLoc) return handle(i.catchLoc, !0); } else { if (!u) throw Error("try statement without catch or finally"); if (this.prev < i.finallyLoc) return handle(i.finallyLoc); } } } }, abrupt: function abrupt(t, e) { for (var r = this.tryEntries.length - 1; r >= 0; --r) { var o = this.tryEntries[r]; if (o.tryLoc <= this.prev && n.call(o, "finallyLoc") && this.prev < o.finallyLoc) { var i = o; break; } } i && ("break" === t || "continue" === t) && i.tryLoc <= e && e <= i.finallyLoc && (i = null); var a = i ? i.completion : {}; return a.type = t, a.arg = e, i ? (this.method = "next", this.next = i.finallyLoc, y) : this.complete(a); }, complete: function complete(t, e) { if ("throw" === t.type) throw t.arg; return "break" === t.type || "continue" === t.type ? this.next = t.arg : "return" === t.type ? (this.rval = this.arg = t.arg, this.method = "return", this.next = "end") : "normal" === t.type && e && (this.next = e), y; }, finish: function finish(t) { for (var e = this.tryEntries.length - 1; e >= 0; --e) { var r = this.tryEntries[e]; if (r.finallyLoc === t) return this.complete(r.completion, r.afterLoc), resetTryEntry(r), y; } }, "catch": function _catch(t) { for (var e = this.tryEntries.length - 1; e >= 0; --e) { var r = this.tryEntries[e]; if (r.tryLoc === t) { var n = r.completion; if ("throw" === n.type) { var o = n.arg; resetTryEntry(r); } return o; } } throw Error("illegal catch attempt"); }, delegateYield: function delegateYield(e, r, n) { return this.delegate = { iterator: values(e), resultName: r, nextLoc: n }, "next" === this.method && (this.arg = t), y; } }, e; }\nfunction asyncGeneratorStep(n, t, e, r, o, a, c) { try { var i = n[a](c), u = i.value; } catch (n) { return void e(n); } i.done ? t(u) : Promise.resolve(u).then(r, o); }\nfunction _asyncToGenerator(n) { return function () { var t = this, e = arguments; return new Promise(function (r, o) { var a = n.apply(t, e); function _next(n) { asyncGeneratorStep(a, r, o, _next, _throw, "next", n); } function _throw(n) { asyncGeneratorStep(a, r, o, _next, _throw, "throw", n); } _next(void 0); }); }; }\nvar _require = __webpack_require__(/*! ../../services/ResponseService */ "./services/ResponseService.js"),\n  Response = _require.Response;\nvar config = __webpack_require__(/*! ../../config.js */ "./config.js");\nvar Products = __webpack_require__(/*! ../models/productModel.js */ "./User/models/productModel.js");\nvar productList = /*#__PURE__*/function () {\n  var _ref = _asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(req, res) {\n    var _req$query, search, page, size, query, skip, totalPage, decimal, _error$message;\n    return _regeneratorRuntime().wrap(function _callee$(_context) {\n      while (1) switch (_context.prev = _context.next) {\n        case 0:\n          _context.prev = 0;\n          _req$query = req.query, search = _req$query.search, page = _req$query.page, size = _req$query.size;\n          query = search ? [{\n            title: {\n              $regex: new RegExp(search, \'i\')\n            }\n          }, {\n            description: {\n              $regex: new RegExp(search, \'i\')\n            }\n          }, {\n            brand: {\n              $regex: new RegExp(search, \'i\')\n            }\n          }, {\n            actual_price: {\n              $regex: new RegExp(search, \'i\')\n            }\n          }, {\n            sub_category: {\n              $regex: new RegExp(search, \'i\')\n            }\n          }, {\n            seller: {\n              $regex: new RegExp(search, \'i\')\n            }\n          }] : [];\n          skip = (page - 1) * size; // skip<=0 || skip==null || typeof(skip)==undefined ? 0:skip;\n          // size<=0 || size==null || typeof(size)==undefined ? 0:size;\n          data = {\n            page: page,\n            size: size\n          };\n          console.log(skip, size);\n          if (!(query.length != 0)) {\n            _context.next = 24;\n            break;\n          }\n          _context.next = 9;\n          return Products.find({\n            $or: query\n          }).count();\n        case 9:\n          data.totalLength = _context.sent;\n          totalPage = parseInt(data.totalLength / 10);\n          decimal = data.totalLength % 10;\n          if (decimal > 0) {\n            totalPage++;\n          }\n          data.totalPage = totalPage;\n          if (!(skip == 0 && size == 0)) {\n            _context.next = 20;\n            break;\n          }\n          console.log("I am in");\n          _context.next = 18;\n          return Products.find({\n            $or: query\n          }).then(function (products) {\n            data.product = products;\n            Response(res, 200, config.success_message, null, data);\n          });\n        case 18:\n          _context.next = 22;\n          break;\n        case 20:\n          _context.next = 22;\n          return Products.find({\n            $or: query\n          }).skip(skip).limit(size).then(function (products) {\n            data.product = products;\n            Response(res, 200, config.success_message, null, data);\n          });\n        case 22:\n          _context.next = 30;\n          break;\n        case 24:\n          _context.next = 26;\n          return Products.find().count();\n        case 26:\n          data.totalLength = _context.sent;\n          data.totalPage = data.totalLength / 10;\n          _context.next = 30;\n          return Products.find().skip(skip).limit(size).then(function (products) {\n            data.product = products;\n            Response(res, 200, config.success_message, null, data);\n          });\n        case 30:\n          _context.next = 36;\n          break;\n        case 32:\n          _context.prev = 32;\n          _context.t0 = _context["catch"](0);\n          console.log(_context.t0);\n          Response(res, 400, config.error_message, (_error$message = _context.t0 === null || _context.t0 === void 0 ? void 0 : _context.t0.message) !== null && _error$message !== void 0 ? _error$message : _context.t0, null);\n        case 36:\n        case "end":\n          return _context.stop();\n      }\n    }, _callee, null, [[0, 32]]);\n  }));\n  return function productList(_x, _x2) {\n    return _ref.apply(this, arguments);\n  };\n}();\nvar productDetails = /*#__PURE__*/function () {\n  var _ref2 = _asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(req, res) {\n    var proudctId, _error$message2;\n    return _regeneratorRuntime().wrap(function _callee2$(_context2) {\n      while (1) switch (_context2.prev = _context2.next) {\n        case 0:\n          _context2.prev = 0;\n          proudctId = req.params.id;\n          _context2.next = 4;\n          return Products.findById({\n            _id: proudctId\n          }).then(function (product) {\n            var description = product.description.split(".");\n            Response(res, 200, config.success_message, "Product fetched successfull", {\n              data: product,\n              description: description\n            });\n          });\n        case 4:\n          _context2.next = 9;\n          break;\n        case 6:\n          _context2.prev = 6;\n          _context2.t0 = _context2["catch"](0);\n          Response(res, 400, config.error_message, (_error$message2 = _context2.t0 === null || _context2.t0 === void 0 ? void 0 : _context2.t0.message) !== null && _error$message2 !== void 0 ? _error$message2 : _context2.t0, null);\n        case 9:\n        case "end":\n          return _context2.stop();\n      }\n    }, _callee2, null, [[0, 6]]);\n  }));\n  return function productDetails(_x3, _x4) {\n    return _ref2.apply(this, arguments);\n  };\n}();\nvar proudctForIndex = /*#__PURE__*/function () {\n  var _ref3 = _asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee3(req, res) {\n    var _data, products, promise, _error$message3;\n    return _regeneratorRuntime().wrap(function _callee3$(_context3) {\n      while (1) switch (_context3.prev = _context3.next) {\n        case 0:\n          _context3.prev = 0;\n          _data = [];\n          _context3.next = 4;\n          return Products.find().skip(0).limit(500);\n        case 4:\n          products = _context3.sent;\n          promise = products.map(function (item, index) {\n            var price = item.discount.split(" ");\n            price = price[0].split("%");\n            if (Number(price[0]) > 70 && item.images[0]) {\n              _data.push(item);\n            }\n          });\n          _context3.next = 8;\n          return Promise.all(promise).then(function () {\n            // data[0].length=data[0]?.items.length;\n            // data[1].length=data[1]?.items.length;\n            // data[2].length=data[2]?.items.length;\n            // data[3].length=data[3]?.items.length;\n            Response(res, 200, config.success_message, null, {\n              length: _data.length,\n              product: _data\n            });\n          });\n        case 8:\n          _context3.next = 14;\n          break;\n        case 10:\n          _context3.prev = 10;\n          _context3.t0 = _context3["catch"](0);\n          console.log(_context3.t0);\n          Response(res, 400, config.error_message, (_error$message3 = _context3.t0 === null || _context3.t0 === void 0 ? void 0 : _context3.t0.message) !== null && _error$message3 !== void 0 ? _error$message3 : _context3.t0, null);\n        case 14:\n        case "end":\n          return _context3.stop();\n      }\n    }, _callee3, null, [[0, 10]]);\n  }));\n  return function proudctForIndex(_x5, _x6) {\n    return _ref3.apply(this, arguments);\n  };\n}();\nmodule.exports = {\n  productList: productList,\n  productDetails: productDetails,\n  proudctForIndex: proudctForIndex\n};\n\n//# sourceURL=webpack://profitcart-nodejs/./User/controllers/productController.js?')},"./User/controllers/reviewAndRatingController.js":(module,__unused_webpack_exports,__webpack_require__)=>{eval('function _typeof(o) { "@babel/helpers - typeof"; return _typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && "function" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? "symbol" : typeof o; }, _typeof(o); }\nfunction _regeneratorRuntime() { "use strict"; /*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */ _regeneratorRuntime = function _regeneratorRuntime() { return e; }; var t, e = {}, r = Object.prototype, n = r.hasOwnProperty, o = Object.defineProperty || function (t, e, r) { t[e] = r.value; }, i = "function" == typeof Symbol ? Symbol : {}, a = i.iterator || "@@iterator", c = i.asyncIterator || "@@asyncIterator", u = i.toStringTag || "@@toStringTag"; function define(t, e, r) { return Object.defineProperty(t, e, { value: r, enumerable: !0, configurable: !0, writable: !0 }), t[e]; } try { define({}, ""); } catch (t) { define = function define(t, e, r) { return t[e] = r; }; } function wrap(t, e, r, n) { var i = e && e.prototype instanceof Generator ? e : Generator, a = Object.create(i.prototype), c = new Context(n || []); return o(a, "_invoke", { value: makeInvokeMethod(t, r, c) }), a; } function tryCatch(t, e, r) { try { return { type: "normal", arg: t.call(e, r) }; } catch (t) { return { type: "throw", arg: t }; } } e.wrap = wrap; var h = "suspendedStart", l = "suspendedYield", f = "executing", s = "completed", y = {}; function Generator() {} function GeneratorFunction() {} function GeneratorFunctionPrototype() {} var p = {}; define(p, a, function () { return this; }); var d = Object.getPrototypeOf, v = d && d(d(values([]))); v && v !== r && n.call(v, a) && (p = v); var g = GeneratorFunctionPrototype.prototype = Generator.prototype = Object.create(p); function defineIteratorMethods(t) { ["next", "throw", "return"].forEach(function (e) { define(t, e, function (t) { return this._invoke(e, t); }); }); } function AsyncIterator(t, e) { function invoke(r, o, i, a) { var c = tryCatch(t[r], t, o); if ("throw" !== c.type) { var u = c.arg, h = u.value; return h && "object" == _typeof(h) && n.call(h, "__await") ? e.resolve(h.__await).then(function (t) { invoke("next", t, i, a); }, function (t) { invoke("throw", t, i, a); }) : e.resolve(h).then(function (t) { u.value = t, i(u); }, function (t) { return invoke("throw", t, i, a); }); } a(c.arg); } var r; o(this, "_invoke", { value: function value(t, n) { function callInvokeWithMethodAndArg() { return new e(function (e, r) { invoke(t, n, e, r); }); } return r = r ? r.then(callInvokeWithMethodAndArg, callInvokeWithMethodAndArg) : callInvokeWithMethodAndArg(); } }); } function makeInvokeMethod(e, r, n) { var o = h; return function (i, a) { if (o === f) throw Error("Generator is already running"); if (o === s) { if ("throw" === i) throw a; return { value: t, done: !0 }; } for (n.method = i, n.arg = a;;) { var c = n.delegate; if (c) { var u = maybeInvokeDelegate(c, n); if (u) { if (u === y) continue; return u; } } if ("next" === n.method) n.sent = n._sent = n.arg;else if ("throw" === n.method) { if (o === h) throw o = s, n.arg; n.dispatchException(n.arg); } else "return" === n.method && n.abrupt("return", n.arg); o = f; var p = tryCatch(e, r, n); if ("normal" === p.type) { if (o = n.done ? s : l, p.arg === y) continue; return { value: p.arg, done: n.done }; } "throw" === p.type && (o = s, n.method = "throw", n.arg = p.arg); } }; } function maybeInvokeDelegate(e, r) { var n = r.method, o = e.iterator[n]; if (o === t) return r.delegate = null, "throw" === n && e.iterator["return"] && (r.method = "return", r.arg = t, maybeInvokeDelegate(e, r), "throw" === r.method) || "return" !== n && (r.method = "throw", r.arg = new TypeError("The iterator does not provide a \'" + n + "\' method")), y; var i = tryCatch(o, e.iterator, r.arg); if ("throw" === i.type) return r.method = "throw", r.arg = i.arg, r.delegate = null, y; var a = i.arg; return a ? a.done ? (r[e.resultName] = a.value, r.next = e.nextLoc, "return" !== r.method && (r.method = "next", r.arg = t), r.delegate = null, y) : a : (r.method = "throw", r.arg = new TypeError("iterator result is not an object"), r.delegate = null, y); } function pushTryEntry(t) { var e = { tryLoc: t[0] }; 1 in t && (e.catchLoc = t[1]), 2 in t && (e.finallyLoc = t[2], e.afterLoc = t[3]), this.tryEntries.push(e); } function resetTryEntry(t) { var e = t.completion || {}; e.type = "normal", delete e.arg, t.completion = e; } function Context(t) { this.tryEntries = [{ tryLoc: "root" }], t.forEach(pushTryEntry, this), this.reset(!0); } function values(e) { if (e || "" === e) { var r = e[a]; if (r) return r.call(e); if ("function" == typeof e.next) return e; if (!isNaN(e.length)) { var o = -1, i = function next() { for (; ++o < e.length;) if (n.call(e, o)) return next.value = e[o], next.done = !1, next; return next.value = t, next.done = !0, next; }; return i.next = i; } } throw new TypeError(_typeof(e) + " is not iterable"); } return GeneratorFunction.prototype = GeneratorFunctionPrototype, o(g, "constructor", { value: GeneratorFunctionPrototype, configurable: !0 }), o(GeneratorFunctionPrototype, "constructor", { value: GeneratorFunction, configurable: !0 }), GeneratorFunction.displayName = define(GeneratorFunctionPrototype, u, "GeneratorFunction"), e.isGeneratorFunction = function (t) { var e = "function" == typeof t && t.constructor; return !!e && (e === GeneratorFunction || "GeneratorFunction" === (e.displayName || e.name)); }, e.mark = function (t) { return Object.setPrototypeOf ? Object.setPrototypeOf(t, GeneratorFunctionPrototype) : (t.__proto__ = GeneratorFunctionPrototype, define(t, u, "GeneratorFunction")), t.prototype = Object.create(g), t; }, e.awrap = function (t) { return { __await: t }; }, defineIteratorMethods(AsyncIterator.prototype), define(AsyncIterator.prototype, c, function () { return this; }), e.AsyncIterator = AsyncIterator, e.async = function (t, r, n, o, i) { void 0 === i && (i = Promise); var a = new AsyncIterator(wrap(t, r, n, o), i); return e.isGeneratorFunction(r) ? a : a.next().then(function (t) { return t.done ? t.value : a.next(); }); }, defineIteratorMethods(g), define(g, u, "Generator"), define(g, a, function () { return this; }), define(g, "toString", function () { return "[object Generator]"; }), e.keys = function (t) { var e = Object(t), r = []; for (var n in e) r.push(n); return r.reverse(), function next() { for (; r.length;) { var t = r.pop(); if (t in e) return next.value = t, next.done = !1, next; } return next.done = !0, next; }; }, e.values = values, Context.prototype = { constructor: Context, reset: function reset(e) { if (this.prev = 0, this.next = 0, this.sent = this._sent = t, this.done = !1, this.delegate = null, this.method = "next", this.arg = t, this.tryEntries.forEach(resetTryEntry), !e) for (var r in this) "t" === r.charAt(0) && n.call(this, r) && !isNaN(+r.slice(1)) && (this[r] = t); }, stop: function stop() { this.done = !0; var t = this.tryEntries[0].completion; if ("throw" === t.type) throw t.arg; return this.rval; }, dispatchException: function dispatchException(e) { if (this.done) throw e; var r = this; function handle(n, o) { return a.type = "throw", a.arg = e, r.next = n, o && (r.method = "next", r.arg = t), !!o; } for (var o = this.tryEntries.length - 1; o >= 0; --o) { var i = this.tryEntries[o], a = i.completion; if ("root" === i.tryLoc) return handle("end"); if (i.tryLoc <= this.prev) { var c = n.call(i, "catchLoc"), u = n.call(i, "finallyLoc"); if (c && u) { if (this.prev < i.catchLoc) return handle(i.catchLoc, !0); if (this.prev < i.finallyLoc) return handle(i.finallyLoc); } else if (c) { if (this.prev < i.catchLoc) return handle(i.catchLoc, !0); } else { if (!u) throw Error("try statement without catch or finally"); if (this.prev < i.finallyLoc) return handle(i.finallyLoc); } } } }, abrupt: function abrupt(t, e) { for (var r = this.tryEntries.length - 1; r >= 0; --r) { var o = this.tryEntries[r]; if (o.tryLoc <= this.prev && n.call(o, "finallyLoc") && this.prev < o.finallyLoc) { var i = o; break; } } i && ("break" === t || "continue" === t) && i.tryLoc <= e && e <= i.finallyLoc && (i = null); var a = i ? i.completion : {}; return a.type = t, a.arg = e, i ? (this.method = "next", this.next = i.finallyLoc, y) : this.complete(a); }, complete: function complete(t, e) { if ("throw" === t.type) throw t.arg; return "break" === t.type || "continue" === t.type ? this.next = t.arg : "return" === t.type ? (this.rval = this.arg = t.arg, this.method = "return", this.next = "end") : "normal" === t.type && e && (this.next = e), y; }, finish: function finish(t) { for (var e = this.tryEntries.length - 1; e >= 0; --e) { var r = this.tryEntries[e]; if (r.finallyLoc === t) return this.complete(r.completion, r.afterLoc), resetTryEntry(r), y; } }, "catch": function _catch(t) { for (var e = this.tryEntries.length - 1; e >= 0; --e) { var r = this.tryEntries[e]; if (r.tryLoc === t) { var n = r.completion; if ("throw" === n.type) { var o = n.arg; resetTryEntry(r); } return o; } } throw Error("illegal catch attempt"); }, delegateYield: function delegateYield(e, r, n) { return this.delegate = { iterator: values(e), resultName: r, nextLoc: n }, "next" === this.method && (this.arg = t), y; } }, e; }\nfunction asyncGeneratorStep(n, t, e, r, o, a, c) { try { var i = n[a](c), u = i.value; } catch (n) { return void e(n); } i.done ? t(u) : Promise.resolve(u).then(r, o); }\nfunction _asyncToGenerator(n) { return function () { var t = this, e = arguments; return new Promise(function (r, o) { var a = n.apply(t, e); function _next(n) { asyncGeneratorStep(a, r, o, _next, _throw, "next", n); } function _throw(n) { asyncGeneratorStep(a, r, o, _next, _throw, "throw", n); } _next(void 0); }); }; }\nvar _require = __webpack_require__(/*! ../../services/ResponseService */ "./services/ResponseService.js"),\n  Response = _require.Response;\nvar config = __webpack_require__(/*! ../../config.js */ "./config.js");\nvar Review = __webpack_require__(/*! ../models/reviewAndRatingModel */ "./User/models/reviewAndRatingModel.js");\nvar Products = __webpack_require__(/*! ../models/productModel.js */ "./User/models/productModel.js");\nvar getReview = /*#__PURE__*/function () {\n  var _ref = _asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(req, res) {\n    var flag, productId, _req$query, page, size, skip, _error$error_message;\n    return _regeneratorRuntime().wrap(function _callee$(_context) {\n      while (1) switch (_context.prev = _context.next) {\n        case 0:\n          flag = true;\n          _context.prev = 1;\n          productId = req.body.productId;\n          _req$query = req.query, page = _req$query.page, size = _req$query.size;\n          skip = (page - 1) * size;\n          _context.next = 7;\n          return Review.find({\n            productId: productId,\n            status: 1\n          }).populate(\'userId\').skip(skip).limit(size).then(function (review) {\n            if (review.length == 0 || review.length == null) {\n              flag = false;\n              Response(res, 200, config.success_message, "No data found!", null);\n            }\n            var data = {\n              page: page,\n              size: size,\n              totalLength: review.length,\n              review: review\n            };\n            Response(res, 200, config.success_message, null, data);\n          });\n        case 7:\n          _context.next = 12;\n          break;\n        case 9:\n          _context.prev = 9;\n          _context.t0 = _context["catch"](1);\n          flag ? Response(res, 400, config.error_message, (_error$error_message = _context.t0 === null || _context.t0 === void 0 ? void 0 : _context.t0.error_message) !== null && _error$error_message !== void 0 ? _error$error_message : _context.t0, null) : null;\n        case 12:\n        case "end":\n          return _context.stop();\n      }\n    }, _callee, null, [[1, 9]]);\n  }));\n  return function getReview(_x, _x2) {\n    return _ref.apply(this, arguments);\n  };\n}();\nvar createReview = /*#__PURE__*/function () {\n  var _ref2 = _asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(req, res) {\n    var flag, _req$body, productId, rating, reviewText, _id, productDetails, _error$message;\n    return _regeneratorRuntime().wrap(function _callee2$(_context2) {\n      while (1) switch (_context2.prev = _context2.next) {\n        case 0:\n          flag = true;\n          _context2.prev = 1;\n          _req$body = req.body, productId = _req$body.productId, rating = _req$body.rating, reviewText = _req$body.reviewText;\n          _id = req.user._id;\n          _context2.next = 6;\n          return Products.find({\n            _id: productId\n          });\n        case 6:\n          productDetails = _context2.sent;\n          if (productDetails.length == 0 || productDetails.length == null) {\n            flag = false;\n            Response(res, 400, config.error_message, "Product doesn\'t exist", null);\n          }\n          _context2.next = 10;\n          return Review.create({\n            userId: _id,\n            productId: productId,\n            rating: rating,\n            reviewText: reviewText\n          }).then(function () {\n            Response(res, 200, config.success_message, "Review added successfully", null);\n          });\n        case 10:\n          _context2.next = 15;\n          break;\n        case 12:\n          _context2.prev = 12;\n          _context2.t0 = _context2["catch"](1);\n          flag ? Response(res, 400, config.error_message, (_error$message = _context2.t0 === null || _context2.t0 === void 0 ? void 0 : _context2.t0.message) !== null && _error$message !== void 0 ? _error$message : _context2.t0, null) : null;\n        case 15:\n        case "end":\n          return _context2.stop();\n      }\n    }, _callee2, null, [[1, 12]]);\n  }));\n  return function createReview(_x3, _x4) {\n    return _ref2.apply(this, arguments);\n  };\n}();\nvar updateReview = /*#__PURE__*/function () {\n  var _ref3 = _asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee3(req, res) {\n    var flag, _req$body2, reviewId, reviewText, rating, _id, reviewDetails, _error$message2;\n    return _regeneratorRuntime().wrap(function _callee3$(_context3) {\n      while (1) switch (_context3.prev = _context3.next) {\n        case 0:\n          flag = true;\n          _context3.prev = 1;\n          _req$body2 = req.body, reviewId = _req$body2.reviewId, reviewText = _req$body2.reviewText, rating = _req$body2.rating;\n          _id = req.user._id;\n          _context3.next = 6;\n          return Review.find({\n            _id: reviewId,\n            userId: _id\n          });\n        case 6:\n          reviewDetails = _context3.sent;\n          if (!(reviewDetails.length != 0 && reviewDetails.length != null)) {\n            _context3.next = 12;\n            break;\n          }\n          _context3.next = 10;\n          return Review.updateOne({\n            _id: reviewId,\n            userId: _id\n          }, {\n            $set: {\n              reviewText: reviewText,\n              rating: rating\n            }\n          }).then(function () {\n            Response(res, 200, config.success_message, "Review updated successfully", null);\n          });\n        case 10:\n          _context3.next = 14;\n          break;\n        case 12:\n          flag = false;\n          Response(res, 400, config.error_message, "Review doesn\'t exist", null);\n        case 14:\n          _context3.next = 19;\n          break;\n        case 16:\n          _context3.prev = 16;\n          _context3.t0 = _context3["catch"](1);\n          flag ? Response(res, 400, config.error_message, (_error$message2 = _context3.t0 === null || _context3.t0 === void 0 ? void 0 : _context3.t0.message) !== null && _error$message2 !== void 0 ? _error$message2 : _context3.t0, null) : null;\n        case 19:\n        case "end":\n          return _context3.stop();\n      }\n    }, _callee3, null, [[1, 16]]);\n  }));\n  return function updateReview(_x5, _x6) {\n    return _ref3.apply(this, arguments);\n  };\n}();\nvar removeReview = /*#__PURE__*/function () {\n  var _ref4 = _asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee4(req, res) {\n    var flag, reviewId, _id, reviewDetails, _error$message3;\n    return _regeneratorRuntime().wrap(function _callee4$(_context4) {\n      while (1) switch (_context4.prev = _context4.next) {\n        case 0:\n          flag = true;\n          _context4.prev = 1;\n          reviewId = req.body.reviewId;\n          _id = req.user._id;\n          _context4.next = 6;\n          return Review.find({\n            _id: reviewId\n          });\n        case 6:\n          reviewDetails = _context4.sent;\n          if (!(reviewDetails.length != 0 && reviewDetails.length != null)) {\n            _context4.next = 12;\n            break;\n          }\n          _context4.next = 10;\n          return Review.updateOne({\n            _id: reviewId,\n            userId: _id\n          }, {\n            status: 0\n          }).then(function () {\n            flag = false;\n            Response(res, 200, config.success_message, "Review removed successfully", null);\n          });\n        case 10:\n          _context4.next = 13;\n          break;\n        case 12:\n          Response(res, 400, config.error_message, "Review doesn\'t exist", null);\n        case 13:\n          _context4.next = 18;\n          break;\n        case 15:\n          _context4.prev = 15;\n          _context4.t0 = _context4["catch"](1);\n          flag ? Response(res, 400, config.error_message, (_error$message3 = _context4.t0 === null || _context4.t0 === void 0 ? void 0 : _context4.t0.message) !== null && _error$message3 !== void 0 ? _error$message3 : _context4.t0, null) : null;\n        case 18:\n        case "end":\n          return _context4.stop();\n      }\n    }, _callee4, null, [[1, 15]]);\n  }));\n  return function removeReview(_x7, _x8) {\n    return _ref4.apply(this, arguments);\n  };\n}();\nmodule.exports = {\n  getReview: getReview,\n  createReview: createReview,\n  updateReview: updateReview,\n  removeReview: removeReview\n};\n\n//# sourceURL=webpack://profitcart-nodejs/./User/controllers/reviewAndRatingController.js?')},"./User/controllers/stripeController.js":(module,__unused_webpack_exports,__webpack_require__)=>{eval('function _typeof(o) { "@babel/helpers - typeof"; return _typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && "function" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? "symbol" : typeof o; }, _typeof(o); }\nfunction _regeneratorRuntime() { "use strict"; /*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */ _regeneratorRuntime = function _regeneratorRuntime() { return e; }; var t, e = {}, r = Object.prototype, n = r.hasOwnProperty, o = Object.defineProperty || function (t, e, r) { t[e] = r.value; }, i = "function" == typeof Symbol ? Symbol : {}, a = i.iterator || "@@iterator", c = i.asyncIterator || "@@asyncIterator", u = i.toStringTag || "@@toStringTag"; function define(t, e, r) { return Object.defineProperty(t, e, { value: r, enumerable: !0, configurable: !0, writable: !0 }), t[e]; } try { define({}, ""); } catch (t) { define = function define(t, e, r) { return t[e] = r; }; } function wrap(t, e, r, n) { var i = e && e.prototype instanceof Generator ? e : Generator, a = Object.create(i.prototype), c = new Context(n || []); return o(a, "_invoke", { value: makeInvokeMethod(t, r, c) }), a; } function tryCatch(t, e, r) { try { return { type: "normal", arg: t.call(e, r) }; } catch (t) { return { type: "throw", arg: t }; } } e.wrap = wrap; var h = "suspendedStart", l = "suspendedYield", f = "executing", s = "completed", y = {}; function Generator() {} function GeneratorFunction() {} function GeneratorFunctionPrototype() {} var p = {}; define(p, a, function () { return this; }); var d = Object.getPrototypeOf, v = d && d(d(values([]))); v && v !== r && n.call(v, a) && (p = v); var g = GeneratorFunctionPrototype.prototype = Generator.prototype = Object.create(p); function defineIteratorMethods(t) { ["next", "throw", "return"].forEach(function (e) { define(t, e, function (t) { return this._invoke(e, t); }); }); } function AsyncIterator(t, e) { function invoke(r, o, i, a) { var c = tryCatch(t[r], t, o); if ("throw" !== c.type) { var u = c.arg, h = u.value; return h && "object" == _typeof(h) && n.call(h, "__await") ? e.resolve(h.__await).then(function (t) { invoke("next", t, i, a); }, function (t) { invoke("throw", t, i, a); }) : e.resolve(h).then(function (t) { u.value = t, i(u); }, function (t) { return invoke("throw", t, i, a); }); } a(c.arg); } var r; o(this, "_invoke", { value: function value(t, n) { function callInvokeWithMethodAndArg() { return new e(function (e, r) { invoke(t, n, e, r); }); } return r = r ? r.then(callInvokeWithMethodAndArg, callInvokeWithMethodAndArg) : callInvokeWithMethodAndArg(); } }); } function makeInvokeMethod(e, r, n) { var o = h; return function (i, a) { if (o === f) throw Error("Generator is already running"); if (o === s) { if ("throw" === i) throw a; return { value: t, done: !0 }; } for (n.method = i, n.arg = a;;) { var c = n.delegate; if (c) { var u = maybeInvokeDelegate(c, n); if (u) { if (u === y) continue; return u; } } if ("next" === n.method) n.sent = n._sent = n.arg;else if ("throw" === n.method) { if (o === h) throw o = s, n.arg; n.dispatchException(n.arg); } else "return" === n.method && n.abrupt("return", n.arg); o = f; var p = tryCatch(e, r, n); if ("normal" === p.type) { if (o = n.done ? s : l, p.arg === y) continue; return { value: p.arg, done: n.done }; } "throw" === p.type && (o = s, n.method = "throw", n.arg = p.arg); } }; } function maybeInvokeDelegate(e, r) { var n = r.method, o = e.iterator[n]; if (o === t) return r.delegate = null, "throw" === n && e.iterator["return"] && (r.method = "return", r.arg = t, maybeInvokeDelegate(e, r), "throw" === r.method) || "return" !== n && (r.method = "throw", r.arg = new TypeError("The iterator does not provide a \'" + n + "\' method")), y; var i = tryCatch(o, e.iterator, r.arg); if ("throw" === i.type) return r.method = "throw", r.arg = i.arg, r.delegate = null, y; var a = i.arg; return a ? a.done ? (r[e.resultName] = a.value, r.next = e.nextLoc, "return" !== r.method && (r.method = "next", r.arg = t), r.delegate = null, y) : a : (r.method = "throw", r.arg = new TypeError("iterator result is not an object"), r.delegate = null, y); } function pushTryEntry(t) { var e = { tryLoc: t[0] }; 1 in t && (e.catchLoc = t[1]), 2 in t && (e.finallyLoc = t[2], e.afterLoc = t[3]), this.tryEntries.push(e); } function resetTryEntry(t) { var e = t.completion || {}; e.type = "normal", delete e.arg, t.completion = e; } function Context(t) { this.tryEntries = [{ tryLoc: "root" }], t.forEach(pushTryEntry, this), this.reset(!0); } function values(e) { if (e || "" === e) { var r = e[a]; if (r) return r.call(e); if ("function" == typeof e.next) return e; if (!isNaN(e.length)) { var o = -1, i = function next() { for (; ++o < e.length;) if (n.call(e, o)) return next.value = e[o], next.done = !1, next; return next.value = t, next.done = !0, next; }; return i.next = i; } } throw new TypeError(_typeof(e) + " is not iterable"); } return GeneratorFunction.prototype = GeneratorFunctionPrototype, o(g, "constructor", { value: GeneratorFunctionPrototype, configurable: !0 }), o(GeneratorFunctionPrototype, "constructor", { value: GeneratorFunction, configurable: !0 }), GeneratorFunction.displayName = define(GeneratorFunctionPrototype, u, "GeneratorFunction"), e.isGeneratorFunction = function (t) { var e = "function" == typeof t && t.constructor; return !!e && (e === GeneratorFunction || "GeneratorFunction" === (e.displayName || e.name)); }, e.mark = function (t) { return Object.setPrototypeOf ? Object.setPrototypeOf(t, GeneratorFunctionPrototype) : (t.__proto__ = GeneratorFunctionPrototype, define(t, u, "GeneratorFunction")), t.prototype = Object.create(g), t; }, e.awrap = function (t) { return { __await: t }; }, defineIteratorMethods(AsyncIterator.prototype), define(AsyncIterator.prototype, c, function () { return this; }), e.AsyncIterator = AsyncIterator, e.async = function (t, r, n, o, i) { void 0 === i && (i = Promise); var a = new AsyncIterator(wrap(t, r, n, o), i); return e.isGeneratorFunction(r) ? a : a.next().then(function (t) { return t.done ? t.value : a.next(); }); }, defineIteratorMethods(g), define(g, u, "Generator"), define(g, a, function () { return this; }), define(g, "toString", function () { return "[object Generator]"; }), e.keys = function (t) { var e = Object(t), r = []; for (var n in e) r.push(n); return r.reverse(), function next() { for (; r.length;) { var t = r.pop(); if (t in e) return next.value = t, next.done = !1, next; } return next.done = !0, next; }; }, e.values = values, Context.prototype = { constructor: Context, reset: function reset(e) { if (this.prev = 0, this.next = 0, this.sent = this._sent = t, this.done = !1, this.delegate = null, this.method = "next", this.arg = t, this.tryEntries.forEach(resetTryEntry), !e) for (var r in this) "t" === r.charAt(0) && n.call(this, r) && !isNaN(+r.slice(1)) && (this[r] = t); }, stop: function stop() { this.done = !0; var t = this.tryEntries[0].completion; if ("throw" === t.type) throw t.arg; return this.rval; }, dispatchException: function dispatchException(e) { if (this.done) throw e; var r = this; function handle(n, o) { return a.type = "throw", a.arg = e, r.next = n, o && (r.method = "next", r.arg = t), !!o; } for (var o = this.tryEntries.length - 1; o >= 0; --o) { var i = this.tryEntries[o], a = i.completion; if ("root" === i.tryLoc) return handle("end"); if (i.tryLoc <= this.prev) { var c = n.call(i, "catchLoc"), u = n.call(i, "finallyLoc"); if (c && u) { if (this.prev < i.catchLoc) return handle(i.catchLoc, !0); if (this.prev < i.finallyLoc) return handle(i.finallyLoc); } else if (c) { if (this.prev < i.catchLoc) return handle(i.catchLoc, !0); } else { if (!u) throw Error("try statement without catch or finally"); if (this.prev < i.finallyLoc) return handle(i.finallyLoc); } } } }, abrupt: function abrupt(t, e) { for (var r = this.tryEntries.length - 1; r >= 0; --r) { var o = this.tryEntries[r]; if (o.tryLoc <= this.prev && n.call(o, "finallyLoc") && this.prev < o.finallyLoc) { var i = o; break; } } i && ("break" === t || "continue" === t) && i.tryLoc <= e && e <= i.finallyLoc && (i = null); var a = i ? i.completion : {}; return a.type = t, a.arg = e, i ? (this.method = "next", this.next = i.finallyLoc, y) : this.complete(a); }, complete: function complete(t, e) { if ("throw" === t.type) throw t.arg; return "break" === t.type || "continue" === t.type ? this.next = t.arg : "return" === t.type ? (this.rval = this.arg = t.arg, this.method = "return", this.next = "end") : "normal" === t.type && e && (this.next = e), y; }, finish: function finish(t) { for (var e = this.tryEntries.length - 1; e >= 0; --e) { var r = this.tryEntries[e]; if (r.finallyLoc === t) return this.complete(r.completion, r.afterLoc), resetTryEntry(r), y; } }, "catch": function _catch(t) { for (var e = this.tryEntries.length - 1; e >= 0; --e) { var r = this.tryEntries[e]; if (r.tryLoc === t) { var n = r.completion; if ("throw" === n.type) { var o = n.arg; resetTryEntry(r); } return o; } } throw Error("illegal catch attempt"); }, delegateYield: function delegateYield(e, r, n) { return this.delegate = { iterator: values(e), resultName: r, nextLoc: n }, "next" === this.method && (this.arg = t), y; } }, e; }\nfunction asyncGeneratorStep(n, t, e, r, o, a, c) { try { var i = n[a](c), u = i.value; } catch (n) { return void e(n); } i.done ? t(u) : Promise.resolve(u).then(r, o); }\nfunction _asyncToGenerator(n) { return function () { var t = this, e = arguments; return new Promise(function (r, o) { var a = n.apply(t, e); function _next(n) { asyncGeneratorStep(a, r, o, _next, _throw, "next", n); } function _throw(n) { asyncGeneratorStep(a, r, o, _next, _throw, "throw", n); } _next(void 0); }); }; }\nvar _require = __webpack_require__(/*! ../../services/ResponseService.js */ "./services/ResponseService.js"),\n  Response = _require.Response;\nvar config = __webpack_require__(/*! ../../config.js */ "./config.js");\nvar Products = __webpack_require__(/*! ../models/productModel.js */ "./User/models/productModel.js");\nvar User = __webpack_require__(/*! ../models/userModel.js */ "./User/models/userModel.js");\nvar Address = __webpack_require__(/*! ../models/addressModel.js */ "./User/models/addressModel.js");\nvar StripeOrders = __webpack_require__(/*! ../models/stripeOrdersModel.js */ "./User/models/stripeOrdersModel.js");\nvar stripe = __webpack_require__(/*! stripe */ "stripe")(process.env.Stripe_key);\nvar addProduct = /*#__PURE__*/function () {\n  var _ref = _asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(req, res) {\n    var _products$, _products$2, productId, products, productPromise, _error$error_message;\n    return _regeneratorRuntime().wrap(function _callee2$(_context2) {\n      while (1) switch (_context2.prev = _context2.next) {\n        case 0:\n          _context2.prev = 0;\n          productId = req.body.productId;\n          _context2.next = 4;\n          return Products.find({\n            _id: productId\n          });\n        case 4:\n          products = _context2.sent;\n          console.log(products[0].stripeId);\n          if (!(((_products$ = products[0]) === null || _products$ === void 0 ? void 0 : _products$.stripeId) == null || ((_products$2 = products[0]) === null || _products$2 === void 0 ? void 0 : _products$2.stripeId) == undefined)) {\n            _context2.next = 12;\n            break;\n          }\n          productPromise = products.map(/*#__PURE__*/function () {\n            var _ref2 = _asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(product, index) {\n              var price, stripeProduct, prices;\n              return _regeneratorRuntime().wrap(function _callee$(_context) {\n                while (1) switch (_context.prev = _context.next) {\n                  case 0:\n                    if (!product) {\n                      _context.next = 13;\n                      break;\n                    }\n                    price = product.selling_price.split(",").join("");\n                    price = Number(price);\n                    _context.next = 5;\n                    return stripe.products.create({\n                      description: (product === null || product === void 0 ? void 0 : product.description) || "description",\n                      images: product.images.slice(0, 7),\n                      name: (product === null || product === void 0 ? void 0 : product.title) || "title",\n                      shippable: true,\n                      metadata: {\n                        productId: product._id\n                      }\n                    });\n                  case 5:\n                    stripeProduct = _context.sent;\n                    _context.next = 8;\n                    return Products.updateOne({\n                      _id: product._id\n                    }, {\n                      $set: {\n                        stripeId: stripeProduct.id\n                      }\n                    });\n                  case 8:\n                    _context.next = 10;\n                    return stripe.prices.create({\n                      currency: "inr",\n                      unit_amount: price * 100 || 0,\n                      product: stripeProduct.id\n                    });\n                  case 10:\n                    prices = _context.sent;\n                    _context.next = 13;\n                    return stripe.products.update(stripeProduct.id, {\n                      default_price: prices.id\n                    });\n                  case 13:\n                  case "end":\n                    return _context.stop();\n                }\n              }, _callee);\n            }));\n            return function (_x3, _x4) {\n              return _ref2.apply(this, arguments);\n            };\n          }());\n          _context2.next = 10;\n          return Promise.all(productPromise).then(function () {\n            Response(res, 200, config.success_message, "Product added successfully", null);\n          });\n        case 10:\n          _context2.next = 13;\n          break;\n        case 12:\n          Response(res, 200, config.success_message, "Product already exist", null);\n        case 13:\n          _context2.next = 19;\n          break;\n        case 15:\n          _context2.prev = 15;\n          _context2.t0 = _context2["catch"](0);\n          console.log(_context2.t0 === null || _context2.t0 === void 0 ? void 0 : _context2.t0.error_message);\n          Response(res, 400, config.error_message, (_error$error_message = _context2.t0 === null || _context2.t0 === void 0 ? void 0 : _context2.t0.error_message) !== null && _error$error_message !== void 0 ? _error$error_message : _context2.t0, null);\n        case 19:\n        case "end":\n          return _context2.stop();\n      }\n    }, _callee2, null, [[0, 15]]);\n  }));\n  return function addProduct(_x, _x2) {\n    return _ref.apply(this, arguments);\n  };\n}();\nvar retrievePriceDetails = /*#__PURE__*/function () {\n  var _ref3 = _asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee5(req, res) {\n    var _req$body, productIds, type, _id, data, productItems, productPromise, _error$message;\n    return _regeneratorRuntime().wrap(function _callee5$(_context5) {\n      while (1) switch (_context5.prev = _context5.next) {\n        case 0:\n          _context5.prev = 0;\n          _req$body = req.body, productIds = _req$body.productIds, type = _req$body.type;\n          _id = req.user._id;\n          data = [];\n          productItems = [];\n          _context5.next = 7;\n          return StripeOrders.updateOne({\n            userId: _id\n          }, {\n            $pullAll: {\n              items: [],\n              cartProducts: []\n            }\n          });\n        case 7:\n          productPromise = productIds.map(/*#__PURE__*/function () {\n            var _ref4 = _asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee3(item, index) {\n              var productDetails, stripeOrderData, stripeProduct, details, _stripeProduct, prices, _details, _stripeProduct2, _prices, _details2;\n              return _regeneratorRuntime().wrap(function _callee3$(_context3) {\n                while (1) switch (_context3.prev = _context3.next) {\n                  case 0:\n                    _context3.next = 2;\n                    return Products.findOne({\n                      _id: item === null || item === void 0 ? void 0 : item.id\n                    });\n                  case 2:\n                    productDetails = _context3.sent;\n                    stripeOrderData = {\n                      product: item === null || item === void 0 ? void 0 : item.id,\n                      quantity: item === null || item === void 0 ? void 0 : item.quantity\n                    };\n                    if (type == "charge" && index == 0) {\n                      stripeOrderData.price = (item === null || item === void 0 ? void 0 : item.price) - 40;\n                    } else {\n                      stripeOrderData.price = item === null || item === void 0 ? void 0 : item.price;\n                    }\n                    productItems.push(stripeOrderData);\n                    if (!((productDetails === null || productDetails === void 0 ? void 0 : productDetails.stripeId) != null || (productDetails === null || productDetails === void 0 ? void 0 : productDetails.stripeId) != undefined)) {\n                      _context3.next = 27;\n                      break;\n                    }\n                    _context3.next = 9;\n                    return stripe.products.retrieve(productDetails === null || productDetails === void 0 ? void 0 : productDetails.stripeId)["catch"](function (err) {\n                      console.log(err === null || err === void 0 ? void 0 : err.message);\n                    });\n                  case 9:\n                    stripeProduct = _context3.sent;\n                    if (!stripeProduct) {\n                      _context3.next = 15;\n                      break;\n                    }\n                    details = {\n                      price: stripeProduct === null || stripeProduct === void 0 ? void 0 : stripeProduct.default_price,\n                      quantity: item === null || item === void 0 ? void 0 : item.quantity\n                    };\n                    data.push(details);\n                    _context3.next = 25;\n                    break;\n                  case 15:\n                    _context3.next = 17;\n                    return stripe.products.create({\n                      description: (productDetails === null || productDetails === void 0 ? void 0 : productDetails.description) || "description",\n                      images: productDetails.images.slice(0, 7),\n                      name: (productDetails === null || productDetails === void 0 ? void 0 : productDetails.title) || "title",\n                      shippable: true,\n                      metadata: {\n                        productId: productDetails._id\n                      }\n                    });\n                  case 17:\n                    _stripeProduct = _context3.sent;\n                    _context3.next = 20;\n                    return stripe.prices.create({\n                      currency: "inr",\n                      unit_amount: (item === null || item === void 0 ? void 0 : item.price) * 100 || 0,\n                      product: _stripeProduct.id\n                    });\n                  case 20:\n                    prices = _context3.sent;\n                    _context3.next = 23;\n                    return stripe.products.update(_stripeProduct.id, {\n                      default_price: prices.id\n                    });\n                  case 23:\n                    _details = {\n                      price: prices.id,\n                      quantity: item.quantity\n                    };\n                    data.push(_details);\n                  case 25:\n                    _context3.next = 38;\n                    break;\n                  case 27:\n                    if (!productDetails) {\n                      _context3.next = 38;\n                      break;\n                    }\n                    _context3.next = 30;\n                    return stripe.products.create({\n                      description: (productDetails === null || productDetails === void 0 ? void 0 : productDetails.description) || "description",\n                      images: productDetails.images.slice(0, 7),\n                      name: (productDetails === null || productDetails === void 0 ? void 0 : productDetails.title) || "title",\n                      shippable: true,\n                      metadata: {\n                        productId: productDetails._id\n                      }\n                    });\n                  case 30:\n                    _stripeProduct2 = _context3.sent;\n                    _context3.next = 33;\n                    return stripe.prices.create({\n                      currency: "inr",\n                      unit_amount: (item === null || item === void 0 ? void 0 : item.price) * 100 || 0,\n                      product: _stripeProduct2.id\n                    });\n                  case 33:\n                    _prices = _context3.sent;\n                    _context3.next = 36;\n                    return stripe.products.update(_stripeProduct2.id, {\n                      default_price: _prices.id\n                    });\n                  case 36:\n                    _details2 = {\n                      price: _prices.id,\n                      quantity: item.quantity\n                    };\n                    data.push(_details2);\n                  case 38:\n                  case "end":\n                    return _context3.stop();\n                }\n              }, _callee3);\n            }));\n            return function (_x7, _x8) {\n              return _ref4.apply(this, arguments);\n            };\n          }());\n          _context5.next = 10;\n          return Promise.all(productPromise).then(/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee4() {\n            var getStripeOrders;\n            return _regeneratorRuntime().wrap(function _callee4$(_context4) {\n              while (1) switch (_context4.prev = _context4.next) {\n                case 0:\n                  _context4.next = 2;\n                  return StripeOrders.findOne({\n                    userId: _id\n                  });\n                case 2:\n                  getStripeOrders = _context4.sent;\n                  if (!getStripeOrders) {\n                    _context4.next = 8;\n                    break;\n                  }\n                  _context4.next = 6;\n                  return StripeOrders.updateOne({\n                    userId: _id\n                  }, {\n                    items: productItems\n                  }).then(function () {\n                    Response(res, 200, config.success_message, null, data);\n                  });\n                case 6:\n                  _context4.next = 10;\n                  break;\n                case 8:\n                  _context4.next = 10;\n                  return StripeOrders.create({\n                    userId: _id,\n                    items: productItems\n                  }).then(function () {\n                    Response(res, 200, config.success_message, null, data);\n                  });\n                case 10:\n                case "end":\n                  return _context4.stop();\n              }\n            }, _callee4);\n          })));\n        case 10:\n          _context5.next = 16;\n          break;\n        case 12:\n          _context5.prev = 12;\n          _context5.t0 = _context5["catch"](0);\n          console.log(_context5.t0);\n          Response(res, 400, config.error_message, (_error$message = _context5.t0 === null || _context5.t0 === void 0 ? void 0 : _context5.t0.message) !== null && _error$message !== void 0 ? _error$message : _context5.t0, null);\n        case 16:\n        case "end":\n          return _context5.stop();\n      }\n    }, _callee5, null, [[0, 12]]);\n  }));\n  return function retrievePriceDetails(_x5, _x6) {\n    return _ref3.apply(this, arguments);\n  };\n}();\nvar createSession = /*#__PURE__*/function () {\n  var _ref6 = _asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee6(req, res) {\n    var _req$body3, _req$body2, pricingDetails, addressId, cartProducts, _req$user, _id, email, name, stripeCustomerId, addressDetails, city, country, postalCode, state, firstLine, stripeOrders, session, customer, _session, _error$message2;\n    return _regeneratorRuntime().wrap(function _callee6$(_context6) {\n      while (1) switch (_context6.prev = _context6.next) {\n        case 0:\n          _context6.prev = 0;\n          _req$body2 = req.body, pricingDetails = _req$body2.pricingDetails, addressId = _req$body2.addressId, cartProducts = _req$body2.cartProducts;\n          _req$user = req.user, _id = _req$user._id, email = _req$user.email, name = _req$user.name, stripeCustomerId = _req$user.stripeCustomerId;\n          (_req$body3 = req.body) !== null && _req$body3 !== void 0 && _req$body3.addressId ? null : Response(res, 400, config.error_message, "Please add or select address", null);\n          _context6.next = 6;\n          return Address.findOne({\n            _id: addressId,\n            userId: _id\n          });\n        case 6:\n          addressDetails = _context6.sent;\n          city = addressDetails.city, country = addressDetails.country, postalCode = addressDetails.postalCode, state = addressDetails.state, firstLine = addressDetails.firstLine;\n          _context6.next = 10;\n          return StripeOrders.findOne({\n            userId: _id\n          });\n        case 10:\n          stripeOrders = _context6.sent;\n          _context6.next = 13;\n          return StripeOrders.updateOne({\n            _id: stripeOrders._id\n          }, {\n            addressId: addressId,\n            cartProducts: cartProducts\n          });\n        case 13:\n          if (!stripeCustomerId) {\n            _context6.next = 20;\n            break;\n          }\n          _context6.next = 16;\n          return stripe.checkout.sessions.create({\n            line_items: pricingDetails,\n            customer: stripeCustomerId,\n            mode: "payment",\n            success_url: "".concat(process.env.domain, "/payment/success?id=").concat(stripeOrders._id),\n            cancel_url: "".concat(process.env.domain, "/payment/failed")\n          });\n        case 16:\n          session = _context6.sent;\n          Response(res, 200, config.success_message, null, session);\n          _context6.next = 29;\n          break;\n        case 20:\n          _context6.next = 22;\n          return stripe.customers.create({\n            name: name,\n            email: email,\n            address: {\n              line1: firstLine,\n              postal_code: postalCode,\n              city: city,\n              state: state,\n              country: country\n            }\n          });\n        case 22:\n          customer = _context6.sent;\n          _context6.next = 25;\n          return User.updateOne({\n            _id: _id\n          }, {\n            $set: {\n              stripeCustomerId: customer.id\n            }\n          });\n        case 25:\n          _context6.next = 27;\n          return stripe.checkout.sessions.create({\n            line_items: pricingDetails,\n            customer: customer.id,\n            mode: "payment",\n            success_url: "".concat(process.env.domain, "/payment/success?id=").concat(stripeOrders._id),\n            cancel_url: "".concat(process.env.domain, "/payment/failed")\n          });\n        case 27:\n          _session = _context6.sent;\n          Response(res, 200, config.success_message, null, _session);\n        case 29:\n          _context6.next = 34;\n          break;\n        case 31:\n          _context6.prev = 31;\n          _context6.t0 = _context6["catch"](0);\n          Response(res, 400, config.error_message, (_error$message2 = _context6.t0 === null || _context6.t0 === void 0 ? void 0 : _context6.t0.message) !== null && _error$message2 !== void 0 ? _error$message2 : _context6.t0, null);\n        case 34:\n        case "end":\n          return _context6.stop();\n      }\n    }, _callee6, null, [[0, 31]]);\n  }));\n  return function createSession(_x9, _x10) {\n    return _ref6.apply(this, arguments);\n  };\n}();\nmodule.exports = {\n  addProduct: addProduct,\n  retrievePriceDetails: retrievePriceDetails,\n  createSession: createSession\n};\n\n//# sourceURL=webpack://profitcart-nodejs/./User/controllers/stripeController.js?')},"./User/controllers/userController.js":(module,__unused_webpack_exports,__webpack_require__)=>{eval('function _typeof(o) { "@babel/helpers - typeof"; return _typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && "function" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? "symbol" : typeof o; }, _typeof(o); }\nfunction _regeneratorRuntime() { "use strict"; /*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */ _regeneratorRuntime = function _regeneratorRuntime() { return e; }; var t, e = {}, r = Object.prototype, n = r.hasOwnProperty, o = Object.defineProperty || function (t, e, r) { t[e] = r.value; }, i = "function" == typeof Symbol ? Symbol : {}, a = i.iterator || "@@iterator", c = i.asyncIterator || "@@asyncIterator", u = i.toStringTag || "@@toStringTag"; function define(t, e, r) { return Object.defineProperty(t, e, { value: r, enumerable: !0, configurable: !0, writable: !0 }), t[e]; } try { define({}, ""); } catch (t) { define = function define(t, e, r) { return t[e] = r; }; } function wrap(t, e, r, n) { var i = e && e.prototype instanceof Generator ? e : Generator, a = Object.create(i.prototype), c = new Context(n || []); return o(a, "_invoke", { value: makeInvokeMethod(t, r, c) }), a; } function tryCatch(t, e, r) { try { return { type: "normal", arg: t.call(e, r) }; } catch (t) { return { type: "throw", arg: t }; } } e.wrap = wrap; var h = "suspendedStart", l = "suspendedYield", f = "executing", s = "completed", y = {}; function Generator() {} function GeneratorFunction() {} function GeneratorFunctionPrototype() {} var p = {}; define(p, a, function () { return this; }); var d = Object.getPrototypeOf, v = d && d(d(values([]))); v && v !== r && n.call(v, a) && (p = v); var g = GeneratorFunctionPrototype.prototype = Generator.prototype = Object.create(p); function defineIteratorMethods(t) { ["next", "throw", "return"].forEach(function (e) { define(t, e, function (t) { return this._invoke(e, t); }); }); } function AsyncIterator(t, e) { function invoke(r, o, i, a) { var c = tryCatch(t[r], t, o); if ("throw" !== c.type) { var u = c.arg, h = u.value; return h && "object" == _typeof(h) && n.call(h, "__await") ? e.resolve(h.__await).then(function (t) { invoke("next", t, i, a); }, function (t) { invoke("throw", t, i, a); }) : e.resolve(h).then(function (t) { u.value = t, i(u); }, function (t) { return invoke("throw", t, i, a); }); } a(c.arg); } var r; o(this, "_invoke", { value: function value(t, n) { function callInvokeWithMethodAndArg() { return new e(function (e, r) { invoke(t, n, e, r); }); } return r = r ? r.then(callInvokeWithMethodAndArg, callInvokeWithMethodAndArg) : callInvokeWithMethodAndArg(); } }); } function makeInvokeMethod(e, r, n) { var o = h; return function (i, a) { if (o === f) throw Error("Generator is already running"); if (o === s) { if ("throw" === i) throw a; return { value: t, done: !0 }; } for (n.method = i, n.arg = a;;) { var c = n.delegate; if (c) { var u = maybeInvokeDelegate(c, n); if (u) { if (u === y) continue; return u; } } if ("next" === n.method) n.sent = n._sent = n.arg;else if ("throw" === n.method) { if (o === h) throw o = s, n.arg; n.dispatchException(n.arg); } else "return" === n.method && n.abrupt("return", n.arg); o = f; var p = tryCatch(e, r, n); if ("normal" === p.type) { if (o = n.done ? s : l, p.arg === y) continue; return { value: p.arg, done: n.done }; } "throw" === p.type && (o = s, n.method = "throw", n.arg = p.arg); } }; } function maybeInvokeDelegate(e, r) { var n = r.method, o = e.iterator[n]; if (o === t) return r.delegate = null, "throw" === n && e.iterator["return"] && (r.method = "return", r.arg = t, maybeInvokeDelegate(e, r), "throw" === r.method) || "return" !== n && (r.method = "throw", r.arg = new TypeError("The iterator does not provide a \'" + n + "\' method")), y; var i = tryCatch(o, e.iterator, r.arg); if ("throw" === i.type) return r.method = "throw", r.arg = i.arg, r.delegate = null, y; var a = i.arg; return a ? a.done ? (r[e.resultName] = a.value, r.next = e.nextLoc, "return" !== r.method && (r.method = "next", r.arg = t), r.delegate = null, y) : a : (r.method = "throw", r.arg = new TypeError("iterator result is not an object"), r.delegate = null, y); } function pushTryEntry(t) { var e = { tryLoc: t[0] }; 1 in t && (e.catchLoc = t[1]), 2 in t && (e.finallyLoc = t[2], e.afterLoc = t[3]), this.tryEntries.push(e); } function resetTryEntry(t) { var e = t.completion || {}; e.type = "normal", delete e.arg, t.completion = e; } function Context(t) { this.tryEntries = [{ tryLoc: "root" }], t.forEach(pushTryEntry, this), this.reset(!0); } function values(e) { if (e || "" === e) { var r = e[a]; if (r) return r.call(e); if ("function" == typeof e.next) return e; if (!isNaN(e.length)) { var o = -1, i = function next() { for (; ++o < e.length;) if (n.call(e, o)) return next.value = e[o], next.done = !1, next; return next.value = t, next.done = !0, next; }; return i.next = i; } } throw new TypeError(_typeof(e) + " is not iterable"); } return GeneratorFunction.prototype = GeneratorFunctionPrototype, o(g, "constructor", { value: GeneratorFunctionPrototype, configurable: !0 }), o(GeneratorFunctionPrototype, "constructor", { value: GeneratorFunction, configurable: !0 }), GeneratorFunction.displayName = define(GeneratorFunctionPrototype, u, "GeneratorFunction"), e.isGeneratorFunction = function (t) { var e = "function" == typeof t && t.constructor; return !!e && (e === GeneratorFunction || "GeneratorFunction" === (e.displayName || e.name)); }, e.mark = function (t) { return Object.setPrototypeOf ? Object.setPrototypeOf(t, GeneratorFunctionPrototype) : (t.__proto__ = GeneratorFunctionPrototype, define(t, u, "GeneratorFunction")), t.prototype = Object.create(g), t; }, e.awrap = function (t) { return { __await: t }; }, defineIteratorMethods(AsyncIterator.prototype), define(AsyncIterator.prototype, c, function () { return this; }), e.AsyncIterator = AsyncIterator, e.async = function (t, r, n, o, i) { void 0 === i && (i = Promise); var a = new AsyncIterator(wrap(t, r, n, o), i); return e.isGeneratorFunction(r) ? a : a.next().then(function (t) { return t.done ? t.value : a.next(); }); }, defineIteratorMethods(g), define(g, u, "Generator"), define(g, a, function () { return this; }), define(g, "toString", function () { return "[object Generator]"; }), e.keys = function (t) { var e = Object(t), r = []; for (var n in e) r.push(n); return r.reverse(), function next() { for (; r.length;) { var t = r.pop(); if (t in e) return next.value = t, next.done = !1, next; } return next.done = !0, next; }; }, e.values = values, Context.prototype = { constructor: Context, reset: function reset(e) { if (this.prev = 0, this.next = 0, this.sent = this._sent = t, this.done = !1, this.delegate = null, this.method = "next", this.arg = t, this.tryEntries.forEach(resetTryEntry), !e) for (var r in this) "t" === r.charAt(0) && n.call(this, r) && !isNaN(+r.slice(1)) && (this[r] = t); }, stop: function stop() { this.done = !0; var t = this.tryEntries[0].completion; if ("throw" === t.type) throw t.arg; return this.rval; }, dispatchException: function dispatchException(e) { if (this.done) throw e; var r = this; function handle(n, o) { return a.type = "throw", a.arg = e, r.next = n, o && (r.method = "next", r.arg = t), !!o; } for (var o = this.tryEntries.length - 1; o >= 0; --o) { var i = this.tryEntries[o], a = i.completion; if ("root" === i.tryLoc) return handle("end"); if (i.tryLoc <= this.prev) { var c = n.call(i, "catchLoc"), u = n.call(i, "finallyLoc"); if (c && u) { if (this.prev < i.catchLoc) return handle(i.catchLoc, !0); if (this.prev < i.finallyLoc) return handle(i.finallyLoc); } else if (c) { if (this.prev < i.catchLoc) return handle(i.catchLoc, !0); } else { if (!u) throw Error("try statement without catch or finally"); if (this.prev < i.finallyLoc) return handle(i.finallyLoc); } } } }, abrupt: function abrupt(t, e) { for (var r = this.tryEntries.length - 1; r >= 0; --r) { var o = this.tryEntries[r]; if (o.tryLoc <= this.prev && n.call(o, "finallyLoc") && this.prev < o.finallyLoc) { var i = o; break; } } i && ("break" === t || "continue" === t) && i.tryLoc <= e && e <= i.finallyLoc && (i = null); var a = i ? i.completion : {}; return a.type = t, a.arg = e, i ? (this.method = "next", this.next = i.finallyLoc, y) : this.complete(a); }, complete: function complete(t, e) { if ("throw" === t.type) throw t.arg; return "break" === t.type || "continue" === t.type ? this.next = t.arg : "return" === t.type ? (this.rval = this.arg = t.arg, this.method = "return", this.next = "end") : "normal" === t.type && e && (this.next = e), y; }, finish: function finish(t) { for (var e = this.tryEntries.length - 1; e >= 0; --e) { var r = this.tryEntries[e]; if (r.finallyLoc === t) return this.complete(r.completion, r.afterLoc), resetTryEntry(r), y; } }, "catch": function _catch(t) { for (var e = this.tryEntries.length - 1; e >= 0; --e) { var r = this.tryEntries[e]; if (r.tryLoc === t) { var n = r.completion; if ("throw" === n.type) { var o = n.arg; resetTryEntry(r); } return o; } } throw Error("illegal catch attempt"); }, delegateYield: function delegateYield(e, r, n) { return this.delegate = { iterator: values(e), resultName: r, nextLoc: n }, "next" === this.method && (this.arg = t), y; } }, e; }\nfunction asyncGeneratorStep(n, t, e, r, o, a, c) { try { var i = n[a](c), u = i.value; } catch (n) { return void e(n); } i.done ? t(u) : Promise.resolve(u).then(r, o); }\nfunction _asyncToGenerator(n) { return function () { var t = this, e = arguments; return new Promise(function (r, o) { var a = n.apply(t, e); function _next(n) { asyncGeneratorStep(a, r, o, _next, _throw, "next", n); } function _throw(n) { asyncGeneratorStep(a, r, o, _next, _throw, "throw", n); } _next(void 0); }); }; }\nvar _require = __webpack_require__(/*! ../../services/ResponseService */ "./services/ResponseService.js"),\n  Response = _require.Response;\nvar User = __webpack_require__(/*! ../models/userModel.js */ "./User/models/userModel.js");\nvar bcrypt = __webpack_require__(/*! bcrypt */ "bcrypt");\nvar config = __webpack_require__(/*! ../../config.js */ "./config.js");\nvar jwt = __webpack_require__(/*! jsonwebtoken */ "jsonwebtoken");\nvar Wishlist = __webpack_require__(/*! ../models/wishlistModel.js */ "./User/models/wishlistModel.js");\nvar login = /*#__PURE__*/function () {\n  var _ref = _asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(req, res) {\n    var _req$body, email, password, userDetails, match, jwtToken, _error$message;\n    return _regeneratorRuntime().wrap(function _callee$(_context) {\n      while (1) switch (_context.prev = _context.next) {\n        case 0:\n          _context.prev = 0;\n          _req$body = req.body, email = _req$body.email, password = _req$body.password;\n          _context.next = 4;\n          return User.findOne({\n            email: email\n          });\n        case 4:\n          userDetails = _context.sent;\n          if (!userDetails) {\n            _context.next = 27;\n            break;\n          }\n          _context.next = 8;\n          return bcrypt.compare(password, userDetails.password);\n        case 8:\n          match = _context.sent;\n          if (!match) {\n            _context.next = 24;\n            break;\n          }\n          _context.next = 12;\n          return jwt.sign({\n            userId: userDetails._id,\n            email: userDetails.email\n          }, process.env.security_key, {\n            expiresIn: \'30d\'\n          });\n        case 12:\n          jwtToken = _context.sent;\n          _context.next = 15;\n          return User.findOneAndUpdate({\n            _id: userDetails._id\n          }, {\n            token: jwtToken\n          });\n        case 15:\n          _context.t0 = Response;\n          _context.t1 = res;\n          _context.t2 = config.success_message;\n          _context.next = 20;\n          return User.findOne({\n            _id: userDetails._id\n          });\n        case 20:\n          _context.t3 = _context.sent;\n          (0, _context.t0)(_context.t1, 200, _context.t2, "Login successfull", _context.t3);\n          _context.next = 25;\n          break;\n        case 24:\n          Response(res, 400, config.error_message, "Password doesn\'t match", null);\n        case 25:\n          _context.next = 28;\n          break;\n        case 27:\n          Response(res, 400, config.error_message, "User doesn\'t exist!");\n        case 28:\n          _context.next = 34;\n          break;\n        case 30:\n          _context.prev = 30;\n          _context.t4 = _context["catch"](0);\n          console.log(_context.t4);\n          Response(res, 400, config.error_message, (_error$message = _context.t4 === null || _context.t4 === void 0 ? void 0 : _context.t4.message) !== null && _error$message !== void 0 ? _error$message : _context.t4, null);\n        case 34:\n        case "end":\n          return _context.stop();\n      }\n    }, _callee, null, [[0, 30]]);\n  }));\n  return function login(_x, _x2) {\n    return _ref.apply(this, arguments);\n  };\n}();\nvar register = /*#__PURE__*/function () {\n  var _ref2 = _asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(req, res) {\n    var _req$body2, name, email, password, userRole, userDetails, user, _error$message2;\n    return _regeneratorRuntime().wrap(function _callee2$(_context2) {\n      while (1) switch (_context2.prev = _context2.next) {\n        case 0:\n          _context2.prev = 0;\n          _req$body2 = req.body, name = _req$body2.name, email = _req$body2.email, password = _req$body2.password, userRole = _req$body2.userRole;\n          _context2.next = 4;\n          return User.findOne({\n            email: email\n          });\n        case 4:\n          userDetails = _context2.sent;\n          console.log(userDetails);\n          if (userDetails) {\n            _context2.next = 23;\n            break;\n          }\n          _context2.t0 = User;\n          _context2.t1 = name;\n          _context2.t2 = email;\n          _context2.next = 12;\n          return bcrypt.hash(password, 10);\n        case 12:\n          _context2.t3 = _context2.sent;\n          _context2.t4 = userRole;\n          _context2.t5 = {\n            name: _context2.t1,\n            email: _context2.t2,\n            password: _context2.t3,\n            userRole: _context2.t4\n          };\n          _context2.next = 17;\n          return _context2.t0.create.call(_context2.t0, _context2.t5);\n        case 17:\n          user = _context2.sent;\n          _context2.next = 20;\n          return Wishlist.create({\n            name: "General",\n            userId: user._id\n          });\n        case 20:\n          Response(res, 200, config.success_message, "Registered successfully!", null);\n          _context2.next = 24;\n          break;\n        case 23:\n          Response(res, 400, config.error_message, "User already exist!", null);\n        case 24:\n          _context2.next = 30;\n          break;\n        case 26:\n          _context2.prev = 26;\n          _context2.t6 = _context2["catch"](0);\n          console.log(_context2.t6);\n          Response(res, 400, config.error_message, (_error$message2 = _context2.t6 === null || _context2.t6 === void 0 ? void 0 : _context2.t6.message) !== null && _error$message2 !== void 0 ? _error$message2 : _context2.t6, null);\n        case 30:\n        case "end":\n          return _context2.stop();\n      }\n    }, _callee2, null, [[0, 26]]);\n  }));\n  return function register(_x3, _x4) {\n    return _ref2.apply(this, arguments);\n  };\n}();\nvar userProfileDetails = /*#__PURE__*/function () {\n  var _ref3 = _asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee3(req, res) {\n    var _error$message3;\n    return _regeneratorRuntime().wrap(function _callee3$(_context3) {\n      while (1) switch (_context3.prev = _context3.next) {\n        case 0:\n          try {\n            Response(res, 200, config.success_message, null, req.user);\n          } catch (error) {\n            Response(res, 400, config.error_message, (_error$message3 = error === null || error === void 0 ? void 0 : error.message) !== null && _error$message3 !== void 0 ? _error$message3 : error, null);\n          }\n        case 1:\n        case "end":\n          return _context3.stop();\n      }\n    }, _callee3);\n  }));\n  return function userProfileDetails(_x5, _x6) {\n    return _ref3.apply(this, arguments);\n  };\n}();\nvar updateUserRole = /*#__PURE__*/function () {\n  var _ref4 = _asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee4(req, res) {\n    var reqBody, _id, _error$message4;\n    return _regeneratorRuntime().wrap(function _callee4$(_context4) {\n      while (1) switch (_context4.prev = _context4.next) {\n        case 0:\n          _context4.prev = 0;\n          reqBody = req === null || req === void 0 ? void 0 : req.body;\n          _id = req.user._id;\n          if (!((reqBody === null || reqBody === void 0 ? void 0 : reqBody.userRole) == "seller" && reqBody !== null && reqBody !== void 0 && reqBody.shopAddress && reqBody !== null && reqBody !== void 0 && reqBody.shopName && reqBody !== null && reqBody !== void 0 && reqBody.shopMobileNumber)) {\n            _context4.next = 7;\n            break;\n          }\n          _context4.next = 6;\n          return User.update({\n            _id: _id\n          }, {\n            userRole: reqBody.userRole,\n            shopName: reqBody.shopName,\n            shopAddress: reqBody.shopAddress,\n            shopMobileNumber: reqBody.shopMobileNumber\n          });\n        case 6:\n          Response(res, 200, config.success_message, "Congratulations!,Now you are eligible for seller", null);\n        case 7:\n          Response(res, 400, config.error_message, "Invalid data", null);\n          _context4.next = 13;\n          break;\n        case 10:\n          _context4.prev = 10;\n          _context4.t0 = _context4["catch"](0);\n          Response(res, 400, config.error_message, (_error$message4 = _context4.t0 === null || _context4.t0 === void 0 ? void 0 : _context4.t0.message) !== null && _error$message4 !== void 0 ? _error$message4 : _context4.t0, null);\n        case 13:\n        case "end":\n          return _context4.stop();\n      }\n    }, _callee4, null, [[0, 10]]);\n  }));\n  return function updateUserRole(_x7, _x8) {\n    return _ref4.apply(this, arguments);\n  };\n}();\nmodule.exports = {\n  login: login,\n  register: register,\n  userProfileDetails: userProfileDetails\n};\n\n//# sourceURL=webpack://profitcart-nodejs/./User/controllers/userController.js?')},"./User/controllers/webhookController.js":(module,__unused_webpack_exports,__webpack_require__)=>{eval('function _typeof(o) { "@babel/helpers - typeof"; return _typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && "function" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? "symbol" : typeof o; }, _typeof(o); }\nfunction _regeneratorRuntime() { "use strict"; /*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */ _regeneratorRuntime = function _regeneratorRuntime() { return e; }; var t, e = {}, r = Object.prototype, n = r.hasOwnProperty, o = Object.defineProperty || function (t, e, r) { t[e] = r.value; }, i = "function" == typeof Symbol ? Symbol : {}, a = i.iterator || "@@iterator", c = i.asyncIterator || "@@asyncIterator", u = i.toStringTag || "@@toStringTag"; function define(t, e, r) { return Object.defineProperty(t, e, { value: r, enumerable: !0, configurable: !0, writable: !0 }), t[e]; } try { define({}, ""); } catch (t) { define = function define(t, e, r) { return t[e] = r; }; } function wrap(t, e, r, n) { var i = e && e.prototype instanceof Generator ? e : Generator, a = Object.create(i.prototype), c = new Context(n || []); return o(a, "_invoke", { value: makeInvokeMethod(t, r, c) }), a; } function tryCatch(t, e, r) { try { return { type: "normal", arg: t.call(e, r) }; } catch (t) { return { type: "throw", arg: t }; } } e.wrap = wrap; var h = "suspendedStart", l = "suspendedYield", f = "executing", s = "completed", y = {}; function Generator() {} function GeneratorFunction() {} function GeneratorFunctionPrototype() {} var p = {}; define(p, a, function () { return this; }); var d = Object.getPrototypeOf, v = d && d(d(values([]))); v && v !== r && n.call(v, a) && (p = v); var g = GeneratorFunctionPrototype.prototype = Generator.prototype = Object.create(p); function defineIteratorMethods(t) { ["next", "throw", "return"].forEach(function (e) { define(t, e, function (t) { return this._invoke(e, t); }); }); } function AsyncIterator(t, e) { function invoke(r, o, i, a) { var c = tryCatch(t[r], t, o); if ("throw" !== c.type) { var u = c.arg, h = u.value; return h && "object" == _typeof(h) && n.call(h, "__await") ? e.resolve(h.__await).then(function (t) { invoke("next", t, i, a); }, function (t) { invoke("throw", t, i, a); }) : e.resolve(h).then(function (t) { u.value = t, i(u); }, function (t) { return invoke("throw", t, i, a); }); } a(c.arg); } var r; o(this, "_invoke", { value: function value(t, n) { function callInvokeWithMethodAndArg() { return new e(function (e, r) { invoke(t, n, e, r); }); } return r = r ? r.then(callInvokeWithMethodAndArg, callInvokeWithMethodAndArg) : callInvokeWithMethodAndArg(); } }); } function makeInvokeMethod(e, r, n) { var o = h; return function (i, a) { if (o === f) throw Error("Generator is already running"); if (o === s) { if ("throw" === i) throw a; return { value: t, done: !0 }; } for (n.method = i, n.arg = a;;) { var c = n.delegate; if (c) { var u = maybeInvokeDelegate(c, n); if (u) { if (u === y) continue; return u; } } if ("next" === n.method) n.sent = n._sent = n.arg;else if ("throw" === n.method) { if (o === h) throw o = s, n.arg; n.dispatchException(n.arg); } else "return" === n.method && n.abrupt("return", n.arg); o = f; var p = tryCatch(e, r, n); if ("normal" === p.type) { if (o = n.done ? s : l, p.arg === y) continue; return { value: p.arg, done: n.done }; } "throw" === p.type && (o = s, n.method = "throw", n.arg = p.arg); } }; } function maybeInvokeDelegate(e, r) { var n = r.method, o = e.iterator[n]; if (o === t) return r.delegate = null, "throw" === n && e.iterator["return"] && (r.method = "return", r.arg = t, maybeInvokeDelegate(e, r), "throw" === r.method) || "return" !== n && (r.method = "throw", r.arg = new TypeError("The iterator does not provide a \'" + n + "\' method")), y; var i = tryCatch(o, e.iterator, r.arg); if ("throw" === i.type) return r.method = "throw", r.arg = i.arg, r.delegate = null, y; var a = i.arg; return a ? a.done ? (r[e.resultName] = a.value, r.next = e.nextLoc, "return" !== r.method && (r.method = "next", r.arg = t), r.delegate = null, y) : a : (r.method = "throw", r.arg = new TypeError("iterator result is not an object"), r.delegate = null, y); } function pushTryEntry(t) { var e = { tryLoc: t[0] }; 1 in t && (e.catchLoc = t[1]), 2 in t && (e.finallyLoc = t[2], e.afterLoc = t[3]), this.tryEntries.push(e); } function resetTryEntry(t) { var e = t.completion || {}; e.type = "normal", delete e.arg, t.completion = e; } function Context(t) { this.tryEntries = [{ tryLoc: "root" }], t.forEach(pushTryEntry, this), this.reset(!0); } function values(e) { if (e || "" === e) { var r = e[a]; if (r) return r.call(e); if ("function" == typeof e.next) return e; if (!isNaN(e.length)) { var o = -1, i = function next() { for (; ++o < e.length;) if (n.call(e, o)) return next.value = e[o], next.done = !1, next; return next.value = t, next.done = !0, next; }; return i.next = i; } } throw new TypeError(_typeof(e) + " is not iterable"); } return GeneratorFunction.prototype = GeneratorFunctionPrototype, o(g, "constructor", { value: GeneratorFunctionPrototype, configurable: !0 }), o(GeneratorFunctionPrototype, "constructor", { value: GeneratorFunction, configurable: !0 }), GeneratorFunction.displayName = define(GeneratorFunctionPrototype, u, "GeneratorFunction"), e.isGeneratorFunction = function (t) { var e = "function" == typeof t && t.constructor; return !!e && (e === GeneratorFunction || "GeneratorFunction" === (e.displayName || e.name)); }, e.mark = function (t) { return Object.setPrototypeOf ? Object.setPrototypeOf(t, GeneratorFunctionPrototype) : (t.__proto__ = GeneratorFunctionPrototype, define(t, u, "GeneratorFunction")), t.prototype = Object.create(g), t; }, e.awrap = function (t) { return { __await: t }; }, defineIteratorMethods(AsyncIterator.prototype), define(AsyncIterator.prototype, c, function () { return this; }), e.AsyncIterator = AsyncIterator, e.async = function (t, r, n, o, i) { void 0 === i && (i = Promise); var a = new AsyncIterator(wrap(t, r, n, o), i); return e.isGeneratorFunction(r) ? a : a.next().then(function (t) { return t.done ? t.value : a.next(); }); }, defineIteratorMethods(g), define(g, u, "Generator"), define(g, a, function () { return this; }), define(g, "toString", function () { return "[object Generator]"; }), e.keys = function (t) { var e = Object(t), r = []; for (var n in e) r.push(n); return r.reverse(), function next() { for (; r.length;) { var t = r.pop(); if (t in e) return next.value = t, next.done = !1, next; } return next.done = !0, next; }; }, e.values = values, Context.prototype = { constructor: Context, reset: function reset(e) { if (this.prev = 0, this.next = 0, this.sent = this._sent = t, this.done = !1, this.delegate = null, this.method = "next", this.arg = t, this.tryEntries.forEach(resetTryEntry), !e) for (var r in this) "t" === r.charAt(0) && n.call(this, r) && !isNaN(+r.slice(1)) && (this[r] = t); }, stop: function stop() { this.done = !0; var t = this.tryEntries[0].completion; if ("throw" === t.type) throw t.arg; return this.rval; }, dispatchException: function dispatchException(e) { if (this.done) throw e; var r = this; function handle(n, o) { return a.type = "throw", a.arg = e, r.next = n, o && (r.method = "next", r.arg = t), !!o; } for (var o = this.tryEntries.length - 1; o >= 0; --o) { var i = this.tryEntries[o], a = i.completion; if ("root" === i.tryLoc) return handle("end"); if (i.tryLoc <= this.prev) { var c = n.call(i, "catchLoc"), u = n.call(i, "finallyLoc"); if (c && u) { if (this.prev < i.catchLoc) return handle(i.catchLoc, !0); if (this.prev < i.finallyLoc) return handle(i.finallyLoc); } else if (c) { if (this.prev < i.catchLoc) return handle(i.catchLoc, !0); } else { if (!u) throw Error("try statement without catch or finally"); if (this.prev < i.finallyLoc) return handle(i.finallyLoc); } } } }, abrupt: function abrupt(t, e) { for (var r = this.tryEntries.length - 1; r >= 0; --r) { var o = this.tryEntries[r]; if (o.tryLoc <= this.prev && n.call(o, "finallyLoc") && this.prev < o.finallyLoc) { var i = o; break; } } i && ("break" === t || "continue" === t) && i.tryLoc <= e && e <= i.finallyLoc && (i = null); var a = i ? i.completion : {}; return a.type = t, a.arg = e, i ? (this.method = "next", this.next = i.finallyLoc, y) : this.complete(a); }, complete: function complete(t, e) { if ("throw" === t.type) throw t.arg; return "break" === t.type || "continue" === t.type ? this.next = t.arg : "return" === t.type ? (this.rval = this.arg = t.arg, this.method = "return", this.next = "end") : "normal" === t.type && e && (this.next = e), y; }, finish: function finish(t) { for (var e = this.tryEntries.length - 1; e >= 0; --e) { var r = this.tryEntries[e]; if (r.finallyLoc === t) return this.complete(r.completion, r.afterLoc), resetTryEntry(r), y; } }, "catch": function _catch(t) { for (var e = this.tryEntries.length - 1; e >= 0; --e) { var r = this.tryEntries[e]; if (r.tryLoc === t) { var n = r.completion; if ("throw" === n.type) { var o = n.arg; resetTryEntry(r); } return o; } } throw Error("illegal catch attempt"); }, delegateYield: function delegateYield(e, r, n) { return this.delegate = { iterator: values(e), resultName: r, nextLoc: n }, "next" === this.method && (this.arg = t), y; } }, e; }\nfunction asyncGeneratorStep(n, t, e, r, o, a, c) { try { var i = n[a](c), u = i.value; } catch (n) { return void e(n); } i.done ? t(u) : Promise.resolve(u).then(r, o); }\nfunction _asyncToGenerator(n) { return function () { var t = this, e = arguments; return new Promise(function (r, o) { var a = n.apply(t, e); function _next(n) { asyncGeneratorStep(a, r, o, _next, _throw, "next", n); } function _throw(n) { asyncGeneratorStep(a, r, o, _next, _throw, "throw", n); } _next(void 0); }); }; }\nvar _require = __webpack_require__(/*! ../../services/ResponseService */ "./services/ResponseService.js"),\n  Response = _require.Response;\nvar config = __webpack_require__(/*! ../../config.js */ "./config.js");\nvar endpointSecret = "whsec_45065a3eb49f6a4e9c6231e0e0f7a26a79637ecf8304f5252f6bc89d557a9fa9";\nvar orderComplete = /*#__PURE__*/function () {\n  var _ref = _asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(event) {\n    return _regeneratorRuntime().wrap(function _callee$(_context) {\n      while (1) switch (_context.prev = _context.next) {\n        case 0:\n          try {} catch (error) {\n            console.log(error);\n          }\n        case 1:\n        case "end":\n          return _context.stop();\n      }\n    }, _callee);\n  }));\n  return function orderComplete(_x) {\n    return _ref.apply(this, arguments);\n  };\n}();\nvar webhook = /*#__PURE__*/function () {\n  var _ref2 = _asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(req, res) {\n    var sig, event, _error$message;\n    return _regeneratorRuntime().wrap(function _callee2$(_context2) {\n      while (1) switch (_context2.prev = _context2.next) {\n        case 0:\n          _context2.prev = 0;\n          sig = req.headers[\'stripe-signature\'];\n          event = stripe.webhooks.constructEvent(req.body, sig, endpointSecret);\n          _context2.t0 = event.type;\n          _context2.next = _context2.t0 === \'checkout.session.completed\' ? 6 : 8;\n          break;\n        case 6:\n          orderComplete(event);\n          return _context2.abrupt("break", 9);\n        case 8:\n          console.log("Unhandled event type ".concat(event.type));\n        case 9:\n          _context2.next = 14;\n          break;\n        case 11:\n          _context2.prev = 11;\n          _context2.t1 = _context2["catch"](0);\n          Response(res, 400, config.error_message, (_error$message = _context2.t1 === null || _context2.t1 === void 0 ? void 0 : _context2.t1.message) !== null && _error$message !== void 0 ? _error$message : _context2.t1, null);\n        case 14:\n        case "end":\n          return _context2.stop();\n      }\n    }, _callee2, null, [[0, 11]]);\n  }));\n  return function webhook(_x2, _x3) {\n    return _ref2.apply(this, arguments);\n  };\n}();\nmodule.exports = {\n  webhook: webhook\n};\n\n//# sourceURL=webpack://profitcart-nodejs/./User/controllers/webhookController.js?')},"./User/controllers/wishlistController.js":(module,__unused_webpack_exports,__webpack_require__)=>{eval('function _typeof(o) { "@babel/helpers - typeof"; return _typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && "function" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? "symbol" : typeof o; }, _typeof(o); }\nfunction _regeneratorRuntime() { "use strict"; /*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */ _regeneratorRuntime = function _regeneratorRuntime() { return e; }; var t, e = {}, r = Object.prototype, n = r.hasOwnProperty, o = Object.defineProperty || function (t, e, r) { t[e] = r.value; }, i = "function" == typeof Symbol ? Symbol : {}, a = i.iterator || "@@iterator", c = i.asyncIterator || "@@asyncIterator", u = i.toStringTag || "@@toStringTag"; function define(t, e, r) { return Object.defineProperty(t, e, { value: r, enumerable: !0, configurable: !0, writable: !0 }), t[e]; } try { define({}, ""); } catch (t) { define = function define(t, e, r) { return t[e] = r; }; } function wrap(t, e, r, n) { var i = e && e.prototype instanceof Generator ? e : Generator, a = Object.create(i.prototype), c = new Context(n || []); return o(a, "_invoke", { value: makeInvokeMethod(t, r, c) }), a; } function tryCatch(t, e, r) { try { return { type: "normal", arg: t.call(e, r) }; } catch (t) { return { type: "throw", arg: t }; } } e.wrap = wrap; var h = "suspendedStart", l = "suspendedYield", f = "executing", s = "completed", y = {}; function Generator() {} function GeneratorFunction() {} function GeneratorFunctionPrototype() {} var p = {}; define(p, a, function () { return this; }); var d = Object.getPrototypeOf, v = d && d(d(values([]))); v && v !== r && n.call(v, a) && (p = v); var g = GeneratorFunctionPrototype.prototype = Generator.prototype = Object.create(p); function defineIteratorMethods(t) { ["next", "throw", "return"].forEach(function (e) { define(t, e, function (t) { return this._invoke(e, t); }); }); } function AsyncIterator(t, e) { function invoke(r, o, i, a) { var c = tryCatch(t[r], t, o); if ("throw" !== c.type) { var u = c.arg, h = u.value; return h && "object" == _typeof(h) && n.call(h, "__await") ? e.resolve(h.__await).then(function (t) { invoke("next", t, i, a); }, function (t) { invoke("throw", t, i, a); }) : e.resolve(h).then(function (t) { u.value = t, i(u); }, function (t) { return invoke("throw", t, i, a); }); } a(c.arg); } var r; o(this, "_invoke", { value: function value(t, n) { function callInvokeWithMethodAndArg() { return new e(function (e, r) { invoke(t, n, e, r); }); } return r = r ? r.then(callInvokeWithMethodAndArg, callInvokeWithMethodAndArg) : callInvokeWithMethodAndArg(); } }); } function makeInvokeMethod(e, r, n) { var o = h; return function (i, a) { if (o === f) throw Error("Generator is already running"); if (o === s) { if ("throw" === i) throw a; return { value: t, done: !0 }; } for (n.method = i, n.arg = a;;) { var c = n.delegate; if (c) { var u = maybeInvokeDelegate(c, n); if (u) { if (u === y) continue; return u; } } if ("next" === n.method) n.sent = n._sent = n.arg;else if ("throw" === n.method) { if (o === h) throw o = s, n.arg; n.dispatchException(n.arg); } else "return" === n.method && n.abrupt("return", n.arg); o = f; var p = tryCatch(e, r, n); if ("normal" === p.type) { if (o = n.done ? s : l, p.arg === y) continue; return { value: p.arg, done: n.done }; } "throw" === p.type && (o = s, n.method = "throw", n.arg = p.arg); } }; } function maybeInvokeDelegate(e, r) { var n = r.method, o = e.iterator[n]; if (o === t) return r.delegate = null, "throw" === n && e.iterator["return"] && (r.method = "return", r.arg = t, maybeInvokeDelegate(e, r), "throw" === r.method) || "return" !== n && (r.method = "throw", r.arg = new TypeError("The iterator does not provide a \'" + n + "\' method")), y; var i = tryCatch(o, e.iterator, r.arg); if ("throw" === i.type) return r.method = "throw", r.arg = i.arg, r.delegate = null, y; var a = i.arg; return a ? a.done ? (r[e.resultName] = a.value, r.next = e.nextLoc, "return" !== r.method && (r.method = "next", r.arg = t), r.delegate = null, y) : a : (r.method = "throw", r.arg = new TypeError("iterator result is not an object"), r.delegate = null, y); } function pushTryEntry(t) { var e = { tryLoc: t[0] }; 1 in t && (e.catchLoc = t[1]), 2 in t && (e.finallyLoc = t[2], e.afterLoc = t[3]), this.tryEntries.push(e); } function resetTryEntry(t) { var e = t.completion || {}; e.type = "normal", delete e.arg, t.completion = e; } function Context(t) { this.tryEntries = [{ tryLoc: "root" }], t.forEach(pushTryEntry, this), this.reset(!0); } function values(e) { if (e || "" === e) { var r = e[a]; if (r) return r.call(e); if ("function" == typeof e.next) return e; if (!isNaN(e.length)) { var o = -1, i = function next() { for (; ++o < e.length;) if (n.call(e, o)) return next.value = e[o], next.done = !1, next; return next.value = t, next.done = !0, next; }; return i.next = i; } } throw new TypeError(_typeof(e) + " is not iterable"); } return GeneratorFunction.prototype = GeneratorFunctionPrototype, o(g, "constructor", { value: GeneratorFunctionPrototype, configurable: !0 }), o(GeneratorFunctionPrototype, "constructor", { value: GeneratorFunction, configurable: !0 }), GeneratorFunction.displayName = define(GeneratorFunctionPrototype, u, "GeneratorFunction"), e.isGeneratorFunction = function (t) { var e = "function" == typeof t && t.constructor; return !!e && (e === GeneratorFunction || "GeneratorFunction" === (e.displayName || e.name)); }, e.mark = function (t) { return Object.setPrototypeOf ? Object.setPrototypeOf(t, GeneratorFunctionPrototype) : (t.__proto__ = GeneratorFunctionPrototype, define(t, u, "GeneratorFunction")), t.prototype = Object.create(g), t; }, e.awrap = function (t) { return { __await: t }; }, defineIteratorMethods(AsyncIterator.prototype), define(AsyncIterator.prototype, c, function () { return this; }), e.AsyncIterator = AsyncIterator, e.async = function (t, r, n, o, i) { void 0 === i && (i = Promise); var a = new AsyncIterator(wrap(t, r, n, o), i); return e.isGeneratorFunction(r) ? a : a.next().then(function (t) { return t.done ? t.value : a.next(); }); }, defineIteratorMethods(g), define(g, u, "Generator"), define(g, a, function () { return this; }), define(g, "toString", function () { return "[object Generator]"; }), e.keys = function (t) { var e = Object(t), r = []; for (var n in e) r.push(n); return r.reverse(), function next() { for (; r.length;) { var t = r.pop(); if (t in e) return next.value = t, next.done = !1, next; } return next.done = !0, next; }; }, e.values = values, Context.prototype = { constructor: Context, reset: function reset(e) { if (this.prev = 0, this.next = 0, this.sent = this._sent = t, this.done = !1, this.delegate = null, this.method = "next", this.arg = t, this.tryEntries.forEach(resetTryEntry), !e) for (var r in this) "t" === r.charAt(0) && n.call(this, r) && !isNaN(+r.slice(1)) && (this[r] = t); }, stop: function stop() { this.done = !0; var t = this.tryEntries[0].completion; if ("throw" === t.type) throw t.arg; return this.rval; }, dispatchException: function dispatchException(e) { if (this.done) throw e; var r = this; function handle(n, o) { return a.type = "throw", a.arg = e, r.next = n, o && (r.method = "next", r.arg = t), !!o; } for (var o = this.tryEntries.length - 1; o >= 0; --o) { var i = this.tryEntries[o], a = i.completion; if ("root" === i.tryLoc) return handle("end"); if (i.tryLoc <= this.prev) { var c = n.call(i, "catchLoc"), u = n.call(i, "finallyLoc"); if (c && u) { if (this.prev < i.catchLoc) return handle(i.catchLoc, !0); if (this.prev < i.finallyLoc) return handle(i.finallyLoc); } else if (c) { if (this.prev < i.catchLoc) return handle(i.catchLoc, !0); } else { if (!u) throw Error("try statement without catch or finally"); if (this.prev < i.finallyLoc) return handle(i.finallyLoc); } } } }, abrupt: function abrupt(t, e) { for (var r = this.tryEntries.length - 1; r >= 0; --r) { var o = this.tryEntries[r]; if (o.tryLoc <= this.prev && n.call(o, "finallyLoc") && this.prev < o.finallyLoc) { var i = o; break; } } i && ("break" === t || "continue" === t) && i.tryLoc <= e && e <= i.finallyLoc && (i = null); var a = i ? i.completion : {}; return a.type = t, a.arg = e, i ? (this.method = "next", this.next = i.finallyLoc, y) : this.complete(a); }, complete: function complete(t, e) { if ("throw" === t.type) throw t.arg; return "break" === t.type || "continue" === t.type ? this.next = t.arg : "return" === t.type ? (this.rval = this.arg = t.arg, this.method = "return", this.next = "end") : "normal" === t.type && e && (this.next = e), y; }, finish: function finish(t) { for (var e = this.tryEntries.length - 1; e >= 0; --e) { var r = this.tryEntries[e]; if (r.finallyLoc === t) return this.complete(r.completion, r.afterLoc), resetTryEntry(r), y; } }, "catch": function _catch(t) { for (var e = this.tryEntries.length - 1; e >= 0; --e) { var r = this.tryEntries[e]; if (r.tryLoc === t) { var n = r.completion; if ("throw" === n.type) { var o = n.arg; resetTryEntry(r); } return o; } } throw Error("illegal catch attempt"); }, delegateYield: function delegateYield(e, r, n) { return this.delegate = { iterator: values(e), resultName: r, nextLoc: n }, "next" === this.method && (this.arg = t), y; } }, e; }\nfunction asyncGeneratorStep(n, t, e, r, o, a, c) { try { var i = n[a](c), u = i.value; } catch (n) { return void e(n); } i.done ? t(u) : Promise.resolve(u).then(r, o); }\nfunction _asyncToGenerator(n) { return function () { var t = this, e = arguments; return new Promise(function (r, o) { var a = n.apply(t, e); function _next(n) { asyncGeneratorStep(a, r, o, _next, _throw, "next", n); } function _throw(n) { asyncGeneratorStep(a, r, o, _next, _throw, "throw", n); } _next(void 0); }); }; }\nvar _require = __webpack_require__(/*! ../../services/ResponseService.js */ "./services/ResponseService.js"),\n  Response = _require.Response;\nvar config = __webpack_require__(/*! ../../config.js */ "./config.js");\nvar Wishlist = __webpack_require__(/*! ../models/wishlistModel.js */ "./User/models/wishlistModel.js");\nvar Products = __webpack_require__(/*! ../models/productModel.js */ "./User/models/productModel.js");\nvar getWishlist = /*#__PURE__*/function () {\n  var _ref = _asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(req, res) {\n    var _req$query, page, size, skip, _id, wishListData, productIds, _error$message;\n    return _regeneratorRuntime().wrap(function _callee$(_context) {\n      while (1) switch (_context.prev = _context.next) {\n        case 0:\n          _context.prev = 0;\n          _req$query = req.query, page = _req$query.page, size = _req$query.size;\n          skip = (page - 1) * size;\n          _id = req.user._id;\n          _context.next = 6;\n          return Wishlist.find({\n            userId: _id,\n            status: 1\n          }).populate("products").skip(skip).limit(size).sort({\n            createdAt: -1\n          });\n        case 6:\n          wishListData = _context.sent;\n          productIds = [];\n          if (!wishListData) {\n            _context.next = 14;\n            break;\n          }\n          _context.next = 11;\n          return wishListData.map(function (items) {\n            items === null || items === void 0 || items.productIds.map(function (item) {\n              productIds.push(item);\n            });\n          });\n        case 11:\n          Response(res, 200, config.success_message, null, {\n            data: wishListData,\n            productIds: productIds\n          });\n          _context.next = 15;\n          break;\n        case 14:\n          Response(res, 200, config.success_message, null, {\n            data: [],\n            productIds: []\n          });\n        case 15:\n          _context.next = 20;\n          break;\n        case 17:\n          _context.prev = 17;\n          _context.t0 = _context["catch"](0);\n          Response(res, 400, config.error_message, (_error$message = _context.t0 === null || _context.t0 === void 0 ? void 0 : _context.t0.message) !== null && _error$message !== void 0 ? _error$message : _context.t0, null);\n        case 20:\n        case "end":\n          return _context.stop();\n      }\n    }, _callee, null, [[0, 17]]);\n  }));\n  return function getWishlist(_x, _x2) {\n    return _ref.apply(this, arguments);\n  };\n}();\nvar createFolder = /*#__PURE__*/function () {\n  var _ref2 = _asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(req, res) {\n    var name, _id, _error$message2;\n    return _regeneratorRuntime().wrap(function _callee2$(_context2) {\n      while (1) switch (_context2.prev = _context2.next) {\n        case 0:\n          _context2.prev = 0;\n          name = req.body.name;\n          _id = req.user._id;\n          _context2.next = 5;\n          return Wishlist.create({\n            userId: _id,\n            name: name\n          }).then(function () {\n            Response(res, 200, config.success_message, "Folder created successfully", null);\n          });\n        case 5:\n          _context2.next = 10;\n          break;\n        case 7:\n          _context2.prev = 7;\n          _context2.t0 = _context2["catch"](0);\n          Response(res, 400, config.error_message, (_error$message2 = _context2.t0 === null || _context2.t0 === void 0 ? void 0 : _context2.t0.message) !== null && _error$message2 !== void 0 ? _error$message2 : _context2.t0, null);\n        case 10:\n        case "end":\n          return _context2.stop();\n      }\n    }, _callee2, null, [[0, 7]]);\n  }));\n  return function createFolder(_x3, _x4) {\n    return _ref2.apply(this, arguments);\n  };\n}();\nvar updateFolder = /*#__PURE__*/function () {\n  var _ref3 = _asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee3(req, res) {\n    var _req$body, name, id, _id, folderStatus, _error$message3;\n    return _regeneratorRuntime().wrap(function _callee3$(_context3) {\n      while (1) switch (_context3.prev = _context3.next) {\n        case 0:\n          _context3.prev = 0;\n          _req$body = req.body, name = _req$body.name, id = _req$body.id;\n          _id = req.user._id;\n          folderStatus = false;\n          _context3.next = 6;\n          return Wishlist.findOne({\n            _id: id\n          }).then(function (data) {\n            if (data) {\n              folderStatus = true;\n            }\n          });\n        case 6:\n          if (!folderStatus) {\n            _context3.next = 11;\n            break;\n          }\n          _context3.next = 9;\n          return Wishlist.updateOne({\n            _id: id,\n            userId: _id\n          }, {\n            $set: {\n              name: name\n            }\n          }).then(function () {\n            Response(res, 200, config.success_message, "Folder updated successfully", null);\n          });\n        case 9:\n          _context3.next = 12;\n          break;\n        case 11:\n          if (!folderStatus) {\n            Response(res, 400, config.error_message, "Folder not available", null);\n          }\n        case 12:\n          _context3.next = 17;\n          break;\n        case 14:\n          _context3.prev = 14;\n          _context3.t0 = _context3["catch"](0);\n          Response(res, 400, config.error_message, (_error$message3 = _context3.t0 === null || _context3.t0 === void 0 ? void 0 : _context3.t0.message) !== null && _error$message3 !== void 0 ? _error$message3 : _context3.t0, null);\n        case 17:\n        case "end":\n          return _context3.stop();\n      }\n    }, _callee3, null, [[0, 14]]);\n  }));\n  return function updateFolder(_x5, _x6) {\n    return _ref3.apply(this, arguments);\n  };\n}();\nvar removeFolder = /*#__PURE__*/function () {\n  var _ref4 = _asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee4(req, res) {\n    var id, _id, folderStatus, productId, _error$message4;\n    return _regeneratorRuntime().wrap(function _callee4$(_context4) {\n      while (1) switch (_context4.prev = _context4.next) {\n        case 0:\n          _context4.prev = 0;\n          id = req.body.id;\n          _id = req.user._id;\n          folderStatus = false;\n          productId = [];\n          _context4.next = 7;\n          return Wishlist.findOne({\n            _id: id\n          }).then(function (data) {\n            productId = data.products;\n            if (data) {\n              folderStatus = true;\n            }\n          });\n        case 7:\n          if (!folderStatus) {\n            _context4.next = 12;\n            break;\n          }\n          _context4.next = 10;\n          return Wishlist.updateOne({\n            _id: id,\n            userId: _id\n          }, {\n            $set: {\n              status: 0\n            },\n            $pull: {\n              productIds: productId\n            }\n          }).then(function () {\n            Response(res, 200, config.success_message, "Folder removed succuessfully", null);\n          });\n        case 10:\n          _context4.next = 13;\n          break;\n        case 12:\n          if (!folderStatus) {\n            Response(res, 400, config.error_message, "Folder not available", null);\n          }\n        case 13:\n          _context4.next = 18;\n          break;\n        case 15:\n          _context4.prev = 15;\n          _context4.t0 = _context4["catch"](0);\n          Response(res, 400, config.error_message, (_error$message4 = _context4.t0 === null || _context4.t0 === void 0 ? void 0 : _context4.t0.message) !== null && _error$message4 !== void 0 ? _error$message4 : _context4.t0, null);\n        case 18:\n        case "end":\n          return _context4.stop();\n      }\n    }, _callee4, null, [[0, 15]]);\n  }));\n  return function removeFolder(_x7, _x8) {\n    return _ref4.apply(this, arguments);\n  };\n}();\nvar addProduct = /*#__PURE__*/function () {\n  var _ref5 = _asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee5(req, res) {\n    var _req$body2, productId, id, _id, productStatus, folderStatus, _error$message5;\n    return _regeneratorRuntime().wrap(function _callee5$(_context5) {\n      while (1) switch (_context5.prev = _context5.next) {\n        case 0:\n          _context5.prev = 0;\n          _req$body2 = req.body, productId = _req$body2.productId, id = _req$body2.id;\n          _id = req.user._id;\n          productStatus = false, folderStatus = false;\n          _context5.next = 6;\n          return Products.findOne({\n            _id: productId\n          }).then(function (data) {\n            if (data) {\n              productStatus = true;\n            }\n          });\n        case 6:\n          _context5.next = 8;\n          return Wishlist.findOne({\n            _id: id\n          }).then(function (data) {\n            if (data) {\n              folderStatus = true;\n            }\n          });\n        case 8:\n          if (!(productStatus && folderStatus)) {\n            _context5.next = 14;\n            break;\n          }\n          _context5.next = 11;\n          return Wishlist.updateOne({\n            _id: id,\n            userId: _id\n          }, {\n            $push: {\n              products: productId,\n              productIds: productId\n            }\n          });\n        case 11:\n          Response(res, 200, config.success_message, "Product added to wishlist", null);\n          _context5.next = 16;\n          break;\n        case 14:\n          if (!productStatus) {\n            Response(res, 400, config.error_message, "Product not available", null);\n          }\n          if (!folderStatus) {\n            Response(res, 400, config.error_message, "Folder not available", null);\n          }\n        case 16:\n          _context5.next = 21;\n          break;\n        case 18:\n          _context5.prev = 18;\n          _context5.t0 = _context5["catch"](0);\n          Response(res, 400, config.error_message, (_error$message5 = _context5.t0 === null || _context5.t0 === void 0 ? void 0 : _context5.t0.message) !== null && _error$message5 !== void 0 ? _error$message5 : _context5.t0, null);\n        case 21:\n        case "end":\n          return _context5.stop();\n      }\n    }, _callee5, null, [[0, 18]]);\n  }));\n  return function addProduct(_x9, _x10) {\n    return _ref5.apply(this, arguments);\n  };\n}();\nvar removeProduct = /*#__PURE__*/function () {\n  var _ref6 = _asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee6(req, res) {\n    var _req$body3, productId, id, _id, productStatus, folderStatus, _error$message6;\n    return _regeneratorRuntime().wrap(function _callee6$(_context6) {\n      while (1) switch (_context6.prev = _context6.next) {\n        case 0:\n          _context6.prev = 0;\n          _req$body3 = req.body, productId = _req$body3.productId, id = _req$body3.id;\n          _id = req.user._id;\n          productStatus = false, folderStatus = false;\n          _context6.next = 6;\n          return Products.findOne({\n            _id: productId\n          }).then(function (data) {\n            if (data) {\n              productStatus = true;\n            }\n          });\n        case 6:\n          _context6.next = 8;\n          return Wishlist.findOne({\n            _id: id\n          }).then(function (data) {\n            if (data) {\n              folderStatus = true;\n            }\n          });\n        case 8:\n          if (!(productStatus && folderStatus)) {\n            _context6.next = 14;\n            break;\n          }\n          _context6.next = 11;\n          return Wishlist.updateOne({\n            _id: id,\n            userId: _id\n          }, {\n            $pull: {\n              products: productId,\n              productIds: productId\n            }\n          });\n        case 11:\n          Response(res, 200, config.success_message, "Product Removed from wishlist", null);\n          _context6.next = 15;\n          break;\n        case 14:\n          if (!productStatus) {\n            Response(res, 400, config.error_message, "Product not available", null);\n          } else if (!folderStatus) {\n            Response(res, 400, config.error_message, "Folder not available", null);\n          }\n        case 15:\n          _context6.next = 20;\n          break;\n        case 17:\n          _context6.prev = 17;\n          _context6.t0 = _context6["catch"](0);\n          Response(res, 400, config.error_message, (_error$message6 = _context6.t0 === null || _context6.t0 === void 0 ? void 0 : _context6.t0.message) !== null && _error$message6 !== void 0 ? _error$message6 : _context6.t0, null);\n        case 20:\n        case "end":\n          return _context6.stop();\n      }\n    }, _callee6, null, [[0, 17]]);\n  }));\n  return function removeProduct(_x11, _x12) {\n    return _ref6.apply(this, arguments);\n  };\n}();\nmodule.exports = {\n  getWishlist: getWishlist,\n  createFolder: createFolder,\n  addProduct: addProduct,\n  updateFolder: updateFolder,\n  removeProduct: removeProduct,\n  removeFolder: removeFolder\n};\n\n//# sourceURL=webpack://profitcart-nodejs/./User/controllers/wishlistController.js?')},"./User/models/addressModel.js":(module,__unused_webpack_exports,__webpack_require__)=>{eval('var mongoose = __webpack_require__(/*! mongoose */ "mongoose");\nvar addressSchema = new mongoose.Schema({\n  userId: {\n    type: mongoose.Schema.Types.ObjectId,\n    required: true,\n    ref: "user"\n  },\n  name: {\n    type: String,\n    required: true\n  },\n  firstLine: {\n    type: String,\n    required: true\n  },\n  secondLine: {\n    type: String,\n    required: false\n  },\n  city: {\n    type: String,\n    required: true\n  },\n  state: {\n    type: String,\n    required: true\n  },\n  country: {\n    type: String,\n    required: true\n  },\n  countryCode: {\n    type: String,\n    required: false\n  },\n  postalCode: {\n    type: String,\n    required: true\n  },\n  status: {\n    type: Number,\n    required: true,\n    "default": 1\n  },\n  phone: {\n    type: Number,\n    required: true\n  },\n  phoneCode: {\n    type: String,\n    required: true\n  },\n  "default": {\n    type: Boolean,\n    required: true,\n    "default": false\n  }\n}, {\n  timestamps: true\n});\nvar Address = new mongoose.model(\'address\', addressSchema);\nmodule.exports = Address;\n\n//# sourceURL=webpack://profitcart-nodejs/./User/models/addressModel.js?')},"./User/models/cartModel.js":(module,__unused_webpack_exports,__webpack_require__)=>{eval("var mongoose = __webpack_require__(/*! mongoose */ \"mongoose\");\nvar cartModel = new mongoose.Schema({\n  userId: {\n    type: mongoose.Schema.Types.ObjectId,\n    ref: \"user\"\n  },\n  items: [{\n    product: {\n      type: mongoose.Schema.Types.ObjectId,\n      ref: 'products'\n    },\n    quantity: {\n      type: Number,\n      required: true\n    },\n    later: {\n      type: Boolean,\n      required: true,\n      \"default\": false\n    }\n  }],\n  totalAmount: {\n    type: Number,\n    required: false\n  },\n  totalActualAmount: {\n    type: Number,\n    required: false\n  },\n  totalDiscount: {\n    type: String,\n    required: false\n  },\n  currency: {\n    type: String,\n    required: false\n  },\n  productIds: {\n    type: Array,\n    required: false,\n    ref: 'products'\n  }\n}, {\n  timestamps: true\n});\nvar Cart = new mongoose.model('cart', cartModel);\nmodule.exports = Cart;\n\n//# sourceURL=webpack://profitcart-nodejs/./User/models/cartModel.js?")},"./User/models/notificationModel.js":(module,__unused_webpack_exports,__webpack_require__)=>{eval('var mogoose = __webpack_require__(/*! mongoose */ "mongoose");\nvar notificationSchema = new mogoose.Schema({\n  userId: {\n    type: mogoose.Schema.Types.ObjectId,\n    required: true,\n    ref: "user"\n  },\n  type: {\n    type: String,\n    "enum": ["order_Status", "promotion", "offer", "info"],\n    required: true\n  },\n  message: {\n    type: String,\n    required: true\n  },\n  read: {\n    type: Boolean,\n    required: true,\n    "default": false\n  },\n  status: {\n    type: Number,\n    required: true,\n    "default": 1\n  },\n  productId: {\n    type: mogoose.Schema.Types.ObjectId,\n    ref: \'products\',\n    required: false\n  }\n}, {\n  timestamps: true\n});\nvar Notification = new mogoose.model(\'notification\', notificationSchema);\nmodule.exports = Notification;\n\n//# sourceURL=webpack://profitcart-nodejs/./User/models/notificationModel.js?')},"./User/models/orderModel.js":(module,__unused_webpack_exports,__webpack_require__)=>{eval('var mongoose = __webpack_require__(/*! mongoose */ "mongoose");\nvar orderSchema = new mongoose.Schema({\n  userId: {\n    type: mongoose.Schema.Types.ObjectId,\n    required: true,\n    ref: "user"\n  },\n  items: [{\n    product: {\n      type: mongoose.Schema.Types.ObjectId,\n      required: true,\n      ref: "products"\n    },\n    quantity: {\n      type: Number,\n      required: true\n    },\n    status: {\n      type: String,\n      "enum": ["ordered", "processing", "shipped", "delivered"],\n      required: true,\n      "default": "ordered"\n    },\n    orderedDate: {\n      type: Date,\n      required: true,\n      "default": new Date()\n    },\n    deliveryDate: {\n      type: Date,\n      required: false\n    },\n    deliveredDate: {\n      type: Date,\n      required: false\n    },\n    cancelOrder: {\n      type: Boolean,\n      required: false,\n      "default": false\n    },\n    returnOption: {\n      type: String,\n      "enum": ["refund", "return"],\n      required: false\n    },\n    cancelStatus: {\n      type: String,\n      "enum": [\'applied\', "accepted"],\n      required: false\n    },\n    returnStatus: {\n      type: String,\n      "enum": ["initiated", "proccess", "completed"],\n      required: false\n    },\n    shippingAddress: {\n      type: mongoose.Schema.Types.ObjectId,\n      required: false,\n      ref: "address"\n    },\n    returnProduct: {\n      type: Boolean,\n      required: false,\n      "default": false\n    }\n  }],\n  paymentMethod: {\n    type: String,\n    required: true\n  }\n}, {\n  timestamps: true\n});\nvar Order = new mongoose.model(\'order\', orderSchema);\nmodule.exports = Order;\n\n//# sourceURL=webpack://profitcart-nodejs/./User/models/orderModel.js?')},"./User/models/productModel.js":(module,__unused_webpack_exports,__webpack_require__)=>{eval('var _require = __webpack_require__(/*! joi */ "joi"),\n  _boolean = _require["boolean"];\nvar mongoose = __webpack_require__(/*! mongoose */ "mongoose");\nvar productSchema = new mongoose.Schema({\n  pid: {\n    type: String,\n    required: true\n  },\n  url: {\n    type: String,\n    required: false\n  },\n  title: {\n    type: String,\n    required: true\n  },\n  category: {\n    type: String,\n    required: false\n  },\n  actual_price: {\n    type: String,\n    required: true\n  },\n  selling_price: {\n    type: String,\n    required: true\n  },\n  brand: {\n    type: String,\n    required: true\n  },\n  description: {\n    type: String,\n    required: true\n  },\n  average_rating: {\n    type: String,\n    required: false\n  },\n  discount: {\n    type: String,\n    required: false\n  },\n  out_of_stock: {\n    type: Boolean,\n    required: true\n  },\n  images: {\n    type: Array,\n    required: true\n  },\n  product_details: {\n    type: Array,\n    required: true\n  },\n  seller: {\n    type: String,\n    required: true\n  },\n  sub_category: {\n    type: String,\n    required: false\n  },\n  stripeId: {\n    type: String,\n    required: false\n  }\n}, {\n  timestamps: true\n});\nvar Products = new mongoose.model("products", productSchema);\nmodule.exports = Products;\n\n//# sourceURL=webpack://profitcart-nodejs/./User/models/productModel.js?')},"./User/models/reviewAndRatingModel.js":(module,__unused_webpack_exports,__webpack_require__)=>{eval('var mongoosee = __webpack_require__(/*! mongoose */ "mongoose");\nvar reviewSchema = new mongoosee.Schema({\n  userId: {\n    type: mongoosee.Schema.Types.ObjectId,\n    required: true,\n    ref: "user"\n  },\n  productId: {\n    type: mongoosee.Schema.Types.ObjectId,\n    required: true,\n    ref: "products"\n  },\n  rating: {\n    type: Number,\n    required: true\n  },\n  reviewText: {\n    type: String,\n    required: true\n  },\n  status: {\n    type: Number,\n    required: true,\n    "default": 1\n  }\n}, {\n  timestamps: true\n});\nvar Review = new mongoosee.model(\'review\', reviewSchema);\nmodule.exports = Review;\n\n//# sourceURL=webpack://profitcart-nodejs/./User/models/reviewAndRatingModel.js?')},"./User/models/stripeOrdersModel.js":(module,__unused_webpack_exports,__webpack_require__)=>{eval('var mongoose = __webpack_require__(/*! mongoose */ "mongoose");\nvar stripeOrdersSchema = mongoose.Schema({\n  userId: {\n    type: mongoose.Schema.Types.ObjectId,\n    required: true,\n    ref: "user"\n  },\n  items: [{\n    product: {\n      type: mongoose.Schema.Types.ObjectId,\n      required: false,\n      ref: "products"\n    },\n    quantity: {\n      type: Number,\n      required: true\n    },\n    price: {\n      type: Number,\n      required: true\n    }\n  }],\n  cartProducts: {\n    type: Array,\n    required: false\n  },\n  addressId: {\n    type: mongoose.Schema.Types.ObjectId,\n    ref: "address"\n  }\n}, {\n  timestamps: true\n});\nvar StripeOrders = mongoose.model("stripeorders", stripeOrdersSchema);\nmodule.exports = StripeOrders;\n\n//# sourceURL=webpack://profitcart-nodejs/./User/models/stripeOrdersModel.js?')},"./User/models/userModel.js":(module,__unused_webpack_exports,__webpack_require__)=>{eval('var mongoose = __webpack_require__(/*! mongoose */ "mongoose");\nvar Schema = (__webpack_require__(/*! mongoose */ "mongoose").Schema);\nvar userSchema = new Schema({\n  name: {\n    type: String,\n    required: true\n  },\n  email: {\n    type: String,\n    required: true,\n    unique: true\n  },\n  password: {\n    type: String,\n    required: true\n  },\n  userRole: {\n    type: String,\n    "enum": ["user", "seller", "admin"],\n    "default": "user"\n  },\n  token: {\n    type: String,\n    required: false\n  },\n  lastLogin: {\n    type: Date,\n    required: false\n  },\n  currentOrder: {\n    type: Number,\n    required: true,\n    "default": 0\n  },\n  returnedCount: {\n    type: Number,\n    required: true,\n    "default": 0\n  },\n  stripeCustomerId: {\n    type: String,\n    required: false\n  },\n  shopName: {\n    type: String,\n    required: false\n  },\n  shopMobileNumber: {\n    type: String,\n    required: false\n  },\n  shopAddress: {\n    type: String,\n    requried: false\n  }\n}, {\n  timestamps: true\n});\nvar User = new mongoose.model("user", userSchema);\nmodule.exports = User;\n\n//# sourceURL=webpack://profitcart-nodejs/./User/models/userModel.js?')},"./User/models/wishlistModel.js":(module,__unused_webpack_exports,__webpack_require__)=>{eval('var mongoose = __webpack_require__(/*! mongoose */ "mongoose");\nvar wishListSchema = new mongoose.Schema({\n  userId: {\n    type: mongoose.Types.ObjectId,\n    ref: "user",\n    required: true\n  },\n  name: {\n    type: String,\n    required: true,\n    "default": "New Folder"\n  },\n  products: {\n    type: Array,\n    ref: "products",\n    required: false\n  },\n  status: {\n    type: Number,\n    required: true,\n    "default": 1\n  },\n  productIds: {\n    type: Array,\n    required: false\n  }\n}, {\n  timestamps: true\n});\nvar Wishlist = new mongoose.model("wishlist", wishListSchema);\nmodule.exports = Wishlist;\n\n//# sourceURL=webpack://profitcart-nodejs/./User/models/wishlistModel.js?')},"./User/routes/addressRoutes.js":(module,__unused_webpack_exports,__webpack_require__)=>{eval('var userAuth = __webpack_require__(/*! ../../middleware/userMiddleware */ "./middleware/userMiddleware.js");\nvar validateReqData = __webpack_require__(/*! ../../middleware/validateReqData */ "./middleware/validateReqData.js");\nvar _require = __webpack_require__(/*! ../controllers/addressController */ "./User/controllers/addressController.js"),\n  listAddress = _require.listAddress,\n  createAddress = _require.createAddress,\n  updateAddress = _require.updateAddress,\n  removeAddress = _require.removeAddress,\n  updateDefaultAddress = _require.updateDefaultAddress;\nvar router = (__webpack_require__(/*! express */ "express").Router)();\nrouter.get(\'/list\', userAuth, listAddress);\nrouter.post(\'/create\', userAuth, validateReqData("address"), createAddress);\nrouter.patch(\'/update\', userAuth, validateReqData("address"), updateAddress);\nrouter.patch("/update-default/:id", userAuth, updateDefaultAddress);\nrouter["delete"]("/remove/:id", userAuth, removeAddress);\nmodule.exports = router;\n\n//# sourceURL=webpack://profitcart-nodejs/./User/routes/addressRoutes.js?')},"./User/routes/cartRoutes.js":(module,__unused_webpack_exports,__webpack_require__)=>{eval('var userAuth = __webpack_require__(/*! ../../middleware/userMiddleware */ "./middleware/userMiddleware.js");\nvar validateReqData = __webpack_require__(/*! ../../middleware/validateReqData */ "./middleware/validateReqData.js");\nvar _require = __webpack_require__(/*! ../controllers/cartController */ "./User/controllers/cartController.js"),\n  listCart = _require.listCart,\n  addProduct = _require.addProduct,\n  removeProduct = _require.removeProduct,\n  updateLater = _require.updateLater,\n  quantityUpdate = _require.quantityUpdate,\n  removeOrderedProducts = _require.removeOrderedProducts;\n// const{listOfBuyLater}=require(\'../controllers/cartController.js\');\nvar router = (__webpack_require__(/*! express */ "express").Router)();\nrouter.get("/list", userAuth, listCart);\nrouter.post("/add-cart", userAuth, validateReqData("cart"), addProduct);\nrouter["delete"]("/remove", userAuth, validateReqData("cart"), removeProduct);\nrouter.patch(\'/update-buy-later\', userAuth, updateLater);\nrouter.patch(\'/update-quantity\', userAuth, validateReqData("cart"), quantityUpdate);\nrouter["delete"](\'/remove-products\', validateReqData("cart"), userAuth, removeOrderedProducts);\n// router.get(\'/list-buy-later\',userAuth,listOfBuyLater);\n\nmodule.exports = router;\n\n//# sourceURL=webpack://profitcart-nodejs/./User/routes/cartRoutes.js?')},"./User/routes/notificationRoutes.js":(module,__unused_webpack_exports,__webpack_require__)=>{eval('var router = (__webpack_require__(/*! express */ "express").Router)();\nvar userAuth = __webpack_require__(/*! ../../middleware/userMiddleware.js */ "./middleware/userMiddleware.js");\nvar validateReqData = __webpack_require__(/*! ../../middleware/validateReqData.js */ "./middleware/validateReqData.js");\nvar _require = __webpack_require__(/*! ../controllers/notificationController */ "./User/controllers/notificationController.js"),\n  getNotification = _require.getNotification,\n  createNotification = _require.createNotification,\n  updateRead = _require.updateRead,\n  removeNotification = _require.removeNotification;\nrouter.get("/list", userAuth, getNotification);\nrouter.post(\'/create\', userAuth, validateReqData("notification"), createNotification);\nrouter.patch(\'/update-read\', userAuth, validateReqData("notification"), updateRead);\nrouter["delete"](\'/remove\', userAuth, validateReqData("notification"), removeNotification);\nmodule.exports = router;\n\n//# sourceURL=webpack://profitcart-nodejs/./User/routes/notificationRoutes.js?')},"./User/routes/orderRoutes.js":(module,__unused_webpack_exports,__webpack_require__)=>{eval('var router = (__webpack_require__(/*! express */ "express").Router)();\nvar userAuth = __webpack_require__(/*! ../../middleware/userMiddleware.js */ "./middleware/userMiddleware.js");\nvar validateReqData = __webpack_require__(/*! ../../middleware/validateReqData.js */ "./middleware/validateReqData.js");\nvar _require = __webpack_require__(/*! ../controllers/orderController.js */ "./User/controllers/orderController.js"),\n  listOrder = _require.listOrder,\n  createOrder = _require.createOrder,\n  cancelOrder = _require.cancelOrder,\n  updateAddress = _require.updateAddress,\n  createBulkOrder = _require.createBulkOrder,\n  getProduct = _require.getProduct;\nrouter.get(\'/list\', userAuth, listOrder);\nrouter.post(\'/create\', userAuth, validateReqData("order"), createOrder);\nrouter.patch(\'/cancel\', userAuth, validateReqData("order"), cancelOrder);\nrouter.patch(\'/update\', userAuth, validateReqData("order"), updateAddress);\nrouter.post("/create-bulk", userAuth, validateReqData("order"), createBulkOrder);\nrouter.get("/get-product/:orderId/:productId", userAuth, getProduct);\nmodule.exports = router;\n\n//# sourceURL=webpack://profitcart-nodejs/./User/routes/orderRoutes.js?')},"./User/routes/productRoutes.js":(module,__unused_webpack_exports,__webpack_require__)=>{eval('var _require = __webpack_require__(/*! ../controllers/productController */ "./User/controllers/productController.js"),\n  productList = _require.productList,\n  productDetails = _require.productDetails,\n  proudctForIndex = _require.proudctForIndex;\nvar router = (__webpack_require__(/*! express */ "express").Router)();\nrouter.get("/list", productList);\nrouter.get(\'/details/:id\', productDetails);\nrouter.get("/index", proudctForIndex);\nmodule.exports = router;\n\n//# sourceURL=webpack://profitcart-nodejs/./User/routes/productRoutes.js?')},"./User/routes/reviewAndRatingRoutes.js":(module,__unused_webpack_exports,__webpack_require__)=>{eval('var userAuth = __webpack_require__(/*! ../../middleware/userMiddleware */ "./middleware/userMiddleware.js");\nvar validateReqData = __webpack_require__(/*! ../../middleware/validateReqData */ "./middleware/validateReqData.js");\nvar _require = __webpack_require__(/*! ../controllers/reviewAndRatingController */ "./User/controllers/reviewAndRatingController.js"),\n  getReview = _require.getReview,\n  createReview = _require.createReview,\n  updateReview = _require.updateReview,\n  removeReview = _require.removeReview;\nvar router = (__webpack_require__(/*! express */ "express").Router)();\nrouter.get(\'/list\', getReview);\nrouter.post(\'/create\', userAuth, validateReqData("review"), createReview);\nrouter.patch(\'/update\', userAuth, validateReqData("review"), updateReview);\nrouter["delete"](\'/delete\', userAuth, validateReqData("review"), removeReview);\nmodule.exports = router;\n\n//# sourceURL=webpack://profitcart-nodejs/./User/routes/reviewAndRatingRoutes.js?')},"./User/routes/stripeRoutes.js":(module,__unused_webpack_exports,__webpack_require__)=>{eval('var userAuth = __webpack_require__(/*! ../../middleware/userMiddleware */ "./middleware/userMiddleware.js");\nvar _require = __webpack_require__(/*! ../controllers/stripeController */ "./User/controllers/stripeController.js"),\n  addProduct = _require.addProduct,\n  retrievePriceDetails = _require.retrievePriceDetails,\n  createSession = _require.createSession;\nvar router = (__webpack_require__(/*! express */ "express").Router)();\nrouter.post(\'/add-product\', userAuth, addProduct);\nrouter.post("/get-pricing", userAuth, retrievePriceDetails);\nrouter.post("/get-session", userAuth, createSession);\nmodule.exports = router;\n\n//# sourceURL=webpack://profitcart-nodejs/./User/routes/stripeRoutes.js?')},"./User/routes/userRoutes.js":(module,__unused_webpack_exports,__webpack_require__)=>{eval('var userAuth = __webpack_require__(/*! ../../middleware/userMiddleware */ "./middleware/userMiddleware.js");\nvar validateReqData = __webpack_require__(/*! ../../middleware/validateReqData */ "./middleware/validateReqData.js");\nvar _require = __webpack_require__(/*! ../controllers/userController */ "./User/controllers/userController.js"),\n  login = _require.login,\n  register = _require.register,\n  userProfileDetails = _require.userProfileDetails;\nvar router = (__webpack_require__(/*! express */ "express").Router)();\nrouter.post("/login", validateReqData("user"), login);\nrouter.post("/register", validateReqData("user"), register);\nrouter.get("/profile-details", userAuth, userProfileDetails);\nmodule.exports = router;\n\n//# sourceURL=webpack://profitcart-nodejs/./User/routes/userRoutes.js?')},"./User/routes/webhookRouter.js":(module,__unused_webpack_exports,__webpack_require__)=>{eval('var userAuth = __webpack_require__(/*! ../../middleware/userMiddleware */ "./middleware/userMiddleware.js");\nvar _require = __webpack_require__(/*! ../controllers/webhookController */ "./User/controllers/webhookController.js"),\n  webhook = _require.webhook;\nvar router = (__webpack_require__(/*! express */ "express").Router)();\nrouter.get(\'/\', userAuth, webhook);\nmodule.exports = router;\n\n//# sourceURL=webpack://profitcart-nodejs/./User/routes/webhookRouter.js?')},"./User/routes/wishlistRoutes.js":(module,__unused_webpack_exports,__webpack_require__)=>{eval('var router = (__webpack_require__(/*! express */ "express").Router)();\nvar userAuth = __webpack_require__(/*! ../../middleware/userMiddleware.js */ "./middleware/userMiddleware.js");\nvar validateReqData = __webpack_require__(/*! ../../middleware/validateReqData.js */ "./middleware/validateReqData.js");\nvar _require = __webpack_require__(/*! ../controllers/wishlistController */ "./User/controllers/wishlistController.js"),\n  getWishlist = _require.getWishlist,\n  createFolder = _require.createFolder,\n  addProduct = _require.addProduct,\n  updateFolder = _require.updateFolder,\n  removeProduct = _require.removeProduct,\n  removeFolder = _require.removeFolder;\nrouter.get(\'/list\', userAuth, getWishlist);\nrouter.post(\'/create\', userAuth, validateReqData("wishlist"), createFolder);\nrouter.post(\'/add\', userAuth, validateReqData("wishlist"), addProduct);\nrouter.patch(\'/update\', userAuth, validateReqData("wishlist"), updateFolder);\nrouter["delete"](\'/remove\', userAuth, validateReqData("wishlist"), removeProduct);\nrouter["delete"](\'/remove-folder\', userAuth, validateReqData("wishlist"), removeFolder);\nmodule.exports = router;\n\n//# sourceURL=webpack://profitcart-nodejs/./User/routes/wishlistRoutes.js?')},"./app.js":(__unused_webpack_module,__unused_webpack_exports,__webpack_require__)=>{eval('var express = __webpack_require__(/*! express */ "express");\nvar app = express();\nvar mongoose = __webpack_require__(/*! mongoose */ "mongoose");\nvar morgan = __webpack_require__(/*! morgan */ "morgan");\nvar dotenv = __webpack_require__(/*! dotenv */ "dotenv");\nvar cors = __webpack_require__(/*! cors */ "cors");\nvar os = __webpack_require__(/*! os */ "os");\nvar helmet = __webpack_require__(/*! helmet */ "helmet");\n\n//configure the dotenv\ndotenv.config();\n\n//routers\nvar userRoutes = __webpack_require__(/*! ./User/routes/userRoutes.js */ "./User/routes/userRoutes.js");\nvar productRoutes = __webpack_require__(/*! ./User/routes/productRoutes.js */ "./User/routes/productRoutes.js");\nvar cartRoutes = __webpack_require__(/*! ./User/routes/cartRoutes.js */ "./User/routes/cartRoutes.js");\nvar orderRoutes = __webpack_require__(/*! ./User/routes/orderRoutes.js */ "./User/routes/orderRoutes.js");\nvar addressRoutes = __webpack_require__(/*! ./User/routes/addressRoutes.js */ "./User/routes/addressRoutes.js");\nvar notificationRoutes = __webpack_require__(/*! ./User/routes/notificationRoutes.js */ "./User/routes/notificationRoutes.js");\nvar reviewRoutes = __webpack_require__(/*! ./User/routes/reviewAndRatingRoutes.js */ "./User/routes/reviewAndRatingRoutes.js");\nvar stripeRouter = __webpack_require__(/*! ./User/routes/stripeRoutes.js */ "./User/routes/stripeRoutes.js");\nvar webhookRouter = __webpack_require__(/*! ./User/routes/webhookRouter.js */ "./User/routes/webhookRouter.js");\nvar wishlistRouter = __webpack_require__(/*! ./User/routes/wishlistRoutes.js */ "./User/routes/wishlistRoutes.js");\n\n//connect mongodb database\nmongoose.connect(process.env.DB_URL).then(function () {\n  console.log("Datbase connected !");\n  app.listen(process.env.port, function (err) {\n    console.log(err);\n  });\n  console.log("Server listening on ".concat(process.env.port));\n});\n\n//using middleware for express app\napp.use(cors());\napp.use(express.urlencoded());\napp.use(express.json());\napp.use(morgan(\'dev\'));\n\n//configure helmet for security\n// app.use(helmet({\n//     //disable content policy help to prevent XSS attack\n//     contentSecurityPolicy: false,\n\n//     //prevent MIME type which is not included in content-type header\n//     noSniff: true,\n\n//     //prevent information disclousure\n//     hidePoweredBy: true\n// }))\n\n//app routes\napp.use(\'/user\', userRoutes);\napp.use(\'/products\', productRoutes);\napp.use(\'/cart\', cartRoutes);\napp.use(\'/order\', orderRoutes);\napp.use(\'/address\', addressRoutes);\napp.use(\'/notification\', notificationRoutes);\napp.use(\'/review\', reviewRoutes);\napp.use(\'/stripe\', stripeRouter);\napp.use(\'/webhook\', webhookRouter);\napp.use(\'/wishlist\', wishlistRouter);\n\n//# sourceURL=webpack://profitcart-nodejs/./app.js?')},"./config.js":module=>{eval('var success_message = "success";\nvar error_message = "error";\nmodule.exports = {\n  success_message: success_message,\n  error_message: error_message\n};\n\n//# sourceURL=webpack://profitcart-nodejs/./config.js?')},"./middleware/userMiddleware.js":(module,__unused_webpack_exports,__webpack_require__)=>{eval('function _typeof(o) { "@babel/helpers - typeof"; return _typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && "function" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? "symbol" : typeof o; }, _typeof(o); }\nfunction _regeneratorRuntime() { "use strict"; /*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */ _regeneratorRuntime = function _regeneratorRuntime() { return e; }; var t, e = {}, r = Object.prototype, n = r.hasOwnProperty, o = Object.defineProperty || function (t, e, r) { t[e] = r.value; }, i = "function" == typeof Symbol ? Symbol : {}, a = i.iterator || "@@iterator", c = i.asyncIterator || "@@asyncIterator", u = i.toStringTag || "@@toStringTag"; function define(t, e, r) { return Object.defineProperty(t, e, { value: r, enumerable: !0, configurable: !0, writable: !0 }), t[e]; } try { define({}, ""); } catch (t) { define = function define(t, e, r) { return t[e] = r; }; } function wrap(t, e, r, n) { var i = e && e.prototype instanceof Generator ? e : Generator, a = Object.create(i.prototype), c = new Context(n || []); return o(a, "_invoke", { value: makeInvokeMethod(t, r, c) }), a; } function tryCatch(t, e, r) { try { return { type: "normal", arg: t.call(e, r) }; } catch (t) { return { type: "throw", arg: t }; } } e.wrap = wrap; var h = "suspendedStart", l = "suspendedYield", f = "executing", s = "completed", y = {}; function Generator() {} function GeneratorFunction() {} function GeneratorFunctionPrototype() {} var p = {}; define(p, a, function () { return this; }); var d = Object.getPrototypeOf, v = d && d(d(values([]))); v && v !== r && n.call(v, a) && (p = v); var g = GeneratorFunctionPrototype.prototype = Generator.prototype = Object.create(p); function defineIteratorMethods(t) { ["next", "throw", "return"].forEach(function (e) { define(t, e, function (t) { return this._invoke(e, t); }); }); } function AsyncIterator(t, e) { function invoke(r, o, i, a) { var c = tryCatch(t[r], t, o); if ("throw" !== c.type) { var u = c.arg, h = u.value; return h && "object" == _typeof(h) && n.call(h, "__await") ? e.resolve(h.__await).then(function (t) { invoke("next", t, i, a); }, function (t) { invoke("throw", t, i, a); }) : e.resolve(h).then(function (t) { u.value = t, i(u); }, function (t) { return invoke("throw", t, i, a); }); } a(c.arg); } var r; o(this, "_invoke", { value: function value(t, n) { function callInvokeWithMethodAndArg() { return new e(function (e, r) { invoke(t, n, e, r); }); } return r = r ? r.then(callInvokeWithMethodAndArg, callInvokeWithMethodAndArg) : callInvokeWithMethodAndArg(); } }); } function makeInvokeMethod(e, r, n) { var o = h; return function (i, a) { if (o === f) throw Error("Generator is already running"); if (o === s) { if ("throw" === i) throw a; return { value: t, done: !0 }; } for (n.method = i, n.arg = a;;) { var c = n.delegate; if (c) { var u = maybeInvokeDelegate(c, n); if (u) { if (u === y) continue; return u; } } if ("next" === n.method) n.sent = n._sent = n.arg;else if ("throw" === n.method) { if (o === h) throw o = s, n.arg; n.dispatchException(n.arg); } else "return" === n.method && n.abrupt("return", n.arg); o = f; var p = tryCatch(e, r, n); if ("normal" === p.type) { if (o = n.done ? s : l, p.arg === y) continue; return { value: p.arg, done: n.done }; } "throw" === p.type && (o = s, n.method = "throw", n.arg = p.arg); } }; } function maybeInvokeDelegate(e, r) { var n = r.method, o = e.iterator[n]; if (o === t) return r.delegate = null, "throw" === n && e.iterator["return"] && (r.method = "return", r.arg = t, maybeInvokeDelegate(e, r), "throw" === r.method) || "return" !== n && (r.method = "throw", r.arg = new TypeError("The iterator does not provide a \'" + n + "\' method")), y; var i = tryCatch(o, e.iterator, r.arg); if ("throw" === i.type) return r.method = "throw", r.arg = i.arg, r.delegate = null, y; var a = i.arg; return a ? a.done ? (r[e.resultName] = a.value, r.next = e.nextLoc, "return" !== r.method && (r.method = "next", r.arg = t), r.delegate = null, y) : a : (r.method = "throw", r.arg = new TypeError("iterator result is not an object"), r.delegate = null, y); } function pushTryEntry(t) { var e = { tryLoc: t[0] }; 1 in t && (e.catchLoc = t[1]), 2 in t && (e.finallyLoc = t[2], e.afterLoc = t[3]), this.tryEntries.push(e); } function resetTryEntry(t) { var e = t.completion || {}; e.type = "normal", delete e.arg, t.completion = e; } function Context(t) { this.tryEntries = [{ tryLoc: "root" }], t.forEach(pushTryEntry, this), this.reset(!0); } function values(e) { if (e || "" === e) { var r = e[a]; if (r) return r.call(e); if ("function" == typeof e.next) return e; if (!isNaN(e.length)) { var o = -1, i = function next() { for (; ++o < e.length;) if (n.call(e, o)) return next.value = e[o], next.done = !1, next; return next.value = t, next.done = !0, next; }; return i.next = i; } } throw new TypeError(_typeof(e) + " is not iterable"); } return GeneratorFunction.prototype = GeneratorFunctionPrototype, o(g, "constructor", { value: GeneratorFunctionPrototype, configurable: !0 }), o(GeneratorFunctionPrototype, "constructor", { value: GeneratorFunction, configurable: !0 }), GeneratorFunction.displayName = define(GeneratorFunctionPrototype, u, "GeneratorFunction"), e.isGeneratorFunction = function (t) { var e = "function" == typeof t && t.constructor; return !!e && (e === GeneratorFunction || "GeneratorFunction" === (e.displayName || e.name)); }, e.mark = function (t) { return Object.setPrototypeOf ? Object.setPrototypeOf(t, GeneratorFunctionPrototype) : (t.__proto__ = GeneratorFunctionPrototype, define(t, u, "GeneratorFunction")), t.prototype = Object.create(g), t; }, e.awrap = function (t) { return { __await: t }; }, defineIteratorMethods(AsyncIterator.prototype), define(AsyncIterator.prototype, c, function () { return this; }), e.AsyncIterator = AsyncIterator, e.async = function (t, r, n, o, i) { void 0 === i && (i = Promise); var a = new AsyncIterator(wrap(t, r, n, o), i); return e.isGeneratorFunction(r) ? a : a.next().then(function (t) { return t.done ? t.value : a.next(); }); }, defineIteratorMethods(g), define(g, u, "Generator"), define(g, a, function () { return this; }), define(g, "toString", function () { return "[object Generator]"; }), e.keys = function (t) { var e = Object(t), r = []; for (var n in e) r.push(n); return r.reverse(), function next() { for (; r.length;) { var t = r.pop(); if (t in e) return next.value = t, next.done = !1, next; } return next.done = !0, next; }; }, e.values = values, Context.prototype = { constructor: Context, reset: function reset(e) { if (this.prev = 0, this.next = 0, this.sent = this._sent = t, this.done = !1, this.delegate = null, this.method = "next", this.arg = t, this.tryEntries.forEach(resetTryEntry), !e) for (var r in this) "t" === r.charAt(0) && n.call(this, r) && !isNaN(+r.slice(1)) && (this[r] = t); }, stop: function stop() { this.done = !0; var t = this.tryEntries[0].completion; if ("throw" === t.type) throw t.arg; return this.rval; }, dispatchException: function dispatchException(e) { if (this.done) throw e; var r = this; function handle(n, o) { return a.type = "throw", a.arg = e, r.next = n, o && (r.method = "next", r.arg = t), !!o; } for (var o = this.tryEntries.length - 1; o >= 0; --o) { var i = this.tryEntries[o], a = i.completion; if ("root" === i.tryLoc) return handle("end"); if (i.tryLoc <= this.prev) { var c = n.call(i, "catchLoc"), u = n.call(i, "finallyLoc"); if (c && u) { if (this.prev < i.catchLoc) return handle(i.catchLoc, !0); if (this.prev < i.finallyLoc) return handle(i.finallyLoc); } else if (c) { if (this.prev < i.catchLoc) return handle(i.catchLoc, !0); } else { if (!u) throw Error("try statement without catch or finally"); if (this.prev < i.finallyLoc) return handle(i.finallyLoc); } } } }, abrupt: function abrupt(t, e) { for (var r = this.tryEntries.length - 1; r >= 0; --r) { var o = this.tryEntries[r]; if (o.tryLoc <= this.prev && n.call(o, "finallyLoc") && this.prev < o.finallyLoc) { var i = o; break; } } i && ("break" === t || "continue" === t) && i.tryLoc <= e && e <= i.finallyLoc && (i = null); var a = i ? i.completion : {}; return a.type = t, a.arg = e, i ? (this.method = "next", this.next = i.finallyLoc, y) : this.complete(a); }, complete: function complete(t, e) { if ("throw" === t.type) throw t.arg; return "break" === t.type || "continue" === t.type ? this.next = t.arg : "return" === t.type ? (this.rval = this.arg = t.arg, this.method = "return", this.next = "end") : "normal" === t.type && e && (this.next = e), y; }, finish: function finish(t) { for (var e = this.tryEntries.length - 1; e >= 0; --e) { var r = this.tryEntries[e]; if (r.finallyLoc === t) return this.complete(r.completion, r.afterLoc), resetTryEntry(r), y; } }, "catch": function _catch(t) { for (var e = this.tryEntries.length - 1; e >= 0; --e) { var r = this.tryEntries[e]; if (r.tryLoc === t) { var n = r.completion; if ("throw" === n.type) { var o = n.arg; resetTryEntry(r); } return o; } } throw Error("illegal catch attempt"); }, delegateYield: function delegateYield(e, r, n) { return this.delegate = { iterator: values(e), resultName: r, nextLoc: n }, "next" === this.method && (this.arg = t), y; } }, e; }\nfunction asyncGeneratorStep(n, t, e, r, o, a, c) { try { var i = n[a](c), u = i.value; } catch (n) { return void e(n); } i.done ? t(u) : Promise.resolve(u).then(r, o); }\nfunction _asyncToGenerator(n) { return function () { var t = this, e = arguments; return new Promise(function (r, o) { var a = n.apply(t, e); function _next(n) { asyncGeneratorStep(a, r, o, _next, _throw, "next", n); } function _throw(n) { asyncGeneratorStep(a, r, o, _next, _throw, "throw", n); } _next(void 0); }); }; }\nvar jwt = __webpack_require__(/*! jsonwebtoken */ "jsonwebtoken");\nvar User = __webpack_require__(/*! ../User/models/userModel */ "./User/models/userModel.js");\nvar _require = __webpack_require__(/*! ../services/ResponseService */ "./services/ResponseService.js"),\n  Response = _require.Response;\nvar config = __webpack_require__(/*! ../config.js */ "./config.js");\nvar userAuth = /*#__PURE__*/function () {\n  var _ref = _asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(req, res, next) {\n    var token, _error$message;\n    return _regeneratorRuntime().wrap(function _callee2$(_context2) {\n      while (1) switch (_context2.prev = _context2.next) {\n        case 0:\n          console.log("I am in");\n          try {\n            token = req.headers["x-access-token"] || req.headers[\'Authorization\'] || req.headers[\'authorization\'];\n            if (token) {\n              jwt.verify(token, process.env.security_key, /*#__PURE__*/function () {\n                var _ref2 = _asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(err, decode) {\n                  var userDetails;\n                  return _regeneratorRuntime().wrap(function _callee$(_context) {\n                    while (1) switch (_context.prev = _context.next) {\n                      case 0:\n                        if (err) {\n                          _context.next = 8;\n                          break;\n                        }\n                        _context.next = 3;\n                        return User.findOne({\n                          email: decode.email\n                        });\n                      case 3:\n                        userDetails = _context.sent;\n                        req.user = userDetails;\n                        next();\n                        _context.next = 9;\n                        break;\n                      case 8:\n                        Response(res, 400, config.error_message, "Token is not valid", null);\n                      case 9:\n                      case "end":\n                        return _context.stop();\n                    }\n                  }, _callee);\n                }));\n                return function (_x4, _x5) {\n                  return _ref2.apply(this, arguments);\n                };\n              }());\n            } else {\n              Response(res, 400, config.error_message, "Token is required!", null);\n            }\n          } catch (error) {\n            Response(res, 400, config.error_message, (_error$message = error === null || error === void 0 ? void 0 : error.message) !== null && _error$message !== void 0 ? _error$message : error, null);\n          }\n        case 2:\n        case "end":\n          return _context2.stop();\n      }\n    }, _callee2);\n  }));\n  return function userAuth(_x, _x2, _x3) {\n    return _ref.apply(this, arguments);\n  };\n}();\nmodule.exports = userAuth;\n\n//# sourceURL=webpack://profitcart-nodejs/./middleware/userMiddleware.js?')},"./middleware/validateReqData.js":(module,__unused_webpack_exports,__webpack_require__)=>{eval('var _require = __webpack_require__(/*! ../services/ResponseService */ "./services/ResponseService.js"),\n  Response = _require.Response;\nvar validationSchema = __webpack_require__(/*! ../services/validationSchema */ "./services/validationSchema.js");\nvar config = __webpack_require__(/*! ../config */ "./config.js");\nvar validateReqData = function validateReqData(schema) {\n  return function (req, res, next) {\n    console.log("I am inside validate schema");\n    if (schema && validationSchema["".concat(schema)]) {\n      var _validationSchema$val = validationSchema["".concat(schema)].validate(req === null || req === void 0 ? void 0 : req.body),\n        error = _validationSchema$val.error,\n        value = _validationSchema$val.value;\n      console.log(error, value);\n      if (error) {\n        var _error$details$;\n        Response(res, 400, config.error_message, error === null || error === void 0 || (_error$details$ = error.details[0]) === null || _error$details$ === void 0 ? void 0 : _error$details$.message);\n      } else {\n        req.body = value;\n        next();\n      }\n    } else {\n      console.log("I don\'t have nothing");\n      next();\n    }\n  };\n};\nmodule.exports = validateReqData;\n\n//# sourceURL=webpack://profitcart-nodejs/./middleware/validateReqData.js?')},"./services/ResponseService.js":module=>{eval("var Response = function Response(res, statusCode, status, message, data) {\n  return res.status(statusCode).json({\n    status: status,\n    message: message,\n    data: data\n  });\n};\nmodule.exports = {\n  Response: Response\n};\n\n//# sourceURL=webpack://profitcart-nodejs/./services/ResponseService.js?")},"./services/validationSchema.js":(module,__unused_webpack_exports,__webpack_require__)=>{eval('var joi = __webpack_require__(/*! joi */ "joi");\nvar Schemas = {\n  address: joi.object({\n    name: joi.string(),\n    firstLine: joi.string(),\n    secondLine: joi.string(),\n    country: joi.string(),\n    countryCode: joi.string(),\n    postalCode: joi.string(),\n    city: joi.string(),\n    state: joi.string(),\n    phone: joi.number(),\n    phoneCode: joi.string(),\n    addressId: joi.string().length(24)\n  }),\n  cart: joi.object({\n    productId: joi.string().length(24),\n    id: joi.string().length(24),\n    quantity: joi.number(),\n    amount: joi.string(),\n    currency: joi.string(),\n    actual_amount: joi.string(),\n    products: joi.array().items(joi.object({\n      id: joi.string().length(24).required("Product id is required to remove"),\n      quantity: joi.number(),\n      price: joi.number(),\n      title: joi.string(),\n      cartId: joi.string().length(24).required("Cart id is required to remove")\n    })),\n    type: joi.string()\n  }),\n  notification: joi.object({\n    id: joi.array(),\n    type: joi.string().valid("order_Status", "promotion", "offer", "info"),\n    message: joi.string()\n  }),\n  order: joi.object({\n    id: joi.string().length(24),\n    product: joi.array().items(joi.object({\n      product: joi.string().length(24).required("Product id is requried for order"),\n      quantity: joi.number().required("Quantity is requied for order"),\n      title: joi.string()\n    })),\n    shippingAddress: joi.string().length(24),\n    paymentMethod: joi.string(),\n    orderId: joi.string().length(24),\n    productId: joi.string().length(24),\n    returnOption: joi.string().valid("refund", "return")\n  }),\n  review: joi.object({\n    productId: joi.string().length(24),\n    rating: joi.number(),\n    reviewText: joi.string(),\n    reviewId: joi.string().length(24)\n  }),\n  user: joi.object({\n    name: joi.string(),\n    password: joi.string(),\n    email: joi.string().email().message({\n      \'string.email\': "Email is not valid"\n    }),\n    userRole: joi.string().valid("user", "seller", "admin")\n  }),\n  wishlist: joi.object({\n    name: joi.string(),\n    productId: joi.string().length(24),\n    id: joi.string().length(24)\n  })\n};\nmodule.exports = Schemas;\n\n//# sourceURL=webpack://profitcart-nodejs/./services/validationSchema.js?')},bcrypt:e=>{"use strict";e.exports=require("bcrypt")},cors:e=>{"use strict";e.exports=require("cors")},dotenv:e=>{"use strict";e.exports=require("dotenv")},express:e=>{"use strict";e.exports=require("express")},helmet:e=>{"use strict";e.exports=require("helmet")},joi:e=>{"use strict";e.exports=require("joi")},jsonwebtoken:e=>{"use strict";e.exports=require("jsonwebtoken")},mongoose:e=>{"use strict";e.exports=require("mongoose")},morgan:e=>{"use strict";e.exports=require("morgan")},stripe:e=>{"use strict";e.exports=require("stripe")},os:e=>{"use strict";e.exports=require("os")}},__webpack_module_cache__={};function __webpack_require__(e){var t=__webpack_module_cache__[e];if(void 0!==t)return t.exports;var n=__webpack_module_cache__[e]={exports:{}};return __webpack_modules__[e](n,n.exports,__webpack_require__),n.exports}var __webpack_exports__=__webpack_require__("./app.js")})();